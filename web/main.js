import{r as q,a as cu,c as gn,g as ll,R as du}from"./vendor-DJ1oPbzn.js";import{app as fu}from"/scripts/app.js";var al={exports:{}},bn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=q,hu=Symbol.for("react.element"),mu=Symbol.for("react.fragment"),gu=Object.prototype.hasOwnProperty,yu=pu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xu={key:!0,ref:!0,__self:!0,__source:!0};function ul(e,t,n){var i,o={},r=null,s=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)gu.call(t,i)&&!xu.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:hu,type:e,key:r,ref:s,props:o,_owner:yu.current}}bn.Fragment=mu;bn.jsx=ul;bn.jsxs=ul;al.exports=bn;var g=al.exports,ci={},So=cu;ci.createRoot=So.createRoot,ci.hydrateRoot=So.hydrateRoot;const vu="modulepreload",Su=function(e){return"/"+e},Co={},Cu=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=Su(c),c in Co)return;Co[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":vu,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return o.then(s=>{for(const l of s||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(e,t)=>{const n=q.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:c,...d},f)=>q.createElement("svg",{ref:f,...Eu,width:o,height:o,stroke:i,strokeWidth:s?Number(r)*24/Number(o):r,className:["lucide",`lucide-${Tu(e)}`,l].join(" "),...d},[...t.map(([p,h])=>q.createElement(p,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Z("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Z("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Z("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Z("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Z("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Z("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Z("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Z("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=Z("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Z("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Z("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=Z("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Z("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Z("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Z("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Z("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Z("Scaling",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Z("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Z("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Z("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Z("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Z("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Z("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function nc(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const ic=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oc=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rc={};function Po(e,t){return(rc.jsx?oc:ic).test(e)}const sc=/[ \t\n\f\r]/g;function lc(e){return typeof e=="object"?e.type==="text"?Mo(e.value):!1:Mo(e)}function Mo(e){return e.replace(sc,"")===""}class Xt{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}Xt.prototype.normal={};Xt.prototype.property={};Xt.prototype.space=void 0;function pl(e,t){const n={},i={};for(const o of e)Object.assign(n,o.property),Object.assign(i,o.normal);return new Xt(n,i,t)}function di(e){return e.toLowerCase()}class Ge{constructor(t,n){this.attribute=n,this.property=t}}Ge.prototype.attribute="";Ge.prototype.booleanish=!1;Ge.prototype.boolean=!1;Ge.prototype.commaOrSpaceSeparated=!1;Ge.prototype.commaSeparated=!1;Ge.prototype.defined=!1;Ge.prototype.mustUseProperty=!1;Ge.prototype.number=!1;Ge.prototype.overloadedBoolean=!1;Ge.prototype.property="";Ge.prototype.spaceSeparated=!1;Ge.prototype.space=void 0;let ac=0;const ie=St(),ve=St(),fi=St(),F=St(),pe=St(),At=St(),qe=St();function St(){return 2**++ac}const pi=Object.freeze(Object.defineProperty({__proto__:null,boolean:ie,booleanish:ve,commaOrSpaceSeparated:qe,commaSeparated:At,number:F,overloadedBoolean:fi,spaceSeparated:pe},Symbol.toStringTag,{value:"Module"})),On=Object.keys(pi);class Bi extends Ge{constructor(t,n,i,o){let r=-1;if(super(t,n),Do(this,"space",o),typeof i=="number")for(;++r<On.length;){const s=On[r];Do(this,On[r],(i&pi[s])===pi[s])}}}Bi.prototype.defined=!0;function Do(e,t,n){n&&(e[t]=n)}function Pt(e){const t={},n={};for(const[i,o]of Object.entries(e.properties)){const r=new Bi(i,e.transform(e.attributes||{},i),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(r.mustUseProperty=!0),t[i]=r,n[di(i)]=i,n[di(r.attribute)]=i}return new Xt(t,n,e.space)}const hl=Pt({properties:{ariaActiveDescendant:null,ariaAtomic:ve,ariaAutoComplete:null,ariaBusy:ve,ariaChecked:ve,ariaColCount:F,ariaColIndex:F,ariaColSpan:F,ariaControls:pe,ariaCurrent:null,ariaDescribedBy:pe,ariaDetails:null,ariaDisabled:ve,ariaDropEffect:pe,ariaErrorMessage:null,ariaExpanded:ve,ariaFlowTo:pe,ariaGrabbed:ve,ariaHasPopup:null,ariaHidden:ve,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pe,ariaLevel:F,ariaLive:null,ariaModal:ve,ariaMultiLine:ve,ariaMultiSelectable:ve,ariaOrientation:null,ariaOwns:pe,ariaPlaceholder:null,ariaPosInSet:F,ariaPressed:ve,ariaReadOnly:ve,ariaRelevant:null,ariaRequired:ve,ariaRoleDescription:pe,ariaRowCount:F,ariaRowIndex:F,ariaRowSpan:F,ariaSelected:ve,ariaSetSize:F,ariaSort:null,ariaValueMax:F,ariaValueMin:F,ariaValueNow:F,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function ml(e,t){return t in e?e[t]:t}function gl(e,t){return ml(e,t.toLowerCase())}const uc=Pt({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:At,acceptCharset:pe,accessKey:pe,action:null,allow:null,allowFullScreen:ie,allowPaymentRequest:ie,allowUserMedia:ie,alt:null,as:null,async:ie,autoCapitalize:null,autoComplete:pe,autoFocus:ie,autoPlay:ie,blocking:pe,capture:null,charSet:null,checked:ie,cite:null,className:pe,cols:F,colSpan:null,content:null,contentEditable:ve,controls:ie,controlsList:pe,coords:F|At,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ie,defer:ie,dir:null,dirName:null,disabled:ie,download:fi,draggable:ve,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ie,formTarget:null,headers:pe,height:F,hidden:fi,high:F,href:null,hrefLang:null,htmlFor:pe,httpEquiv:pe,id:null,imageSizes:null,imageSrcSet:null,inert:ie,inputMode:null,integrity:null,is:null,isMap:ie,itemId:null,itemProp:pe,itemRef:pe,itemScope:ie,itemType:pe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ie,low:F,manifest:null,max:null,maxLength:F,media:null,method:null,min:null,minLength:F,multiple:ie,muted:ie,name:null,nonce:null,noModule:ie,noValidate:ie,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ie,optimum:F,pattern:null,ping:pe,placeholder:null,playsInline:ie,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ie,referrerPolicy:null,rel:pe,required:ie,reversed:ie,rows:F,rowSpan:F,sandbox:pe,scope:null,scoped:ie,seamless:ie,selected:ie,shadowRootClonable:ie,shadowRootDelegatesFocus:ie,shadowRootMode:null,shape:null,size:F,sizes:null,slot:null,span:F,spellCheck:ve,src:null,srcDoc:null,srcLang:null,srcSet:null,start:F,step:null,style:null,tabIndex:F,target:null,title:null,translate:null,type:null,typeMustMatch:ie,useMap:null,value:ve,width:F,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pe,axis:null,background:null,bgColor:null,border:F,borderColor:null,bottomMargin:F,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ie,declare:ie,event:null,face:null,frame:null,frameBorder:null,hSpace:F,leftMargin:F,link:null,longDesc:null,lowSrc:null,marginHeight:F,marginWidth:F,noResize:ie,noHref:ie,noShade:ie,noWrap:ie,object:null,profile:null,prompt:null,rev:null,rightMargin:F,rules:null,scheme:null,scrolling:ve,standby:null,summary:null,text:null,topMargin:F,valueType:null,version:null,vAlign:null,vLink:null,vSpace:F,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ie,disableRemotePlayback:ie,prefix:null,property:null,results:F,security:null,unselectable:null},space:"html",transform:gl}),cc=Pt({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:qe,accentHeight:F,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:F,amplitude:F,arabicForm:null,ascent:F,attributeName:null,attributeType:null,azimuth:F,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:F,by:null,calcMode:null,capHeight:F,className:pe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:F,diffuseConstant:F,direction:null,display:null,dur:null,divisor:F,dominantBaseline:null,download:ie,dx:null,dy:null,edgeMode:null,editable:null,elevation:F,enableBackground:null,end:null,event:null,exponent:F,externalResourcesRequired:null,fill:null,fillOpacity:F,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:At,g2:At,glyphName:At,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:F,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:F,horizOriginX:F,horizOriginY:F,id:null,ideographic:F,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:F,k:F,k1:F,k2:F,k3:F,k4:F,kernelMatrix:qe,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:F,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:F,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:F,overlineThickness:F,paintOrder:null,panose1:null,path:null,pathLength:F,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:F,pointsAtY:F,pointsAtZ:F,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qe,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qe,rev:qe,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qe,requiredFeatures:qe,requiredFonts:qe,requiredFormats:qe,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:F,specularExponent:F,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:F,strikethroughThickness:F,string:null,stroke:null,strokeDashArray:qe,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:F,strokeOpacity:F,strokeWidth:null,style:null,surfaceScale:F,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qe,tabIndex:F,tableValues:null,target:null,targetX:F,targetY:F,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qe,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:F,underlineThickness:F,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:F,values:null,vAlphabetic:F,vMathematical:F,vectorEffect:null,vHanging:F,vIdeographic:F,version:null,vertAdvY:F,vertOriginX:F,vertOriginY:F,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:F,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ml}),yl=Pt({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),xl=Pt({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:gl}),vl=Pt({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),dc={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},fc=/[A-Z]/g,Lo=/-[a-z]/g,pc=/^data[-\w.:]+$/i;function hc(e,t){const n=di(t);let i=t,o=Ge;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&pc.test(t)){if(t.charAt(4)==="-"){const r=t.slice(5).replace(Lo,gc);i="data"+r.charAt(0).toUpperCase()+r.slice(1)}else{const r=t.slice(4);if(!Lo.test(r)){let s=r.replace(fc,mc);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}o=Bi}return new o(i,t)}function mc(e){return"-"+e.toLowerCase()}function gc(e){return e.charAt(1).toUpperCase()}const yc=pl([hl,uc,yl,xl,vl],"html"),Gi=pl([hl,cc,yl,xl,vl],"svg");function xc(e){return e.join(" ").trim()}var Vi={},Uo=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,vc=/\n/g,Sc=/^\s*/,Cc=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ec=/^:\s*/,Tc=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,wc=/^[;\s]*/,_c=/^\s+|\s+$/g,kc=`
`,Fo="/",Bo="*",xt="",Ic="comment",Ac="declaration";function bc(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,i=1;function o(y){var v=y.match(vc);v&&(n+=v.length);var S=y.lastIndexOf(kc);i=~S?y.length-S:i+y.length}function r(){var y={line:n,column:i};return function(v){return v.position=new s(y),d(),v}}function s(y){this.start=y,this.end={line:n,column:i},this.source=t.source}s.prototype.content=e;function l(y){var v=new Error(t.source+":"+n+":"+i+": "+y);if(v.reason=y,v.filename=t.source,v.line=n,v.column=i,v.source=e,!t.silent)throw v}function c(y){var v=y.exec(e);if(v){var S=v[0];return o(S),e=e.slice(S.length),v}}function d(){c(Sc)}function f(y){var v;for(y=y||[];v=p();)v!==!1&&y.push(v);return y}function p(){var y=r();if(!(Fo!=e.charAt(0)||Bo!=e.charAt(1))){for(var v=2;xt!=e.charAt(v)&&(Bo!=e.charAt(v)||Fo!=e.charAt(v+1));)++v;if(v+=2,xt===e.charAt(v-1))return l("End of comment missing");var S=e.slice(2,v-2);return i+=2,o(S),e=e.slice(v),i+=2,y({type:Ic,comment:S})}}function h(){var y=r(),v=c(Cc);if(v){if(p(),!c(Ec))return l("property missing ':'");var S=c(Tc),x=y({type:Ac,property:Go(v[0].replace(Uo,xt)),value:S?Go(S[0].replace(Uo,xt)):xt});return c(wc),x}}function m(){var y=[];f(y);for(var v;v=h();)v!==!1&&(y.push(v),f(y));return y}return d(),m()}function Go(e){return e?e.replace(_c,xt):xt}var Nc=bc,Rc=gn&&gn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.default=Mc;const Pc=Rc(Nc);function Mc(e,t){let n=null;if(!e||typeof e!="string")return n;const i=(0,Pc.default)(e),o=typeof t=="function";return i.forEach(r=>{if(r.type!=="declaration")return;const{property:s,value:l}=r;o?t(s,l,r):l&&(n=n||{},n[s]=l)}),n}var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.camelCase=void 0;var Dc=/^--[a-zA-Z0-9_-]+$/,Lc=/-([a-z])/g,Uc=/^[^-]+$/,Fc=/^-(webkit|moz|ms|o|khtml)-/,Bc=/^-(ms)-/,Gc=function(e){return!e||Uc.test(e)||Dc.test(e)},Vc=function(e,t){return t.toUpperCase()},Vo=function(e,t){return"".concat(t,"-")},Hc=function(e,t){return t===void 0&&(t={}),Gc(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Bc,Vo):e=e.replace(Fc,Vo),e.replace(Lc,Vc))};Nn.camelCase=Hc;var Oc=gn&&gn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},qc=Oc(Vi),zc=Nn;function hi(e,t){var n={};return!e||typeof e!="string"||(0,qc.default)(e,function(i,o){i&&o&&(n[(0,zc.camelCase)(i,t)]=o)}),n}hi.default=hi;var $c=hi;const Jc=ll($c),Sl=Cl("end"),Hi=Cl("start");function Cl(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Wc(e){const t=Hi(e),n=Sl(e);if(t&&n)return{start:t,end:n}}function zt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ho(e.position):"start"in e||"end"in e?Ho(e):"line"in e||"column"in e?mi(e):""}function mi(e){return Oo(e&&e.line)+":"+Oo(e&&e.column)}function Ho(e){return mi(e&&e.start)+"-"+mi(e&&e.end)}function Oo(e){return e&&typeof e=="number"?e:1}class Ne extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let o="",r={},s=!1;if(n&&("line"in n&&"column"in n?r={place:n}:"start"in n&&"end"in n?r={place:n}:"type"in n?r={ancestors:[n],place:n.position}:r={...n}),typeof t=="string"?o=t:!r.cause&&t&&(s=!0,o=t.message,r.cause=t),!r.ruleId&&!r.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?r.ruleId=i:(r.source=i.slice(0,c),r.ruleId=i.slice(c+1))}if(!r.place&&r.ancestors&&r.ancestors){const c=r.ancestors[r.ancestors.length-1];c&&(r.place=c.position)}const l=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=l?l.line:void 0,this.name=zt(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=s&&r.cause&&typeof r.cause.stack=="string"?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ne.prototype.file="";Ne.prototype.name="";Ne.prototype.reason="";Ne.prototype.message="";Ne.prototype.stack="";Ne.prototype.column=void 0;Ne.prototype.line=void 0;Ne.prototype.ancestors=void 0;Ne.prototype.cause=void 0;Ne.prototype.fatal=void 0;Ne.prototype.place=void 0;Ne.prototype.ruleId=void 0;Ne.prototype.source=void 0;const Oi={}.hasOwnProperty,Yc=new Map,Kc=/[A-Z]/g,Xc=new Set(["table","tbody","thead","tfoot","tr"]),Qc=new Set(["td","th"]),El="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Zc(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=sd(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=rd(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Gi:yc,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},r=Tl(o,e,void 0);return r&&typeof r!="string"?r:o.create(e,o.Fragment,{children:r||void 0},void 0)}function Tl(e,t,n){if(t.type==="element")return jc(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return ed(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return nd(e,t,n);if(t.type==="mdxjsEsm")return td(e,t);if(t.type==="root")return id(e,t,n);if(t.type==="text")return od(e,t)}function jc(e,t,n){const i=e.schema;let o=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=Gi,e.schema=o),e.ancestors.push(t);const r=_l(e,t.tagName,!1),s=ld(e,t);let l=zi(e,t);return Xc.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!lc(c):!0})),wl(e,s,r,t),qi(s,l),e.ancestors.pop(),e.schema=i,e.create(t,r,s,n)}function ed(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}Wt(e,t.position)}function td(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Wt(e,t.position)}function nd(e,t,n){const i=e.schema;let o=i;t.name==="svg"&&i.space==="html"&&(o=Gi,e.schema=o),e.ancestors.push(t);const r=t.name===null?e.Fragment:_l(e,t.name,!0),s=ad(e,t),l=zi(e,t);return wl(e,s,r,t),qi(s,l),e.ancestors.pop(),e.schema=i,e.create(t,r,s,n)}function id(e,t,n){const i={};return qi(i,zi(e,t)),e.create(t,e.Fragment,i,n)}function od(e,t){return t.value}function wl(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function qi(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function rd(e,t,n){return i;function i(o,r,s,l){const d=Array.isArray(s.children)?n:t;return l?d(r,s,l):d(r,s)}}function sd(e,t){return n;function n(i,o,r,s){const l=Array.isArray(r.children),c=Hi(i);return t(o,r,s,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function ld(e,t){const n={};let i,o;for(o in t.properties)if(o!=="children"&&Oi.call(t.properties,o)){const r=ud(e,o,t.properties[o]);if(r){const[s,l]=r;e.tableCellAlignToStyle&&s==="align"&&typeof l=="string"&&Qc.has(t.tagName)?i=l:n[s]=l}}if(i){const r=n.style||(n.style={});r[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function ad(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const r=i.data.estree.body[0];r.type;const s=r.expression;s.type;const l=s.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Wt(e,t.position);else{const o=i.name;let r;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const l=i.value.data.estree.body[0];l.type,r=e.evaluater.evaluateExpression(l.expression)}else Wt(e,t.position);else r=i.value===null?!0:i.value;n[o]=r}return n}function zi(e,t){const n=[];let i=-1;const o=e.passKeys?new Map:Yc;for(;++i<t.children.length;){const r=t.children[i];let s;if(e.passKeys){const c=r.type==="element"?r.tagName:r.type==="mdxJsxFlowElement"||r.type==="mdxJsxTextElement"?r.name:void 0;if(c){const d=o.get(c)||0;s=c+"-"+d,o.set(c,d+1)}}const l=Tl(e,r,s);l!==void 0&&n.push(l)}return n}function ud(e,t,n){const i=hc(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?nc(n):xc(n)),i.property==="style"){let o=typeof n=="object"?n:cd(e,String(n));return e.stylePropertyNameCase==="css"&&(o=dd(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&i.space?dc[i.property]||i.property:i.attribute,n]}}function cd(e,t){try{return Jc(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,o=new Ne("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=El+"#cannot-parse-style-attribute",o}}function _l(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let r=-1,s;for(;++r<o.length;){const l=Po(o[r])?{type:"Identifier",name:o[r]}:{type:"Literal",value:o[r]};s=s?{type:"MemberExpression",object:s,property:l,computed:!!(r&&l.type==="Literal"),optional:!1}:l}i=s}else i=Po(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const o=i.value;return Oi.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(i);Wt(e)}function Wt(e,t){const n=new Ne("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=El+"#cannot-handle-mdx-estrees-without-createevaluater",n}function dd(e){const t={};let n;for(n in e)Oi.call(e,n)&&(t[fd(n)]=e[n]);return t}function fd(e){let t=e.replace(Kc,pd);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function pd(e){return"-"+e.toLowerCase()}const qn={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},hd={};function $i(e,t){const n=hd,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return kl(e,i,o)}function kl(e,t,n){if(md(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return qo(e.children,t,n)}return Array.isArray(e)?qo(e,t,n):""}function qo(e,t,n){const i=[];let o=-1;for(;++o<e.length;)i[o]=kl(e[o],t,n);return i.join("")}function md(e){return!!(e&&typeof e=="object")}const zo=document.createElement("i");function Ji(e){const t="&"+e+";";zo.innerHTML=t;const n=zo.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ze(e,t,n,i){const o=e.length;let r=0,s;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,i.length<1e4)s=Array.from(i),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);r<i.length;)s=i.slice(r,r+1e4),s.unshift(t,0),e.splice(...s),r+=1e4,t+=1e4}function Je(e,t){return e.length>0?(ze(e,e.length,0,t),e):t}const $o={}.hasOwnProperty;function Il(e){const t={};let n=-1;for(;++n<e.length;)gd(t,e[n]);return t}function gd(e,t){let n;for(n in t){const o=($o.call(e,n)?e[n]:void 0)||(e[n]={}),r=t[n];let s;if(r)for(s in r){$o.call(o,s)||(o[s]=[]);const l=r[s];yd(o[s],Array.isArray(l)?l:l?[l]:[])}}}function yd(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);ze(e,0,0,i)}function Al(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ze(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const De=dt(/[A-Za-z]/),Ae=dt(/[\dA-Za-z]/),xd=dt(/[#-'*+\--9=?A-Z^-~]/);function vn(e){return e!==null&&(e<32||e===127)}const gi=dt(/\d/),vd=dt(/[\dA-Fa-f]/),Sd=dt(/[!-/:-@[-`{-~]/);function W(e){return e!==null&&e<-2}function de(e){return e!==null&&(e<0||e===32)}function oe(e){return e===-2||e===-1||e===32}const Rn=dt(new RegExp("\\p{P}|\\p{S}","u")),vt=dt(/\s/);function dt(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Mt(e){const t=[];let n=-1,i=0,o=0;for(;++n<e.length;){const r=e.charCodeAt(n);let s="";if(r===37&&Ae(e.charCodeAt(n+1))&&Ae(e.charCodeAt(n+2)))o=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(s=String.fromCharCode(r));else if(r>55295&&r<57344){const l=e.charCodeAt(n+1);r<56320&&l>56319&&l<57344?(s=String.fromCharCode(r,l),o=1):s=""}else s=String.fromCharCode(r);s&&(t.push(e.slice(i,n),encodeURIComponent(s)),i=n+o+1,s=""),o&&(n+=o,o=0)}return t.join("")+e.slice(i)}function se(e,t,n,i){const o=i?i-1:Number.POSITIVE_INFINITY;let r=0;return s;function s(c){return oe(c)?(e.enter(n),l(c)):t(c)}function l(c){return oe(c)&&r++<o?(e.consume(c),l):(e.exit(n),t(c))}}const Cd={tokenize:Ed};function Ed(e){const t=e.attempt(this.parser.constructs.contentInitial,i,o);let n;return t;function i(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),se(e,t,"linePrefix")}function o(l){return e.enter("paragraph"),r(l)}function r(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,s(l)}function s(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return W(l)?(e.consume(l),e.exit("chunkText"),r):(e.consume(l),s)}}const Td={tokenize:wd},Jo={tokenize:_d};function wd(e){const t=this,n=[];let i=0,o,r,s;return l;function l(k){if(i<n.length){const R=n[i];return t.containerState=R[1],e.attempt(R[0].continuation,c,d)(k)}return d(k)}function c(k){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&A();const R=t.events.length;let w=R,I;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){I=t.events[w][1].end;break}x(i);let D=R;for(;D<t.events.length;)t.events[D][1].end={...I},D++;return ze(t.events,w+1,0,t.events.slice(R)),t.events.length=D,d(k)}return l(k)}function d(k){if(i===n.length){if(!o)return h(k);if(o.currentConstruct&&o.currentConstruct.concrete)return y(k);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Jo,f,p)(k)}function f(k){return o&&A(),x(i),h(k)}function p(k){return t.parser.lazy[t.now().line]=i!==n.length,s=t.now().offset,y(k)}function h(k){return t.containerState={},e.attempt(Jo,m,y)(k)}function m(k){return i++,n.push([t.currentConstruct,t.containerState]),h(k)}function y(k){if(k===null){o&&A(),x(0),e.consume(k);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:r}),v(k)}function v(k){if(k===null){S(e.exit("chunkFlow"),!0),x(0),e.consume(k);return}return W(k)?(e.consume(k),S(e.exit("chunkFlow")),i=0,t.interrupt=void 0,l):(e.consume(k),v)}function S(k,R){const w=t.sliceStream(k);if(R&&w.push(null),k.previous=r,r&&(r.next=k),r=k,o.defineSkip(k.start),o.write(w),t.parser.lazy[k.start.line]){let I=o.events.length;for(;I--;)if(o.events[I][1].start.offset<s&&(!o.events[I][1].end||o.events[I][1].end.offset>s))return;const D=t.events.length;let H=D,M,_;for(;H--;)if(t.events[H][0]==="exit"&&t.events[H][1].type==="chunkFlow"){if(M){_=t.events[H][1].end;break}M=!0}for(x(i),I=D;I<t.events.length;)t.events[I][1].end={..._},I++;ze(t.events,H+1,0,t.events.slice(D)),t.events.length=I}}function x(k){let R=n.length;for(;R-- >k;){const w=n[R];t.containerState=w[1],w[0].exit.call(t,e)}n.length=k}function A(){o.write([null]),r=void 0,o=void 0,t.containerState._closeFlow=void 0}}function _d(e,t,n){return se(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rt(e){if(e===null||de(e)||vt(e))return 1;if(Rn(e))return 2}function Pn(e,t,n){const i=[];let o=-1;for(;++o<e.length;){const r=e[o].resolveAll;r&&!i.includes(r)&&(t=r(t,n),i.push(r))}return t}const yi={name:"attention",resolveAll:kd,tokenize:Id};function kd(e,t){let n=-1,i,o,r,s,l,c,d,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[i][1].end},h={...e[n][1].start};Wo(p,-c),Wo(h,c),s={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[i][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},r={type:c>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},o={type:c>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},e[i][1].end={...s.start},e[n][1].start={...l.end},d=[],e[i][1].end.offset-e[i][1].start.offset&&(d=Je(d,[["enter",e[i][1],t],["exit",e[i][1],t]])),d=Je(d,[["enter",o,t],["enter",s,t],["exit",s,t],["enter",r,t]]),d=Je(d,Pn(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),d=Je(d,[["exit",r,t],["enter",l,t],["exit",l,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,d=Je(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,ze(e,i-1,n-i+3,d),n=i+d.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Id(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,o=Rt(i);let r;return s;function s(c){return r=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===r)return e.consume(c),l;const d=e.exit("attentionSequence"),f=Rt(c),p=!f||f===2&&o||n.includes(c),h=!o||o===2&&f||n.includes(i);return d._open=!!(r===42?p:p&&(o||!h)),d._close=!!(r===42?h:h&&(f||!p)),t(c)}}function Wo(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ad={name:"autolink",tokenize:bd};function bd(e,t,n){let i=0;return o;function o(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r}function r(m){return De(m)?(e.consume(m),s):m===64?n(m):d(m)}function s(m){return m===43||m===45||m===46||Ae(m)?(i=1,l(m)):d(m)}function l(m){return m===58?(e.consume(m),i=0,c):(m===43||m===45||m===46||Ae(m))&&i++<32?(e.consume(m),l):(i=0,d(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||vn(m)?n(m):(e.consume(m),c)}function d(m){return m===64?(e.consume(m),f):xd(m)?(e.consume(m),d):n(m)}function f(m){return Ae(m)?p(m):n(m)}function p(m){return m===46?(e.consume(m),i=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Ae(m))&&i++<63){const y=m===45?h:p;return e.consume(m),y}return n(m)}}const Qt={partial:!0,tokenize:Nd};function Nd(e,t,n){return i;function i(r){return oe(r)?se(e,o,"linePrefix")(r):o(r)}function o(r){return r===null||W(r)?t(r):n(r)}}const bl={continuation:{tokenize:Pd},exit:Md,name:"blockQuote",tokenize:Rd};function Rd(e,t,n){const i=this;return o;function o(s){if(s===62){const l=i.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),r}return n(s)}function r(s){return oe(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Pd(e,t,n){const i=this;return o;function o(s){return oe(s)?se(e,r,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):r(s)}function r(s){return e.attempt(bl,t,n)(s)}}function Md(e){e.exit("blockQuote")}const Nl={name:"characterEscape",tokenize:Dd};function Dd(e,t,n){return i;function i(r){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(r),e.exit("escapeMarker"),o}function o(r){return Sd(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}const Rl={name:"characterReference",tokenize:Ld};function Ld(e,t,n){const i=this;let o=0,r,s;return l;function l(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),r=31,s=Ae,f(p))}function d(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,s=vd,f):(e.enter("characterReferenceValue"),r=7,s=gi,f(p))}function f(p){if(p===59&&o){const h=e.exit("characterReferenceValue");return s===Ae&&!Ji(i.sliceSerialize(h))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(p)&&o++<r?(e.consume(p),f):n(p)}}const Yo={partial:!0,tokenize:Fd},Ko={concrete:!0,name:"codeFenced",tokenize:Ud};function Ud(e,t,n){const i=this,o={partial:!0,tokenize:w};let r=0,s=0,l;return c;function c(I){return d(I)}function d(I){const D=i.events[i.events.length-1];return r=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,l=I,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(I)}function f(I){return I===l?(s++,e.consume(I),f):s<3?n(I):(e.exit("codeFencedFenceSequence"),oe(I)?se(e,p,"whitespace")(I):p(I))}function p(I){return I===null||W(I)?(e.exit("codeFencedFence"),i.interrupt?t(I):e.check(Yo,v,R)(I)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(I))}function h(I){return I===null||W(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(I)):oe(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),se(e,m,"whitespace")(I)):I===96&&I===l?n(I):(e.consume(I),h)}function m(I){return I===null||W(I)?p(I):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(I))}function y(I){return I===null||W(I)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(I)):I===96&&I===l?n(I):(e.consume(I),y)}function v(I){return e.attempt(o,R,S)(I)}function S(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),x}function x(I){return r>0&&oe(I)?se(e,A,"linePrefix",r+1)(I):A(I)}function A(I){return I===null||W(I)?e.check(Yo,v,R)(I):(e.enter("codeFlowValue"),k(I))}function k(I){return I===null||W(I)?(e.exit("codeFlowValue"),A(I)):(e.consume(I),k)}function R(I){return e.exit("codeFenced"),t(I)}function w(I,D,H){let M=0;return _;function _(Y){return I.enter("lineEnding"),I.consume(Y),I.exit("lineEnding"),U}function U(Y){return I.enter("codeFencedFence"),oe(Y)?se(I,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):G(Y)}function G(Y){return Y===l?(I.enter("codeFencedFenceSequence"),$(Y)):H(Y)}function $(Y){return Y===l?(M++,I.consume(Y),$):M>=s?(I.exit("codeFencedFenceSequence"),oe(Y)?se(I,K,"whitespace")(Y):K(Y)):H(Y)}function K(Y){return Y===null||W(Y)?(I.exit("codeFencedFence"),D(Y)):H(Y)}}}function Fd(e,t,n){const i=this;return o;function o(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r)}function r(s){return i.parser.lazy[i.now().line]?n(s):t(s)}}const zn={name:"codeIndented",tokenize:Gd},Bd={partial:!0,tokenize:Vd};function Gd(e,t,n){const i=this;return o;function o(d){return e.enter("codeIndented"),se(e,r,"linePrefix",5)(d)}function r(d){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?s(d):n(d)}function s(d){return d===null?c(d):W(d)?e.attempt(Bd,s,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||W(d)?(e.exit("codeFlowValue"),s(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function Vd(e,t,n){const i=this;return o;function o(s){return i.parser.lazy[i.now().line]?n(s):W(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):se(e,r,"linePrefix",5)(s)}function r(s){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):W(s)?o(s):n(s)}}const Hd={name:"codeText",previous:qd,resolve:Od,tokenize:zd};function Od(e){let t=e.length-4,n=3,i,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)o===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(o=i):(i===t||e[i][1].type==="lineEnding")&&(e[o][1].type="codeTextData",i!==o+2&&(e[o][1].end=e[i-1][1].end,e.splice(o+2,i-o-2),t-=i-o-2,i=o+2),o=void 0);return e}function qd(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function zd(e,t,n){let i=0,o,r;return s;function s(p){return e.enter("codeText"),e.enter("codeTextSequence"),l(p)}function l(p){return p===96?(e.consume(p),i++,l):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(r=e.enter("codeTextSequence"),o=0,f(p)):W(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||W(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),d)}function f(p){return p===96?(e.consume(p),o++,f):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(r.type="codeTextData",d(p))}}class $d{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const o=n||0;this.setCursor(Math.trunc(t));const r=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&Gt(this.left,i),r.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Gt(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Gt(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Gt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Gt(this.left,n.reverse())}}}function Gt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Pl(e){const t={};let n=-1,i,o,r,s,l,c,d;const f=new $d(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(i=f.get(n),n&&i[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,r=0,r<c.length&&c[r][1].type==="lineEndingBlank"&&(r+=2),r<c.length&&c[r][1].type==="content"))for(;++r<c.length&&c[r][1].type!=="content";)c[r][1].type==="chunkText"&&(c[r][1]._isInFirstContentOfListItem=!0,r++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,Jd(f,n)),n=t[n],d=!0);else if(i[1]._container){for(r=n,o=void 0;r--;)if(s=f.get(r),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(o&&(f.get(o)[1].type="lineEndingBlank"),s[1].type="lineEnding",o=r);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;o&&(i[1].end={...f.get(o)[1].start},l=f.slice(o,n),l.unshift(i),f.splice(o,n-o+1,l))}}return ze(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function Jd(e,t){const n=e.get(t)[1],i=e.get(t)[2];let o=t-1;const r=[];let s=n._tokenizer;s||(s=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,c=[],d={};let f,p,h=-1,m=n,y=0,v=0;const S=[v];for(;m;){for(;e.get(++o)[1]!==m;);r.push(o),m._tokenizer||(f=i.sliceStream(m),m.next||f.push(null),p&&s.defineSkip(m.start),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(f),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),p=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(v=h+1,S.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(s.events=[],m?(m._tokenizer=void 0,m.previous=void 0):S.pop(),h=S.length;h--;){const x=l.slice(S[h],S[h+1]),A=r.pop();c.push([A,A+x.length-1]),e.splice(A,2,x)}for(c.reverse(),h=-1;++h<c.length;)d[y+c[h][0]]=y+c[h][1],y+=c[h][1]-c[h][0]-1;return d}const Wd={resolve:Kd,tokenize:Xd},Yd={partial:!0,tokenize:Qd};function Kd(e){return Pl(e),e}function Xd(e,t){let n;return i;function i(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(l)}function o(l){return l===null?r(l):W(l)?e.check(Yd,s,r)(l):(e.consume(l),o)}function r(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function s(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function Qd(e,t,n){const i=this;return o;function o(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),se(e,r,"linePrefix")}function r(s){if(s===null||W(s))return n(s);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):e.interrupt(i.parser.constructs.flow,n,t)(s)}}function Ml(e,t,n,i,o,r,s,l,c){const d=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(x){return x===60?(e.enter(i),e.enter(o),e.enter(r),e.consume(x),e.exit(r),h):x===null||x===32||x===41||vn(x)?n(x):(e.enter(i),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(x))}function h(x){return x===62?(e.enter(r),e.consume(x),e.exit(r),e.exit(o),e.exit(i),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===62?(e.exit("chunkString"),e.exit(l),h(x)):x===null||x===60||W(x)?n(x):(e.consume(x),x===92?y:m)}function y(x){return x===60||x===62||x===92?(e.consume(x),m):m(x)}function v(x){return!f&&(x===null||x===41||de(x))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(i),t(x)):f<d&&x===40?(e.consume(x),f++,v):x===41?(e.consume(x),f--,v):x===null||x===32||x===40||vn(x)?n(x):(e.consume(x),x===92?S:v)}function S(x){return x===40||x===41||x===92?(e.consume(x),v):v(x)}}function Dl(e,t,n,i,o,r){const s=this;let l=0,c;return d;function d(m){return e.enter(i),e.enter(o),e.consume(m),e.exit(o),e.enter(r),f}function f(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(m):m===93?(e.exit(r),e.enter(o),e.consume(m),e.exit(o),e.exit(i),t):W(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),p(m))}function p(m){return m===null||m===91||m===93||W(m)||l++>999?(e.exit("chunkString"),f(m)):(e.consume(m),c||(c=!oe(m)),m===92?h:p)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,p):p(m)}}function Ll(e,t,n,i,o,r){let s;return l;function l(h){return h===34||h===39||h===40?(e.enter(i),e.enter(o),e.consume(h),e.exit(o),s=h===40?41:h,c):n(h)}function c(h){return h===s?(e.enter(o),e.consume(h),e.exit(o),e.exit(i),t):(e.enter(r),d(h))}function d(h){return h===s?(e.exit(r),c(s)):h===null?n(h):W(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),se(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===s||h===null||W(h)?(e.exit("chunkString"),d(h)):(e.consume(h),h===92?p:f)}function p(h){return h===s||h===92?(e.consume(h),f):f(h)}}function $t(e,t){let n;return i;function i(o){return W(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,i):oe(o)?se(e,i,n?"linePrefix":"lineSuffix")(o):t(o)}}const Zd={name:"definition",tokenize:ef},jd={partial:!0,tokenize:tf};function ef(e,t,n){const i=this;let o;return r;function r(m){return e.enter("definition"),s(m)}function s(m){return Dl.call(i,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return o=Ze(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return de(m)?$t(e,d)(m):d(m)}function d(m){return Ml(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt(jd,p,p)(m)}function p(m){return oe(m)?se(e,h,"whitespace")(m):h(m)}function h(m){return m===null||W(m)?(e.exit("definition"),i.parser.defined.push(o),t(m)):n(m)}}function tf(e,t,n){return i;function i(l){return de(l)?$t(e,o)(l):n(l)}function o(l){return Ll(e,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function r(l){return oe(l)?se(e,s,"whitespace")(l):s(l)}function s(l){return l===null||W(l)?t(l):n(l)}}const nf={name:"hardBreakEscape",tokenize:of};function of(e,t,n){return i;function i(r){return e.enter("hardBreakEscape"),e.consume(r),o}function o(r){return W(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}const rf={name:"headingAtx",resolve:sf,tokenize:lf};function sf(e,t){let n=e.length-2,i=3,o,r;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(o={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},r={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},ze(e,i,n-i+1,[["enter",o,t],["enter",r,t],["exit",r,t],["exit",o,t]])),e}function lf(e,t,n){let i=0;return o;function o(f){return e.enter("atxHeading"),r(f)}function r(f){return e.enter("atxHeadingSequence"),s(f)}function s(f){return f===35&&i++<6?(e.consume(f),s):f===null||de(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||W(f)?(e.exit("atxHeading"),t(f)):oe(f)?se(e,l,"whitespace")(f):(e.enter("atxHeadingText"),d(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||de(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),d)}}const af=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Xo=["pre","script","style","textarea"],uf={concrete:!0,name:"htmlFlow",resolveTo:ff,tokenize:pf},cf={partial:!0,tokenize:mf},df={partial:!0,tokenize:hf};function ff(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function pf(e,t,n){const i=this;let o,r,s,l,c;return d;function d(E){return f(E)}function f(E){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(E),p}function p(E){return E===33?(e.consume(E),h):E===47?(e.consume(E),r=!0,v):E===63?(e.consume(E),o=3,i.interrupt?t:C):De(E)?(e.consume(E),s=String.fromCharCode(E),S):n(E)}function h(E){return E===45?(e.consume(E),o=2,m):E===91?(e.consume(E),o=5,l=0,y):De(E)?(e.consume(E),o=4,i.interrupt?t:C):n(E)}function m(E){return E===45?(e.consume(E),i.interrupt?t:C):n(E)}function y(E){const ke="CDATA[";return E===ke.charCodeAt(l++)?(e.consume(E),l===ke.length?i.interrupt?t:G:y):n(E)}function v(E){return De(E)?(e.consume(E),s=String.fromCharCode(E),S):n(E)}function S(E){if(E===null||E===47||E===62||de(E)){const ke=E===47,Ie=s.toLowerCase();return!ke&&!r&&Xo.includes(Ie)?(o=1,i.interrupt?t(E):G(E)):af.includes(s.toLowerCase())?(o=6,ke?(e.consume(E),x):i.interrupt?t(E):G(E)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(E):r?A(E):k(E))}return E===45||Ae(E)?(e.consume(E),s+=String.fromCharCode(E),S):n(E)}function x(E){return E===62?(e.consume(E),i.interrupt?t:G):n(E)}function A(E){return oe(E)?(e.consume(E),A):_(E)}function k(E){return E===47?(e.consume(E),_):E===58||E===95||De(E)?(e.consume(E),R):oe(E)?(e.consume(E),k):_(E)}function R(E){return E===45||E===46||E===58||E===95||Ae(E)?(e.consume(E),R):w(E)}function w(E){return E===61?(e.consume(E),I):oe(E)?(e.consume(E),w):k(E)}function I(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),c=E,D):oe(E)?(e.consume(E),I):H(E)}function D(E){return E===c?(e.consume(E),c=null,M):E===null||W(E)?n(E):(e.consume(E),D)}function H(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||de(E)?w(E):(e.consume(E),H)}function M(E){return E===47||E===62||oe(E)?k(E):n(E)}function _(E){return E===62?(e.consume(E),U):n(E)}function U(E){return E===null||W(E)?G(E):oe(E)?(e.consume(E),U):n(E)}function G(E){return E===45&&o===2?(e.consume(E),ce):E===60&&o===1?(e.consume(E),j):E===62&&o===4?(e.consume(E),_e):E===63&&o===3?(e.consume(E),C):E===93&&o===5?(e.consume(E),xe):W(E)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(cf,ye,$)(E)):E===null||W(E)?(e.exit("htmlFlowData"),$(E)):(e.consume(E),G)}function $(E){return e.check(df,K,ye)(E)}function K(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),Y}function Y(E){return E===null||W(E)?$(E):(e.enter("htmlFlowData"),G(E))}function ce(E){return E===45?(e.consume(E),C):G(E)}function j(E){return E===47?(e.consume(E),s="",le):G(E)}function le(E){if(E===62){const ke=s.toLowerCase();return Xo.includes(ke)?(e.consume(E),_e):G(E)}return De(E)&&s.length<8?(e.consume(E),s+=String.fromCharCode(E),le):G(E)}function xe(E){return E===93?(e.consume(E),C):G(E)}function C(E){return E===62?(e.consume(E),_e):E===45&&o===2?(e.consume(E),C):G(E)}function _e(E){return E===null||W(E)?(e.exit("htmlFlowData"),ye(E)):(e.consume(E),_e)}function ye(E){return e.exit("htmlFlow"),t(E)}}function hf(e,t,n){const i=this;return o;function o(s){return W(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r):n(s)}function r(s){return i.parser.lazy[i.now().line]?n(s):t(s)}}function mf(e,t,n){return i;function i(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(Qt,t,n)}}const gf={name:"htmlText",tokenize:yf};function yf(e,t,n){const i=this;let o,r,s;return l;function l(C){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(C),c}function c(C){return C===33?(e.consume(C),d):C===47?(e.consume(C),w):C===63?(e.consume(C),k):De(C)?(e.consume(C),H):n(C)}function d(C){return C===45?(e.consume(C),f):C===91?(e.consume(C),r=0,y):De(C)?(e.consume(C),A):n(C)}function f(C){return C===45?(e.consume(C),m):n(C)}function p(C){return C===null?n(C):C===45?(e.consume(C),h):W(C)?(s=p,j(C)):(e.consume(C),p)}function h(C){return C===45?(e.consume(C),m):p(C)}function m(C){return C===62?ce(C):C===45?h(C):p(C)}function y(C){const _e="CDATA[";return C===_e.charCodeAt(r++)?(e.consume(C),r===_e.length?v:y):n(C)}function v(C){return C===null?n(C):C===93?(e.consume(C),S):W(C)?(s=v,j(C)):(e.consume(C),v)}function S(C){return C===93?(e.consume(C),x):v(C)}function x(C){return C===62?ce(C):C===93?(e.consume(C),x):v(C)}function A(C){return C===null||C===62?ce(C):W(C)?(s=A,j(C)):(e.consume(C),A)}function k(C){return C===null?n(C):C===63?(e.consume(C),R):W(C)?(s=k,j(C)):(e.consume(C),k)}function R(C){return C===62?ce(C):k(C)}function w(C){return De(C)?(e.consume(C),I):n(C)}function I(C){return C===45||Ae(C)?(e.consume(C),I):D(C)}function D(C){return W(C)?(s=D,j(C)):oe(C)?(e.consume(C),D):ce(C)}function H(C){return C===45||Ae(C)?(e.consume(C),H):C===47||C===62||de(C)?M(C):n(C)}function M(C){return C===47?(e.consume(C),ce):C===58||C===95||De(C)?(e.consume(C),_):W(C)?(s=M,j(C)):oe(C)?(e.consume(C),M):ce(C)}function _(C){return C===45||C===46||C===58||C===95||Ae(C)?(e.consume(C),_):U(C)}function U(C){return C===61?(e.consume(C),G):W(C)?(s=U,j(C)):oe(C)?(e.consume(C),U):M(C)}function G(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),o=C,$):W(C)?(s=G,j(C)):oe(C)?(e.consume(C),G):(e.consume(C),K)}function $(C){return C===o?(e.consume(C),o=void 0,Y):C===null?n(C):W(C)?(s=$,j(C)):(e.consume(C),$)}function K(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||de(C)?M(C):(e.consume(C),K)}function Y(C){return C===47||C===62||de(C)?M(C):n(C)}function ce(C){return C===62?(e.consume(C),e.exit("htmlTextData"),e.exit("htmlText"),t):n(C)}function j(C){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),le}function le(C){return oe(C)?se(e,xe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):xe(C)}function xe(C){return e.enter("htmlTextData"),s(C)}}const Wi={name:"labelEnd",resolveAll:Cf,resolveTo:Ef,tokenize:Tf},xf={tokenize:wf},vf={tokenize:_f},Sf={tokenize:kf};function Cf(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",t+=o}}return e.length!==n.length&&ze(e,0,e.length,n),e}function Ef(e,t){let n=e.length,i=0,o,r,s,l;for(;n--;)if(o=e[n][1],r){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(r=n,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(s=n);const c={type:e[r][1].type==="labelLink"?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[r][1].start},end:{...e[s][1].end}},f={type:"labelText",start:{...e[r+i+2][1].end},end:{...e[s-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=Je(l,e.slice(r+1,r+i+3)),l=Je(l,[["enter",f,t]]),l=Je(l,Pn(t.parser.constructs.insideSpan.null,e.slice(r+i+4,s-3),t)),l=Je(l,[["exit",f,t],e[s-2],e[s-1],["exit",d,t]]),l=Je(l,e.slice(s+1)),l=Je(l,[["exit",c,t]]),ze(e,r,e.length,l),e}function Tf(e,t,n){const i=this;let o=i.events.length,r,s;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){r=i.events[o][1];break}return l;function l(h){return r?r._inactive?p(h):(s=i.parser.defined.includes(Ze(i.sliceSerialize({start:r.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(xf,f,s?f:p)(h):h===91?e.attempt(vf,f,s?d:p)(h):s?f(h):p(h)}function d(h){return e.attempt(Sf,f,p)(h)}function f(h){return t(h)}function p(h){return r._balanced=!0,n(h)}}function wf(e,t,n){return i;function i(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),o}function o(p){return de(p)?$t(e,r)(p):r(p)}function r(p){return p===41?f(p):Ml(e,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function s(p){return de(p)?$t(e,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?Ll(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return de(p)?$t(e,f)(p):f(p)}function f(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function _f(e,t,n){const i=this;return o;function o(l){return Dl.call(i,e,r,s,"reference","referenceMarker","referenceString")(l)}function r(l){return i.parser.defined.includes(Ze(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function s(l){return n(l)}}function kf(e,t,n){return i;function i(r){return e.enter("reference"),e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),o}function o(r){return r===93?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}const If={name:"labelStartImage",resolveAll:Wi.resolveAll,tokenize:Af};function Af(e,t,n){const i=this;return o;function o(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),r}function r(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),s):n(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):t(l)}}const bf={name:"labelStartLink",resolveAll:Wi.resolveAll,tokenize:Nf};function Nf(e,t,n){const i=this;return o;function o(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),r}function r(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(s):t(s)}}const $n={name:"lineEnding",tokenize:Rf};function Rf(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),se(e,t,"linePrefix")}}const fn={name:"thematicBreak",tokenize:Pf};function Pf(e,t,n){let i=0,o;return r;function r(d){return e.enter("thematicBreak"),s(d)}function s(d){return o=d,l(d)}function l(d){return d===o?(e.enter("thematicBreakSequence"),c(d)):i>=3&&(d===null||W(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===o?(e.consume(d),i++,c):(e.exit("thematicBreakSequence"),oe(d)?se(e,l,"whitespace")(d):l(d))}}const Fe={continuation:{tokenize:Uf},exit:Bf,name:"list",tokenize:Lf},Mf={partial:!0,tokenize:Gf},Df={partial:!0,tokenize:Ff};function Lf(e,t,n){const i=this,o=i.events[i.events.length-1];let r=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,s=0;return l;function l(m){const y=i.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!i.containerState.marker||m===i.containerState.marker:gi(m)){if(i.containerState.type||(i.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(fn,n,d)(m):d(m);if(!i.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return gi(m)&&++s<10?(e.consume(m),c):(!i.interrupt||s<2)&&(i.containerState.marker?m===i.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),d(m)):n(m)}function d(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||m,e.check(Qt,i.interrupt?n:f,e.attempt(Mf,h,p))}function f(m){return i.containerState.initialBlankLine=!0,r++,h(m)}function p(m){return oe(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return i.containerState.size=r+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function Uf(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(Qt,o,r);function o(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,se(e,t,"listItemIndent",i.containerState.size+1)(l)}function r(l){return i.containerState.furtherBlankLines||!oe(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(Df,t,s)(l))}function s(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,se(e,e.attempt(Fe,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Ff(e,t,n){const i=this;return se(e,o,"listItemIndent",i.containerState.size+1);function o(r){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?t(r):n(r)}}function Bf(e){e.exit(this.containerState.type)}function Gf(e,t,n){const i=this;return se(e,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(r){const s=i.events[i.events.length-1];return!oe(r)&&s&&s[1].type==="listItemPrefixWhitespace"?t(r):n(r)}}const Qo={name:"setextUnderline",resolveTo:Vf,tokenize:Hf};function Vf(e,t){let n=e.length,i,o,r;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!r&&e[n][1].type==="definition"&&(r=n);const s={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",r?(e.splice(o,0,["enter",s,t]),e.splice(r+1,0,["exit",e[i][1],t]),e[i][1].end={...e[r][1].end}):e[i][1]=s,e.push(["exit",s,t]),e}function Hf(e,t,n){const i=this;let o;return r;function r(d){let f=i.events.length,p;for(;f--;)if(i.events[f][1].type!=="lineEnding"&&i.events[f][1].type!=="linePrefix"&&i.events[f][1].type!=="content"){p=i.events[f][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(e.enter("setextHeadingLine"),o=d,s(d)):n(d)}function s(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===o?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),oe(d)?se(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||W(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const Of={tokenize:qf};function qf(e){const t=this,n=e.attempt(Qt,i,e.attempt(this.parser.constructs.flowInitial,o,se(e,e.attempt(this.parser.constructs.flow,o,e.attempt(Wd,o)),"linePrefix")));return n;function i(r){if(r===null){e.consume(r);return}return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(r){if(r===null){e.consume(r);return}return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const zf={resolveAll:Fl()},$f=Ul("string"),Jf=Ul("text");function Ul(e){return{resolveAll:Fl(e==="text"?Wf:void 0),tokenize:t};function t(n){const i=this,o=this.parser.constructs[e],r=n.attempt(o,s,l);return s;function s(f){return d(f)?r(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return d(f)?(n.exit("data"),r(f)):(n.consume(f),c)}function d(f){if(f===null)return!0;const p=o[f];let h=-1;if(p)for(;++h<p.length;){const m=p[h];if(!m.previous||m.previous.call(i,i.previous))return!0}return!1}}}function Fl(e){return t;function t(n,i){let o=-1,r;for(;++o<=n.length;)r===void 0?n[o]&&n[o][1].type==="data"&&(r=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==r+2&&(n[r][1].end=n[o-1][1].end,n.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(n,i):n}}function Wf(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],o=t.sliceStream(i);let r=o.length,s=-1,l=0,c;for(;r--;){const d=o[r];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(d===-2)c=!0,l++;else if(d!==-1){r++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:r?s:i.start._bufferIndex+s,_index:i.start._index+r,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const Yf={42:Fe,43:Fe,45:Fe,48:Fe,49:Fe,50:Fe,51:Fe,52:Fe,53:Fe,54:Fe,55:Fe,56:Fe,57:Fe,62:bl},Kf={91:Zd},Xf={[-2]:zn,[-1]:zn,32:zn},Qf={35:rf,42:fn,45:[Qo,fn],60:uf,61:Qo,95:fn,96:Ko,126:Ko},Zf={38:Rl,92:Nl},jf={[-5]:$n,[-4]:$n,[-3]:$n,33:If,38:Rl,42:yi,60:[Ad,gf],91:bf,92:[nf,Nl],93:Wi,95:yi,96:Hd},ep={null:[yi,zf]},tp={null:[42,95]},np={null:[]},ip=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:tp,contentInitial:Kf,disable:np,document:Yf,flow:Qf,flowInitial:Xf,insideSpan:ep,string:Zf,text:jf},Symbol.toStringTag,{value:"Module"}));function op(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},r=[];let s=[],l=[];const c={attempt:D(w),check:D(I),consume:A,enter:k,exit:R,interrupt:D(I,{interrupt:!0})},d={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:p};let f=t.tokenize.call(d,c);return t.resolveAll&&r.push(t),d;function p(U){return s=Je(s,U),S(),s[s.length-1]!==null?[]:(H(t,0),d.events=Pn(r,d.events,d),d.events)}function h(U,G){return sp(m(U),G)}function m(U){return rp(s,U)}function y(){const{_bufferIndex:U,_index:G,line:$,column:K,offset:Y}=i;return{_bufferIndex:U,_index:G,line:$,column:K,offset:Y}}function v(U){o[U.line]=U.column,_()}function S(){let U;for(;i._index<s.length;){const G=s[i._index];if(typeof G=="string")for(U=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===U&&i._bufferIndex<G.length;)x(G.charCodeAt(i._bufferIndex));else x(G)}}function x(U){f=f(U)}function A(U){W(U)?(i.line++,i.column=1,i.offset+=U===-3?2:1,_()):U!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=U}function k(U,G){const $=G||{};return $.type=U,$.start=y(),d.events.push(["enter",$,d]),l.push($),$}function R(U){const G=l.pop();return G.end=y(),d.events.push(["exit",G,d]),G}function w(U,G){H(U,G.from)}function I(U,G){G.restore()}function D(U,G){return $;function $(K,Y,ce){let j,le,xe,C;return Array.isArray(K)?ye(K):"tokenize"in K?ye([K]):_e(K);function _e(fe){return Ve;function Ve(Se){const Re=Se!==null&&fe[Se],He=Se!==null&&fe.null,L=[...Array.isArray(Re)?Re:Re?[Re]:[],...Array.isArray(He)?He:He?[He]:[]];return ye(L)(Se)}}function ye(fe){return j=fe,le=0,fe.length===0?ce:E(fe[le])}function E(fe){return Ve;function Ve(Se){return C=M(),xe=fe,fe.partial||(d.currentConstruct=fe),fe.name&&d.parser.constructs.disable.null.includes(fe.name)?Ie():fe.tokenize.call(G?Object.assign(Object.create(d),G):d,c,ke,Ie)(Se)}}function ke(fe){return U(xe,C),Y}function Ie(fe){return C.restore(),++le<j.length?E(j[le]):ce}}}function H(U,G){U.resolveAll&&!r.includes(U)&&r.push(U),U.resolve&&ze(d.events,G,d.events.length-G,U.resolve(d.events.slice(G),d)),U.resolveTo&&(d.events=U.resolveTo(d.events,d))}function M(){const U=y(),G=d.previous,$=d.currentConstruct,K=d.events.length,Y=Array.from(l);return{from:K,restore:ce};function ce(){i=U,d.previous=G,d.currentConstruct=$,d.events.length=K,l=Y,_()}}function _(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function rp(e,t){const n=t.start._index,i=t.start._bufferIndex,o=t.end._index,r=t.end._bufferIndex;let s;if(n===o)s=[e[n].slice(i,r)];else{if(s=e.slice(n,o),i>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(i):s.shift()}r>0&&s.push(e[o].slice(0,r))}return s}function sp(e,t){let n=-1;const i=[];let o;for(;++n<e.length;){const r=e[n];let s;if(typeof r=="string")s=r;else switch(r){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&o)continue;s=" ";break}default:s=String.fromCharCode(r)}o=r===-2,i.push(s)}return i.join("")}function lp(e){const i={constructs:Il([ip,...(e||{}).extensions||[]]),content:o(Cd),defined:[],document:o(Td),flow:o(Of),lazy:{},string:o($f),text:o(Jf)};return i;function o(r){return s;function s(l){return op(i,r,l)}}}function ap(e){for(;!Pl(e););return e}const Zo=/[\0\t\n\r]/g;function up(){let e=1,t="",n=!0,i;return o;function o(r,s,l){const c=[];let d,f,p,h,m;for(r=t+(typeof r=="string"?r.toString():new TextDecoder(s||void 0).decode(r)),p=0,t="",n&&(r.charCodeAt(0)===65279&&p++,n=void 0);p<r.length;){if(Zo.lastIndex=p,d=Zo.exec(r),h=d&&d.index!==void 0?d.index:r.length,m=r.charCodeAt(h),!d){t=r.slice(p);break}if(m===10&&p===h&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),p<h&&(c.push(r.slice(p,h)),e+=h-p),m){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:i=!0,e=1}p=h+1}return l&&(i&&c.push(-5),t&&c.push(t),c.push(null)),c}}const cp=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dp(e){return e.replace(cp,fp)}function fp(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),r=o===120||o===88;return Al(n.slice(r?2:1),r?16:10)}return Ji(n)||e}const Bl={}.hasOwnProperty;function pp(e,t,n){return typeof t!="string"&&(n=t,t=void 0),hp(n)(ap(lp(n).document().write(up()(e,t,!0))))}function hp(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(Q),autolinkProtocol:M,autolinkEmail:M,atxHeading:r(T),blockQuote:r(He),characterEscape:M,characterReference:M,codeFenced:r(L),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:r(L,s),codeText:r(me,s),codeTextData:M,data:M,codeFlowValue:M,definition:r(Oe),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:r(Pe),hardBreakEscape:r(B),hardBreakTrailing:r(B),htmlFlow:r(z,s),htmlFlowData:M,htmlText:r(z,s),htmlTextData:M,image:r(X),label:s,link:r(Q),listItem:r(he),listItemValue:h,listOrdered:r(ee,p),listUnordered:r(ee),paragraph:r(ge),reference:E,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:r(T),strong:r(re),thematicBreak:r(ue)},exit:{atxHeading:c(),atxHeadingSequence:w,autolink:c(),autolinkEmail:Re,autolinkProtocol:Se,blockQuote:c(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:Ie,characterReferenceMarkerNumeric:Ie,characterReferenceValue:fe,characterReference:Ve,codeFenced:c(S),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:_,codeIndented:c(x),codeText:c(Y),codeTextData:_,data:_,definition:c(),definitionDestinationString:R,definitionLabelString:A,definitionTitleString:k,emphasis:c(),hardBreakEscape:c(G),hardBreakTrailing:c(G),htmlFlow:c($),htmlFlowData:_,htmlText:c(K),htmlTextData:_,image:c(j),label:xe,labelText:le,lineEnding:U,link:c(ce),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ke,resourceDestinationString:C,resourceTitleString:_e,resource:ye,setextHeading:c(H),setextHeadingLineSequence:D,setextHeadingText:I,strong:c(),thematicBreak:c()}};Gl(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(b){let N={type:"root",children:[]};const O={stack:[N],tokenStack:[],config:t,enter:l,exit:d,buffer:s,resume:f,data:n},J=[];let ne=-1;for(;++ne<b.length;)if(b[ne][1].type==="listOrdered"||b[ne][1].type==="listUnordered")if(b[ne][0]==="enter")J.push(ne);else{const Ee=J.pop();ne=o(b,Ee,ne)}for(ne=-1;++ne<b.length;){const Ee=t[b[ne][0]];Bl.call(Ee,b[ne][1].type)&&Ee[b[ne][1].type].call(Object.assign({sliceSerialize:b[ne][2].sliceSerialize},O),b[ne][1])}if(O.tokenStack.length>0){const Ee=O.tokenStack[O.tokenStack.length-1];(Ee[1]||jo).call(O,void 0,Ee[0])}for(N.position={start:ut(b.length>0?b[0][1].start:{line:1,column:1,offset:0}),end:ut(b.length>0?b[b.length-2][1].end:{line:1,column:1,offset:0})},ne=-1;++ne<t.transforms.length;)N=t.transforms[ne](N)||N;return N}function o(b,N,O){let J=N-1,ne=-1,Ee=!1,Ke,Ue,$e,Xe;for(;++J<=O;){const Te=b[J];switch(Te[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Te[0]==="enter"?ne++:ne--,Xe=void 0;break}case"lineEndingBlank":{Te[0]==="enter"&&(Ke&&!Xe&&!ne&&!$e&&($e=J),Xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xe=void 0}if(!ne&&Te[0]==="enter"&&Te[1].type==="listItemPrefix"||ne===-1&&Te[0]==="exit"&&(Te[1].type==="listUnordered"||Te[1].type==="listOrdered")){if(Ke){let at=J;for(Ue=void 0;at--;){const Qe=b[at];if(Qe[1].type==="lineEnding"||Qe[1].type==="lineEndingBlank"){if(Qe[0]==="exit")continue;Ue&&(b[Ue][1].type="lineEndingBlank",Ee=!0),Qe[1].type="lineEnding",Ue=at}else if(!(Qe[1].type==="linePrefix"||Qe[1].type==="blockQuotePrefix"||Qe[1].type==="blockQuotePrefixWhitespace"||Qe[1].type==="blockQuoteMarker"||Qe[1].type==="listItemIndent"))break}$e&&(!Ue||$e<Ue)&&(Ke._spread=!0),Ke.end=Object.assign({},Ue?b[Ue][1].start:Te[1].end),b.splice(Ue||J,0,["exit",Ke,Te[2]]),J++,O++}if(Te[1].type==="listItemPrefix"){const at={type:"listItem",_spread:!1,start:Object.assign({},Te[1].start),end:void 0};Ke=at,b.splice(J,0,["enter",at,Te[2]]),J++,O++,$e=void 0,Xe=!0}}}return b[N][1]._spread=Ee,O}function r(b,N){return O;function O(J){l.call(this,b(J),J),N&&N.call(this,J)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(b,N,O){this.stack[this.stack.length-1].children.push(b),this.stack.push(b),this.tokenStack.push([N,O||void 0]),b.position={start:ut(N.start),end:void 0}}function c(b){return N;function N(O){b&&b.call(this,O),d.call(this,O)}}function d(b,N){const O=this.stack.pop(),J=this.tokenStack.pop();if(J)J[0].type!==b.type&&(N?N.call(this,b,J[0]):(J[1]||jo).call(this,b,J[0]));else throw new Error("Cannot close `"+b.type+"` ("+zt({start:b.start,end:b.end})+"): its not open");O.position.end=ut(b.end)}function f(){return $i(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function h(b){if(this.data.expectingFirstListItemValue){const N=this.stack[this.stack.length-2];N.start=Number.parseInt(this.sliceSerialize(b),10),this.data.expectingFirstListItemValue=void 0}}function m(){const b=this.resume(),N=this.stack[this.stack.length-1];N.lang=b}function y(){const b=this.resume(),N=this.stack[this.stack.length-1];N.meta=b}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const b=this.resume(),N=this.stack[this.stack.length-1];N.value=b.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const b=this.resume(),N=this.stack[this.stack.length-1];N.value=b.replace(/(\r?\n|\r)$/g,"")}function A(b){const N=this.resume(),O=this.stack[this.stack.length-1];O.label=N,O.identifier=Ze(this.sliceSerialize(b)).toLowerCase()}function k(){const b=this.resume(),N=this.stack[this.stack.length-1];N.title=b}function R(){const b=this.resume(),N=this.stack[this.stack.length-1];N.url=b}function w(b){const N=this.stack[this.stack.length-1];if(!N.depth){const O=this.sliceSerialize(b).length;N.depth=O}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function D(b){const N=this.stack[this.stack.length-1];N.depth=this.sliceSerialize(b).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function M(b){const O=this.stack[this.stack.length-1].children;let J=O[O.length-1];(!J||J.type!=="text")&&(J=Ce(),J.position={start:ut(b.start),end:void 0},O.push(J)),this.stack.push(J)}function _(b){const N=this.stack.pop();N.value+=this.sliceSerialize(b),N.position.end=ut(b.end)}function U(b){const N=this.stack[this.stack.length-1];if(this.data.atHardBreak){const O=N.children[N.children.length-1];O.position.end=ut(b.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(N.type)&&(M.call(this,b),_.call(this,b))}function G(){this.data.atHardBreak=!0}function $(){const b=this.resume(),N=this.stack[this.stack.length-1];N.value=b}function K(){const b=this.resume(),N=this.stack[this.stack.length-1];N.value=b}function Y(){const b=this.resume(),N=this.stack[this.stack.length-1];N.value=b}function ce(){const b=this.stack[this.stack.length-1];if(this.data.inReference){const N=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=N,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function j(){const b=this.stack[this.stack.length-1];if(this.data.inReference){const N=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=N,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function le(b){const N=this.sliceSerialize(b),O=this.stack[this.stack.length-2];O.label=dp(N),O.identifier=Ze(N).toLowerCase()}function xe(){const b=this.stack[this.stack.length-1],N=this.resume(),O=this.stack[this.stack.length-1];if(this.data.inReference=!0,O.type==="link"){const J=b.children;O.children=J}else O.alt=N}function C(){const b=this.resume(),N=this.stack[this.stack.length-1];N.url=b}function _e(){const b=this.resume(),N=this.stack[this.stack.length-1];N.title=b}function ye(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function ke(b){const N=this.resume(),O=this.stack[this.stack.length-1];O.label=N,O.identifier=Ze(this.sliceSerialize(b)).toLowerCase(),this.data.referenceType="full"}function Ie(b){this.data.characterReferenceType=b.type}function fe(b){const N=this.sliceSerialize(b),O=this.data.characterReferenceType;let J;O?(J=Al(N,O==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):J=Ji(N);const ne=this.stack[this.stack.length-1];ne.value+=J}function Ve(b){const N=this.stack.pop();N.position.end=ut(b.end)}function Se(b){_.call(this,b);const N=this.stack[this.stack.length-1];N.url=this.sliceSerialize(b)}function Re(b){_.call(this,b);const N=this.stack[this.stack.length-1];N.url="mailto:"+this.sliceSerialize(b)}function He(){return{type:"blockquote",children:[]}}function L(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function Oe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pe(){return{type:"emphasis",children:[]}}function T(){return{type:"heading",depth:0,children:[]}}function B(){return{type:"break"}}function z(){return{type:"html",value:""}}function X(){return{type:"image",title:null,url:"",alt:null}}function Q(){return{type:"link",title:null,url:"",children:[]}}function ee(b){return{type:"list",ordered:b.type==="listOrdered",start:null,spread:b._spread,children:[]}}function he(b){return{type:"listItem",spread:b._spread,checked:null,children:[]}}function ge(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function Ce(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}function ut(e){return{line:e.line,column:e.column,offset:e.offset}}function Gl(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?Gl(e,i):mp(e,i)}}function mp(e,t){let n;for(n in t)if(Bl.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function jo(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+zt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+zt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+zt({start:t.start,end:t.end})+") is still open")}function gp(e){const t=this;t.parser=n;function n(i){return pp(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function yp(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function xp(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function vp(e,t){const n=t.value?t.value+`
`:"",i={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(i.className=["language-"+o[0]]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r}function Sp(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Cp(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ep(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),o=Mt(i.toLowerCase()),r=e.footnoteOrder.indexOf(i);let s,l=e.footnoteCounts.get(i);l===void 0?(l=0,e.footnoteOrder.push(i),s=e.footnoteOrder.length):s=r+1,l+=1,e.footnoteCounts.set(i,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function Tp(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wp(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Vl(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const o=e.all(t),r=o[0];r&&r.type==="text"?r.value="["+r.value:o.unshift({type:"text",value:"["});const s=o[o.length-1];return s&&s.type==="text"?s.value+=i:o.push({type:"text",value:i}),o}function _p(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Vl(e,t);const o={src:Mt(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const r={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,r),e.applyData(t,r)}function kp(e,t){const n={src:Mt(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function Ip(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function Ap(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Vl(e,t);const o={href:Mt(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const r={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function bp(e,t){const n={href:Mt(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Np(e,t,n){const i=e.all(t),o=n?Rp(n):Hl(t),r={},s=[];if(typeof t.checked=="boolean"){const f=i[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const f=i[l];(o||l!==0||f.type!=="element"||f.tagName!=="p")&&s.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!o?s.push(...f.children):s.push(f)}const c=i[i.length-1];c&&(o||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:r,children:s};return e.patch(t,d),e.applyData(t,d)}function Rp(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=Hl(n[i])}return t}function Hl(e){const t=e.spread;return t??e.children.length>1}function Pp(e,t){const n={},i=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<i.length;){const s=i[o];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,r),e.applyData(t,r)}function Mp(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dp(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Lp(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Up(e,t){const n=e.all(t),i=n.shift(),o=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],s),o.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Hi(t.children[1]),c=Sl(t.children[t.children.length-1]);l&&c&&(s.position={start:l,end:c}),o.push(s)}const r={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,r),e.applyData(t,r)}function Fp(e,t,n){const i=n?n.children:void 0,r=(i?i.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,l=s?s.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const p=t.children[c],h={},m=s?s[c]:void 0;m&&(h.align=m);let y={type:"element",tagName:r,properties:h,children:[]};p&&(y.children=e.all(p),e.patch(p,y),y=e.applyData(p,y)),d.push(y)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,f),e.applyData(t,f)}function Bp(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const er=9,tr=32;function Gp(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),o=0;const r=[];for(;i;)r.push(nr(t.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=n.exec(t);return r.push(nr(t.slice(o),o>0,!1)),r.join("")}function nr(e,t,n){let i=0,o=e.length;if(t){let r=e.codePointAt(i);for(;r===er||r===tr;)i++,r=e.codePointAt(i)}if(n){let r=e.codePointAt(o-1);for(;r===er||r===tr;)o--,r=e.codePointAt(o-1)}return o>i?e.slice(i,o):""}function Vp(e,t){const n={type:"text",value:Gp(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Hp(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Op={blockquote:yp,break:xp,code:vp,delete:Sp,emphasis:Cp,footnoteReference:Ep,heading:Tp,html:wp,imageReference:_p,image:kp,inlineCode:Ip,linkReference:Ap,link:bp,listItem:Np,list:Pp,paragraph:Mp,root:Dp,strong:Lp,table:Up,tableCell:Bp,tableRow:Fp,text:Vp,thematicBreak:Hp,toml:tn,yaml:tn,definition:tn,footnoteDefinition:tn};function tn(){}const Ol=-1,Mn=0,Jt=1,Sn=2,Yi=3,Ki=4,Xi=5,Qi=6,ql=7,zl=8,ir=typeof self=="object"?self:globalThis,qp=(e,t)=>{const n=(o,r)=>(e.set(r,o),o),i=o=>{if(e.has(o))return e.get(o);const[r,s]=t[o];switch(r){case Mn:case Ol:return n(s,o);case Jt:{const l=n([],o);for(const c of s)l.push(i(c));return l}case Sn:{const l=n({},o);for(const[c,d]of s)l[i(c)]=i(d);return l}case Yi:return n(new Date(s),o);case Ki:{const{source:l,flags:c}=s;return n(new RegExp(l,c),o)}case Xi:{const l=n(new Map,o);for(const[c,d]of s)l.set(i(c),i(d));return l}case Qi:{const l=n(new Set,o);for(const c of s)l.add(i(c));return l}case ql:{const{name:l,message:c}=s;return n(new ir[l](c),o)}case zl:return n(BigInt(s),o);case"BigInt":return n(Object(BigInt(s)),o);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return n(new DataView(l),s)}}return n(new ir[r](s),o)};return i},or=e=>qp(new Map,e)(0),Tt="",{toString:zp}={},{keys:$p}=Object,Vt=e=>{const t=typeof e;if(t!=="object"||!e)return[Mn,t];const n=zp.call(e).slice(8,-1);switch(n){case"Array":return[Jt,Tt];case"Object":return[Sn,Tt];case"Date":return[Yi,Tt];case"RegExp":return[Ki,Tt];case"Map":return[Xi,Tt];case"Set":return[Qi,Tt];case"DataView":return[Jt,n]}return n.includes("Array")?[Jt,n]:n.includes("Error")?[ql,n]:[Sn,n]},nn=([e,t])=>e===Mn&&(t==="function"||t==="symbol"),Jp=(e,t,n,i)=>{const o=(s,l)=>{const c=i.push(s)-1;return n.set(l,c),c},r=s=>{if(n.has(s))return n.get(s);let[l,c]=Vt(s);switch(l){case Mn:{let f=s;switch(c){case"bigint":l=zl,f=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return o([Ol],s)}return o([l,f],s)}case Jt:{if(c){let h=s;return c==="DataView"?h=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(s)),o([c,[...h]],s)}const f=[],p=o([l,f],s);for(const h of s)f.push(r(h));return p}case Sn:{if(c)switch(c){case"BigInt":return o([c,s.toString()],s);case"Boolean":case"Number":case"String":return o([c,s.valueOf()],s)}if(t&&"toJSON"in s)return r(s.toJSON());const f=[],p=o([l,f],s);for(const h of $p(s))(e||!nn(Vt(s[h])))&&f.push([r(h),r(s[h])]);return p}case Yi:return o([l,s.toISOString()],s);case Ki:{const{source:f,flags:p}=s;return o([l,{source:f,flags:p}],s)}case Xi:{const f=[],p=o([l,f],s);for(const[h,m]of s)(e||!(nn(Vt(h))||nn(Vt(m))))&&f.push([r(h),r(m)]);return p}case Qi:{const f=[],p=o([l,f],s);for(const h of s)(e||!nn(Vt(h)))&&f.push(r(h));return p}}const{message:d}=s;return o([l,{name:c,message:d}],s)};return r},rr=(e,{json:t,lossy:n}={})=>{const i=[];return Jp(!(t||n),!!t,new Map,i)(e),i},Cn=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?or(rr(e,t)):structuredClone(e):(e,t)=>or(rr(e,t));function Wp(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Yp(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Kp(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Wp,i=e.options.footnoteBackLabel||Yp,o=e.options.footnoteLabel||"Footnotes",r=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const f=e.all(d),p=String(d.identifier).toUpperCase(),h=Mt(p.toLowerCase());let m=0;const y=[],v=e.footnoteCounts.get(p);for(;v!==void 0&&++m<=v;){y.length>0&&y.push({type:"text",value:" "});let A=typeof n=="string"?n:n(c,m);typeof A=="string"&&(A={type:"text",value:A}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,m),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const A=S.children[S.children.length-1];A&&A.type==="text"?A.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...y)}else f.push(...y);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(f,!0)};e.patch(d,x),l.push(x)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...Cn(s),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Dn=function(e){if(e==null)return jp;if(typeof e=="function")return Ln(e);if(typeof e=="object")return Array.isArray(e)?Xp(e):Qp(e);if(typeof e=="string")return Zp(e);throw new Error("Expected function, string, or object as test")};function Xp(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Dn(e[n]);return Ln(i);function i(...o){let r=-1;for(;++r<t.length;)if(t[r].apply(this,o))return!0;return!1}}function Qp(e){const t=e;return Ln(n);function n(i){const o=i;let r;for(r in e)if(o[r]!==t[r])return!1;return!0}}function Zp(e){return Ln(t);function t(n){return n&&n.type===e}}function Ln(e){return t;function t(n,i,o){return!!(eh(n)&&e.call(this,n,typeof i=="number"?i:void 0,o||void 0))}}function jp(){return!0}function eh(e){return e!==null&&typeof e=="object"&&"type"in e}const $l=[],th=!0,xi=!1,nh="skip";function Jl(e,t,n,i){let o;typeof t=="function"&&typeof n!="function"?(i=n,n=t):o=t;const r=Dn(o),s=i?-1:1;l(e,void 0,[])();function l(c,d,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const m=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=$l,y,v,S;if((!t||r(c,d,f[f.length-1]||void 0))&&(m=ih(n(c,f)),m[0]===xi))return m;if("children"in c&&c.children){const x=c;if(x.children&&m[0]!==nh)for(v=(i?x.children.length:-1)+s,S=f.concat(x);v>-1&&v<x.children.length;){const A=x.children[v];if(y=l(A,v,S)(),y[0]===xi)return y;v=typeof y[1]=="number"?y[1]:v+s}}return m}}}function ih(e){return Array.isArray(e)?e:typeof e=="number"?[th,e]:e==null?$l:[e]}function Zi(e,t,n,i){let o,r,s;typeof t=="function"?(r=void 0,s=t,o=n):(r=t,s=n,o=i),Jl(e,r,l,o);function l(c,d){const f=d[d.length-1],p=f?f.children.indexOf(c):void 0;return s(c,p,f)}}const vi={}.hasOwnProperty,oh={};function rh(e,t){const n=t||oh,i=new Map,o=new Map,r=new Map,s={...Op,...n.handlers},l={all:d,applyData:lh,definitionById:i,footnoteById:o,footnoteCounts:r,footnoteOrder:[],handlers:s,one:c,options:n,patch:sh,wrap:uh};return Zi(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?i:o,h=String(f.identifier).toUpperCase();p.has(h)||p.set(h,f)}}),l;function c(f,p){const h=f.type,m=l.handlers[h];if(vi.call(l.handlers,h)&&m)return m(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in f){const{children:v,...S}=f,x=Cn(S);return x.children=l.all(f),x}return Cn(f)}return(l.options.unknownHandler||ah)(l,f,p)}function d(f){const p=[];if("children"in f){const h=f.children;let m=-1;for(;++m<h.length;){const y=l.one(h[m],f);if(y){if(m&&h[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=sr(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=sr(v.value))}Array.isArray(y)?p.push(...y):p.push(y)}}}return p}}function sh(e,t){e.position&&(t.position=Wc(e))}function lh(e,t){let n=t;if(e&&e.data){const i=e.data.hName,o=e.data.hChildren,r=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const s="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:s}}n.type==="element"&&r&&Object.assign(n.properties,Cn(r)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function ah(e,t){const n=t.data||{},i="value"in t&&!(vi.call(n,"hProperties")||vi.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function uh(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function sr(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function lr(e,t){const n=rh(e,t),i=n.one(e,void 0),o=Kp(n),r=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&r.children.push({type:"text",value:`
`},o),r}function ch(e,t){return e&&"run"in e?async function(n,i){const o=lr(n,{file:i,...t});await e.run(o,i)}:function(n,i){return lr(n,{file:i,...e||t})}}function ar(e){if(e)throw e}var pn=Object.prototype.hasOwnProperty,Wl=Object.prototype.toString,ur=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,dr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Wl.call(t)==="[object Array]"},fr=function(t){if(!t||Wl.call(t)!=="[object Object]")return!1;var n=pn.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&pn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;var o;for(o in t);return typeof o>"u"||pn.call(t,o)},pr=function(t,n){ur&&n.name==="__proto__"?ur(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},hr=function(t,n){if(n==="__proto__")if(pn.call(t,n)){if(cr)return cr(t,n).value}else return;return t[n]},dh=function e(){var t,n,i,o,r,s,l=arguments[0],c=1,d=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)i=hr(l,n),o=hr(t,n),l!==o&&(f&&o&&(fr(o)||(r=dr(o)))?(r?(r=!1,s=i&&dr(i)?i:[]):s=i&&fr(i)?i:{},pr(l,{name:n,newValue:e(f,s,o)})):typeof o<"u"&&pr(l,{name:n,newValue:o}));return l};const Jn=ll(dh);function Si(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fh(){const e=[],t={run:n,use:i};return t;function n(...o){let r=-1;const s=o.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...o);function l(c,...d){const f=e[++r];let p=-1;if(c){s(c);return}for(;++p<o.length;)(d[p]===null||d[p]===void 0)&&(d[p]=o[p]);o=d,f?ph(f,l)(...d):s(null,...d)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function ph(e,t){let n;return i;function i(...s){const l=e.length>s.length;let c;l&&s.push(o);try{c=e.apply(this,s)}catch(d){const f=d;if(l&&n)throw f;return o(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(r,o):c instanceof Error?o(c):r(c))}function o(s,...l){n||(n=!0,t(s,...l))}function r(s){o(null,s)}}const nt={basename:hh,dirname:mh,extname:gh,join:yh,sep:"/"};function hh(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Zt(e);let n=0,i=-1,o=e.length,r;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(r){n=o+1;break}}else i<0&&(r=!0,i=o+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let s=-1,l=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(r){n=o+1;break}}else s<0&&(r=!0,s=o+1),l>-1&&(e.codePointAt(o)===t.codePointAt(l--)?l<0&&(i=o):(l=-1,i=s));return n===i?i=s:i<0&&(i=e.length),e.slice(n,i)}function mh(e){if(Zt(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function gh(e){Zt(e);let t=e.length,n=-1,i=0,o=-1,r=0,s;for(;t--;){const l=e.codePointAt(t);if(l===47){if(s){i=t+1;break}continue}n<0&&(s=!0,n=t+1),l===46?o<0?o=t:r!==1&&(r=1):o>-1&&(r=-1)}return o<0||n<0||r===0||r===1&&o===n-1&&o===i+1?"":e.slice(o,n)}function yh(...e){let t=-1,n;for(;++t<e.length;)Zt(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":xh(n)}function xh(e){Zt(e);const t=e.codePointAt(0)===47;let n=vh(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function vh(e,t){let n="",i=0,o=-1,r=0,s=-1,l,c;for(;++s<=e.length;){if(s<e.length)l=e.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(o===s-1||r===1))if(o!==s-1&&r===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),o=s,r=0;continue}}else if(n.length>0){n="",i=0,o=s,r=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,r=0}else l===46&&r>-1?r++:r=-1}return n}function Zt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Sh={cwd:Ch};function Ch(){return"/"}function Ci(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Eh(e){if(typeof e=="string")e=new URL(e);else if(!Ci(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Th(e)}function Th(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const Wn=["history","path","basename","stem","extname","dirname"];class Yl{constructor(t){let n;t?Ci(t)?n={path:t}:typeof t=="string"||wh(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Sh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Wn.length;){const r=Wn[i];r in n&&n[r]!==void 0&&n[r]!==null&&(this[r]=r==="history"?[...n[r]]:n[r])}let o;for(o in n)Wn.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?nt.basename(this.path):void 0}set basename(t){Kn(t,"basename"),Yn(t,"basename"),this.path=nt.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?nt.dirname(this.path):void 0}set dirname(t){mr(this.basename,"dirname"),this.path=nt.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?nt.extname(this.path):void 0}set extname(t){if(Yn(t,"extname"),mr(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=nt.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ci(t)&&(t=Eh(t)),Kn(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?nt.basename(this.path,this.extname):void 0}set stem(t){Kn(t,"stem"),Yn(t,"stem"),this.path=nt.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const o=this.message(t,n,i);throw o.fatal=!0,o}info(t,n,i){const o=this.message(t,n,i);return o.fatal=void 0,o}message(t,n,i){const o=new Ne(t,n,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Yn(e,t){if(e&&e.includes(nt.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+nt.sep+"`")}function Kn(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function mr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function wh(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _h=function(e){const i=this.constructor.prototype,o=i[e],r=function(){return o.apply(r,arguments)};return Object.setPrototypeOf(r,i),r},kh={}.hasOwnProperty;class ji extends _h{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fh()}copy(){const t=new ji;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Jn(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Zn("data",this.frozen),this.namespace[t]=n,this):kh.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Zn("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=n.call(t,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=on(t),i=this.parser||this.Parser;return Xn("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),Xn("process",this.parser||this.Parser),Qn("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(r,s){const l=on(t),c=i.parse(l);i.run(c,l,function(f,p,h){if(f||!p||!h)return d(f);const m=p,y=i.stringify(m,h);bh(y)?h.value=y:h.result=y,d(f,h)});function d(f,p){f||!p?s(f):r?r(p):n(void 0,p)}}}processSync(t){let n=!1,i;return this.freeze(),Xn("processSync",this.parser||this.Parser),Qn("processSync",this.compiler||this.Compiler),this.process(t,o),yr("processSync","process",n),i;function o(r,s){n=!0,ar(r),i=s}}run(t,n,i){gr(t),this.freeze();const o=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?r(void 0,i):new Promise(r);function r(s,l){const c=on(n);o.run(t,c,d);function d(f,p,h){const m=p||t;f?l(f):s?s(m):i(void 0,m,h)}}}runSync(t,n){let i=!1,o;return this.run(t,n,r),yr("runSync","run",i),o;function r(s,l){ar(s),o=l,i=!0}}stringify(t,n){this.freeze();const i=on(n),o=this.compiler||this.Compiler;return Qn("stringify",o),gr(t),o(t,i)}use(t,...n){const i=this.attachers,o=this.namespace;if(Zn("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function r(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;c(f,p)}else s(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function s(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(o.settings=Jn(!0,o.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];r(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,f){let p=-1,h=-1;for(;++p<i.length;)if(i[p][0]===d){h=p;break}if(h===-1)i.push([d,...f]);else if(f.length>0){let[m,...y]=f;const v=i[h][1];Si(v)&&Si(m)&&(m=Jn(!0,v,m)),i[h]=[d,m,...y]}}}}const Ih=new ji().freeze();function Xn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Qn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Zn(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function gr(e){if(!Si(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function yr(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function on(e){return Ah(e)?e:new Yl(e)}function Ah(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function bh(e){return typeof e=="string"||Nh(e)}function Nh(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Rh="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xr=[],vr={allowDangerousHtml:!0},Ph=/^(https?|ircs?|mailto|xmpp)$/i,Mh=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Dh(e){const t=Lh(e),n=Uh(e);return Fh(t.runSync(t.parse(n),n),e)}function Lh(e){const t=e.rehypePlugins||xr,n=e.remarkPlugins||xr,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...vr}:vr;return Ih().use(gp).use(n).use(ch,i).use(t)}function Uh(e){const t=e.children||"",n=new Yl;return typeof t=="string"&&(n.value=t),n}function Fh(e,t){const n=t.allowedElements,i=t.allowElement,o=t.components,r=t.disallowedElements,s=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Bh;for(const f of Mh)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Rh+f.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Zi(e,d),Zc(e,{Fragment:g.Fragment,components:o,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function d(f,p,h){if(f.type==="raw"&&h&&typeof p=="number")return s?h.children.splice(p,1):h.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let m;for(m in qn)if(Object.hasOwn(qn,m)&&Object.hasOwn(f.properties,m)){const y=f.properties[m],v=qn[m];(v===null||v.includes(f.tagName))&&(f.properties[m]=c(String(y||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):r?r.includes(f.tagName):!1;if(!m&&i&&typeof p=="number"&&(m=!i(f,p,h)),m&&h&&typeof p=="number")return l&&f.children?h.children.splice(p,1,...f.children):h.children.splice(p,1),p}}}function Bh(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||i!==-1&&t>i||Ph.test(e.slice(0,t))?e:""}function Sr(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,o=n.indexOf(t);for(;o!==-1;)i++,o=n.indexOf(t,o+t.length);return i}function Gh(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Vh(e,t,n){const o=Dn((n||{}).ignore||[]),r=Hh(t);let s=-1;for(;++s<r.length;)Jl(e,"text",l);function l(d,f){let p=-1,h;for(;++p<f.length;){const m=f[p],y=h?h.children:void 0;if(o(m,y?y.indexOf(m):void 0,h))return;h=m}if(h)return c(d,f)}function c(d,f){const p=f[f.length-1],h=r[s][0],m=r[s][1];let y=0;const S=p.children.indexOf(d);let x=!1,A=[];h.lastIndex=0;let k=h.exec(d.value);for(;k;){const R=k.index,w={index:k.index,input:k.input,stack:[...f,d]};let I=m(...k,w);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?h.lastIndex=R+1:(y!==R&&A.push({type:"text",value:d.value.slice(y,R)}),Array.isArray(I)?A.push(...I):I&&A.push(I),y=R+k[0].length,x=!0),!h.global)break;k=h.exec(d.value)}return x?(y<d.value.length&&A.push({type:"text",value:d.value.slice(y)}),p.children.splice(S,1,...A)):A=[d],S+A.length}}function Hh(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const o=n[i];t.push([Oh(o[0]),qh(o[1])])}return t}function Oh(e){return typeof e=="string"?new RegExp(Gh(e),"g"):e}function qh(e){return typeof e=="function"?e:function(){return e}}const jn="phrasing",ei=["autolink","link","image","label"];function zh(){return{transforms:[Qh],enter:{literalAutolink:Jh,literalAutolinkEmail:ti,literalAutolinkHttp:ti,literalAutolinkWww:ti},exit:{literalAutolink:Xh,literalAutolinkEmail:Kh,literalAutolinkHttp:Wh,literalAutolinkWww:Yh}}}function $h(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:jn,notInConstruct:ei},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:jn,notInConstruct:ei},{character:":",before:"[ps]",after:"\\/",inConstruct:jn,notInConstruct:ei}]}}function Jh(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ti(e){this.config.enter.autolinkProtocol.call(this,e)}function Wh(e){this.config.exit.autolinkProtocol.call(this,e)}function Yh(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Kh(e){this.config.exit.autolinkEmail.call(this,e)}function Xh(e){this.exit(e)}function Qh(e){Vh(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Zh],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),jh]],{ignore:["link","linkReference"]})}function Zh(e,t,n,i,o){let r="";if(!Kl(o)||(/^w/i.test(t)&&(n=t+n,t="",r="http://"),!em(n)))return!1;const s=tm(n+i);if(!s[0])return!1;const l={type:"link",title:null,url:r+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function jh(e,t,n,i){return!Kl(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function em(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function tm(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const o=Sr(e,"(");let r=Sr(e,")");for(;i!==-1&&o>r;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),r++;return[e,n]}function Kl(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||vt(n)||Rn(n))&&(!t||n!==47)}Xl.peek=cm;function nm(){this.buffer()}function im(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function om(){this.buffer()}function rm(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function sm(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ze(this.sliceSerialize(e)).toLowerCase(),n.label=t}function lm(e){this.exit(e)}function am(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ze(this.sliceSerialize(e)).toLowerCase(),n.label=t}function um(e){this.exit(e)}function cm(){return"["}function Xl(e,t,n,i){const o=n.createTracker(i);let r=o.move("[^");const s=n.enter("footnoteReference"),l=n.enter("reference");return r+=o.move(n.safe(n.associationId(e),{after:"]",before:r})),l(),s(),r+=o.move("]"),r}function dm(){return{enter:{gfmFootnoteCallString:nm,gfmFootnoteCall:im,gfmFootnoteDefinitionLabelString:om,gfmFootnoteDefinition:rm},exit:{gfmFootnoteCallString:sm,gfmFootnoteCall:lm,gfmFootnoteDefinitionLabelString:am,gfmFootnoteDefinition:um}}}function fm(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Xl},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,o,r,s){const l=r.createTracker(s);let c=l.move("[^");const d=r.enter("footnoteDefinition"),f=r.enter("label");return c+=l.move(r.safe(r.associationId(i),{before:c,after:"]"})),f(),c+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+r.indentLines(r.containerFlow(i,l.current()),t?Ql:pm))),d(),c}}function pm(e,t,n){return t===0?e:Ql(e,t,n)}function Ql(e,t,n){return(n?"":"    ")+e}const hm=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Zl.peek=vm;function mm(){return{canContainEols:["delete"],enter:{strikethrough:ym},exit:{strikethrough:xm}}}function gm(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:hm}],handlers:{delete:Zl}}}function ym(e){this.enter({type:"delete",children:[]},e)}function xm(e){this.exit(e)}function Zl(e,t,n,i){const o=n.createTracker(i),r=n.enter("strikethrough");let s=o.move("~~");return s+=n.containerPhrasing(e,{...o.current(),before:s,after:"~"}),s+=o.move("~~"),r(),s}function vm(){return"~"}function Sm(e){return e.length}function Cm(e,t){const n=t||{},i=(n.align||[]).concat(),o=n.stringLength||Sm,r=[],s=[],l=[],c=[];let d=0,f=-1;for(;++f<e.length;){const v=[],S=[];let x=-1;for(e[f].length>d&&(d=e[f].length);++x<e[f].length;){const A=Em(e[f][x]);if(n.alignDelimiters!==!1){const k=o(A);S[x]=k,(c[x]===void 0||k>c[x])&&(c[x]=k)}v.push(A)}s[f]=v,l[f]=S}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<d;)r[p]=Cr(i[p]);else{const v=Cr(i);for(;++p<d;)r[p]=v}p=-1;const h=[],m=[];for(;++p<d;){const v=r[p];let S="",x="";v===99?(S=":",x=":"):v===108?S=":":v===114&&(x=":");let A=n.alignDelimiters===!1?1:Math.max(1,c[p]-S.length-x.length);const k=S+"-".repeat(A)+x;n.alignDelimiters!==!1&&(A=S.length+A+x.length,A>c[p]&&(c[p]=A),m[p]=A),h[p]=k}s.splice(1,0,h),l.splice(1,0,m),f=-1;const y=[];for(;++f<s.length;){const v=s[f],S=l[f];p=-1;const x=[];for(;++p<d;){const A=v[p]||"";let k="",R="";if(n.alignDelimiters!==!1){const w=c[p]-(S[p]||0),I=r[p];I===114?k=" ".repeat(w):I===99?w%2?(k=" ".repeat(w/2+.5),R=" ".repeat(w/2-.5)):(k=" ".repeat(w/2),R=k):R=" ".repeat(w)}n.delimiterStart!==!1&&!p&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&A==="")&&(n.delimiterStart!==!1||p)&&x.push(" "),n.alignDelimiters!==!1&&x.push(k),x.push(A),n.alignDelimiters!==!1&&x.push(R),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&x.push("|")}y.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return y.join(`
`)}function Em(e){return e==null?"":String(e)}function Cr(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Tm(e,t,n,i){const o=n.enter("blockquote"),r=n.createTracker(i);r.move("> "),r.shift(2);const s=n.indentLines(n.containerFlow(e,r.current()),wm);return o(),s}function wm(e,t,n){return">"+(n?"":" ")+e}function _m(e,t){return Er(e,t.inConstruct,!0)&&!Er(e,t.notInConstruct,!1)}function Er(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Tr(e,t,n,i){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&_m(n.stack,n.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function km(e,t){const n=String(e);let i=n.indexOf(t),o=i,r=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++r>s&&(s=r):r=1,o=i+t.length,i=n.indexOf(t,o);return s}function Im(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Am(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function bm(e,t,n,i){const o=Am(n),r=e.value||"",s=o==="`"?"GraveAccent":"Tilde";if(Im(e,n)){const p=n.enter("codeIndented"),h=n.indentLines(r,Nm);return p(),h}const l=n.createTracker(i),c=o.repeat(Math.max(km(r,o)+1,3)),d=n.enter("codeFenced");let f=l.move(c);if(e.lang){const p=n.enter(`codeFencedLang${s}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${s}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),r&&(f+=l.move(r+`
`)),f+=l.move(c),d(),f}function Nm(e,t,n){return(n?"":"    ")+e}function eo(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Rm(e,t,n,i){const o=eo(n),r=o==='"'?"Quote":"Apostrophe",s=n.enter("definition");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("[");return d+=c.move(n.safe(n.associationId(e),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(e.url,{before:d,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${r}`),d+=c.move(" "+o),d+=c.move(n.safe(e.title,{before:d,after:o,...c.current()})),d+=c.move(o),l()),s(),d}function Pm(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Yt(e){return"&#x"+e.toString(16).toUpperCase()+";"}function En(e,t,n){const i=Rt(e),o=Rt(t);return i===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}jl.peek=Mm;function jl(e,t,n,i){const o=Pm(n),r=n.enter("emphasis"),s=n.createTracker(i),l=s.move(o);let c=s.move(n.containerPhrasing(e,{after:o,before:l,...s.current()}));const d=c.charCodeAt(0),f=En(i.before.charCodeAt(i.before.length-1),d,o);f.inside&&(c=Yt(d)+c.slice(1));const p=c.charCodeAt(c.length-1),h=En(i.after.charCodeAt(0),p,o);h.inside&&(c=c.slice(0,-1)+Yt(p));const m=s.move(o);return r(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function Mm(e,t,n){return n.options.emphasis||"*"}function Dm(e,t){let n=!1;return Zi(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,xi}),!!((!e.depth||e.depth<3)&&$i(e)&&(t.options.setext||n))}function Lm(e,t,n,i){const o=Math.max(Math.min(6,e.depth||1),1),r=n.createTracker(i);if(Dm(e,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),h=n.containerPhrasing(e,{...r.current(),before:`
`,after:`
`});return p(),f(),h+`
`+(o===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const s="#".repeat(o),l=n.enter("headingAtx"),c=n.enter("phrasing");r.move(s+" ");let d=n.containerPhrasing(e,{before:"# ",after:`
`,...r.current()});return/^[\t ]/.test(d)&&(d=Yt(d.charCodeAt(0))+d.slice(1)),d=d?s+" "+d:s,n.options.closeAtx&&(d+=" "+s),c(),l(),d}ea.peek=Um;function ea(e){return e.value||""}function Um(){return"<"}ta.peek=Fm;function ta(e,t,n,i){const o=eo(n),r=o==='"'?"Quote":"Apostrophe",s=n.enter("image");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("![");return d+=c.move(n.safe(e.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(e.url,{before:d,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${r}`),d+=c.move(" "+o),d+=c.move(n.safe(e.title,{before:d,after:o,...c.current()})),d+=c.move(o),l()),d+=c.move(")"),s(),d}function Fm(){return"!"}na.peek=Bm;function na(e,t,n,i){const o=e.referenceType,r=n.enter("imageReference");let s=n.enter("label");const l=n.createTracker(i);let c=l.move("![");const d=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),s();const f=n.stack;n.stack=[],s=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return s(),n.stack=f,r(),o==="full"||!d||d!==p?c+=l.move(p+"]"):o==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Bm(){return"!"}ia.peek=Gm;function ia(e,t,n){let i=e.value||"",o="`",r=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++r<n.unsafe.length;){const s=n.unsafe[r],l=n.compilePattern(s);let c;if(s.atBreak)for(;c=l.exec(i);){let d=c.index;i.charCodeAt(d)===10&&i.charCodeAt(d-1)===13&&d--,i=i.slice(0,d)+" "+i.slice(c.index+1)}}return o+i+o}function Gm(){return"`"}function oa(e,t){const n=$i(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}ra.peek=Vm;function ra(e,t,n,i){const o=eo(n),r=o==='"'?"Quote":"Apostrophe",s=n.createTracker(i);let l,c;if(oa(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=s.move("<");return p+=s.move(n.containerPhrasing(e,{before:p,after:">",...s.current()})),p+=s.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let d=s.move("[");return d+=s.move(n.containerPhrasing(e,{before:d,after:"](",...s.current()})),d+=s.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),d+=s.move("<"),d+=s.move(n.safe(e.url,{before:d,after:">",...s.current()})),d+=s.move(">")):(c=n.enter("destinationRaw"),d+=s.move(n.safe(e.url,{before:d,after:e.title?" ":")",...s.current()}))),c(),e.title&&(c=n.enter(`title${r}`),d+=s.move(" "+o),d+=s.move(n.safe(e.title,{before:d,after:o,...s.current()})),d+=s.move(o),c()),d+=s.move(")"),l(),d}function Vm(e,t,n){return oa(e,n)?"<":"["}sa.peek=Hm;function sa(e,t,n,i){const o=e.referenceType,r=n.enter("linkReference");let s=n.enter("label");const l=n.createTracker(i);let c=l.move("[");const d=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),s();const f=n.stack;n.stack=[],s=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return s(),n.stack=f,r(),o==="full"||!d||d!==p?c+=l.move(p+"]"):o==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Hm(){return"["}function to(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Om(e){const t=to(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function qm(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function la(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function zm(e,t,n,i){const o=n.enter("list"),r=n.bulletCurrent;let s=e.ordered?qm(n):to(n);const l=e.ordered?s==="."?")":".":Om(n);let c=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),la(n)===s&&f){let p=-1;for(;++p<e.children.length;){const h=e.children[p];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(s=l),n.bulletCurrent=s;const d=n.containerFlow(e,i);return n.bulletLastUsed=s,n.bulletCurrent=r,o(),d}function $m(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Jm(e,t,n,i){const o=$m(n);let r=n.bulletCurrent||to(n);t&&t.type==="list"&&t.ordered&&(r=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+r);let s=r.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const l=n.createTracker(i);l.move(r+" ".repeat(s-r.length)),l.shift(s);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(e,l.current()),f);return c(),d;function f(p,h,m){return h?(m?"":" ".repeat(s))+p:(m?r:r+" ".repeat(s-r.length))+p}}function Wm(e,t,n,i){const o=n.enter("paragraph"),r=n.enter("phrasing"),s=n.containerPhrasing(e,i);return r(),o(),s}const Ym=Dn(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Km(e,t,n,i){return(e.children.some(function(s){return Ym(s)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function Xm(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}aa.peek=Qm;function aa(e,t,n,i){const o=Xm(n),r=n.enter("strong"),s=n.createTracker(i),l=s.move(o+o);let c=s.move(n.containerPhrasing(e,{after:o,before:l,...s.current()}));const d=c.charCodeAt(0),f=En(i.before.charCodeAt(i.before.length-1),d,o);f.inside&&(c=Yt(d)+c.slice(1));const p=c.charCodeAt(c.length-1),h=En(i.after.charCodeAt(0),p,o);h.inside&&(c=c.slice(0,-1)+Yt(p));const m=s.move(o+o);return r(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function Qm(e,t,n){return n.options.strong||"*"}function Zm(e,t,n,i){return n.safe(e.value,i)}function jm(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function eg(e,t,n){const i=(la(n)+(n.options.ruleSpaces?" ":"")).repeat(jm(n));return n.options.ruleSpaces?i.slice(0,-1):i}const ua={blockquote:Tm,break:Tr,code:bm,definition:Rm,emphasis:jl,hardBreak:Tr,heading:Lm,html:ea,image:ta,imageReference:na,inlineCode:ia,link:ra,linkReference:sa,list:zm,listItem:Jm,paragraph:Wm,root:Km,strong:aa,text:Zm,thematicBreak:eg};function tg(){return{enter:{table:ng,tableData:wr,tableHeader:wr,tableRow:og},exit:{codeText:rg,table:ig,tableData:ni,tableHeader:ni,tableRow:ni}}}function ng(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function ig(e){this.exit(e),this.data.inTable=void 0}function og(e){this.enter({type:"tableRow",children:[]},e)}function ni(e){this.exit(e)}function wr(e){this.enter({type:"tableCell",children:[]},e)}function rg(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,sg));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function sg(e,t){return t==="|"?t:e}function lg(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,o=t.stringLength,r=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:s,tableCell:c,tableRow:l}};function s(m,y,v,S){return d(f(m,v,S),m.align)}function l(m,y,v,S){const x=p(m,v,S),A=d([x]);return A.slice(0,A.indexOf(`
`))}function c(m,y,v,S){const x=v.enter("tableCell"),A=v.enter("phrasing"),k=v.containerPhrasing(m,{...S,before:r,after:r});return A(),x(),k}function d(m,y){return Cm(m,{align:y,alignDelimiters:i,padding:n,stringLength:o})}function f(m,y,v){const S=m.children;let x=-1;const A=[],k=y.enter("table");for(;++x<S.length;)A[x]=p(S[x],y,v);return k(),A}function p(m,y,v){const S=m.children;let x=-1;const A=[],k=y.enter("tableRow");for(;++x<S.length;)A[x]=c(S[x],m,y,v);return k(),A}function h(m,y,v){let S=ua.inlineCode(m,y,v);return v.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function ag(){return{exit:{taskListCheckValueChecked:_r,taskListCheckValueUnchecked:_r,paragraph:cg}}}function ug(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:dg}}}function _r(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function cg(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const o=t.children;let r=-1,s;for(;++r<o.length;){const l=o[r];if(l.type==="paragraph"){s=l;break}}s===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function dg(e,t,n,i){const o=e.children[0],r=typeof e.checked=="boolean"&&o&&o.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",l=n.createTracker(i);r&&l.move(s);let c=ua.listItem(e,t,n,{...i,...l.current()});return r&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(f){return f+s}}function fg(){return[zh(),dm(),mm(),tg(),ag()]}function pg(e){return{extensions:[$h(),fm(e),gm(),lg(e),ug()]}}const hg={tokenize:Sg,partial:!0},ca={tokenize:Cg,partial:!0},da={tokenize:Eg,partial:!0},fa={tokenize:Tg,partial:!0},mg={tokenize:wg,partial:!0},pa={name:"wwwAutolink",tokenize:xg,previous:ma},ha={name:"protocolAutolink",tokenize:vg,previous:ga},rt={name:"emailAutolink",tokenize:yg,previous:ya},it={};function gg(){return{text:it}}let pt=48;for(;pt<123;)it[pt]=rt,pt++,pt===58?pt=65:pt===91&&(pt=97);it[43]=rt;it[45]=rt;it[46]=rt;it[95]=rt;it[72]=[rt,ha];it[104]=[rt,ha];it[87]=[rt,pa];it[119]=[rt,pa];function yg(e,t,n){const i=this;let o,r;return s;function s(p){return!Ei(p)||!ya.call(i,i.previous)||no(i.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(p))}function l(p){return Ei(p)?(e.consume(p),l):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(mg,f,d)(p):p===45||p===95||Ae(p)?(r=!0,e.consume(p),c):f(p)}function d(p){return e.consume(p),o=!0,c}function f(p){return r&&o&&De(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function xg(e,t,n){const i=this;return o;function o(s){return s!==87&&s!==119||!ma.call(i,i.previous)||no(i.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(hg,e.attempt(ca,e.attempt(da,r),n),n)(s))}function r(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function vg(e,t,n){const i=this;let o="",r=!1;return s;function s(p){return(p===72||p===104)&&ga.call(i,i.previous)&&!no(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(p),e.consume(p),l):n(p)}function l(p){if(De(p)&&o.length<5)return o+=String.fromCodePoint(p),e.consume(p),l;if(p===58){const h=o.toLowerCase();if(h==="http"||h==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),r?d:(r=!0,c)):n(p)}function d(p){return p===null||vn(p)||de(p)||vt(p)||Rn(p)?n(p):e.attempt(ca,e.attempt(da,f),n)(p)}function f(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function Sg(e,t,n){let i=0;return o;function o(s){return(s===87||s===119)&&i<3?(i++,e.consume(s),o):s===46&&i===3?(e.consume(s),r):n(s)}function r(s){return s===null?n(s):t(s)}}function Cg(e,t,n){let i,o,r;return s;function s(d){return d===46||d===95?e.check(fa,c,l)(d):d===null||de(d)||vt(d)||d!==45&&Rn(d)?c(d):(r=!0,e.consume(d),s)}function l(d){return d===95?i=!0:(o=i,i=void 0),e.consume(d),s}function c(d){return o||i||!r?n(d):t(d)}}function Eg(e,t){let n=0,i=0;return o;function o(s){return s===40?(n++,e.consume(s),o):s===41&&i<n?r(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(fa,t,r)(s):s===null||de(s)||vt(s)?t(s):(e.consume(s),o)}function r(s){return s===41&&i++,e.consume(s),o}}function Tg(e,t,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),i):l===38?(e.consume(l),r):l===93?(e.consume(l),o):l===60||l===null||de(l)||vt(l)?t(l):n(l)}function o(l){return l===null||l===40||l===91||de(l)||vt(l)?t(l):i(l)}function r(l){return De(l)?s(l):n(l)}function s(l){return l===59?(e.consume(l),i):De(l)?(e.consume(l),s):n(l)}}function wg(e,t,n){return i;function i(r){return e.consume(r),o}function o(r){return Ae(r)?n(r):t(r)}}function ma(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||de(e)}function ga(e){return!De(e)}function ya(e){return!(e===47||Ei(e))}function Ei(e){return e===43||e===45||e===46||e===95||Ae(e)}function no(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const _g={tokenize:Mg,partial:!0};function kg(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Ng,continuation:{tokenize:Rg},exit:Pg}},text:{91:{name:"gfmFootnoteCall",tokenize:bg},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ig,resolveTo:Ag}}}}function Ig(e,t,n){const i=this;let o=i.events.length;const r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s;for(;o--;){const c=i.events[o][1];if(c.type==="labelImage"){s=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!s||!s._balanced)return n(c);const d=Ze(i.sliceSerialize({start:s.end,end:i.now()}));return d.codePointAt(0)!==94||!r.includes(d.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function Ag(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const r={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},r.start),end:Object.assign({},r.end)},l=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",r,t],["enter",s,t],["exit",s,t],["exit",r,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...l),e}function bg(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r=0,s;return l;function l(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",d)}function d(p){if(r>999||p===93&&!s||p===null||p===91||de(p))return n(p);if(p===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return o.includes(Ze(i.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return de(p)||(s=!0),r++,e.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(e.consume(p),r++,d):d(p)}}function Ng(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r,s=0,l;return c;function c(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(y)}function f(y){if(s>999||y===93&&!l||y===null||y===91||de(y))return n(y);if(y===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return r=Ze(i.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return de(y)||(l=!0),s++,e.consume(y),y===92?p:f}function p(y){return y===91||y===92||y===93?(e.consume(y),s++,f):f(y)}function h(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),o.includes(r)||o.push(r),se(e,m,"gfmFootnoteDefinitionWhitespace")):n(y)}function m(y){return t(y)}}function Rg(e,t,n){return e.check(Qt,t,e.attempt(_g,t,n))}function Pg(e){e.exit("gfmFootnoteDefinition")}function Mg(e,t,n){const i=this;return se(e,o,"gfmFootnoteDefinitionIndent",5);function o(r){const s=i.events[i.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(r):n(r)}}function Dg(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:r,resolveAll:o};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(s,l){let c=-1;for(;++c<s.length;)if(s[c][0]==="enter"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._close){let d=c;for(;d--;)if(s[d][0]==="exit"&&s[d][1].type==="strikethroughSequenceTemporary"&&s[d][1]._open&&s[c][1].end.offset-s[c][1].start.offset===s[d][1].end.offset-s[d][1].start.offset){s[c][1].type="strikethroughSequence",s[d][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},s[d][1].start),end:Object.assign({},s[c][1].end)},p={type:"strikethroughText",start:Object.assign({},s[d][1].end),end:Object.assign({},s[c][1].start)},h=[["enter",f,l],["enter",s[d][1],l],["exit",s[d][1],l],["enter",p,l]],m=l.parser.constructs.insideSpan.null;m&&ze(h,h.length,0,Pn(m,s.slice(d+1,c),l)),ze(h,h.length,0,[["exit",p,l],["enter",s[c][1],l],["exit",s[c][1],l],["exit",f,l]]),ze(s,d-1,c-d+3,h),c=d+h.length-2;break}}for(c=-1;++c<s.length;)s[c][1].type==="strikethroughSequenceTemporary"&&(s[c][1].type="data");return s}function r(s,l,c){const d=this.previous,f=this.events;let p=0;return h;function h(y){return d===126&&f[f.length-1][1].type!=="characterEscape"?c(y):(s.enter("strikethroughSequenceTemporary"),m(y))}function m(y){const v=Rt(d);if(y===126)return p>1?c(y):(s.consume(y),p++,m);if(p<2&&!n)return c(y);const S=s.exit("strikethroughSequenceTemporary"),x=Rt(y);return S._open=!x||x===2&&!!v,S._close=!v||v===2&&!!x,l(y)}}}class Lg{constructor(){this.map=[]}add(t,n,i){Ug(this,t,n,i)}consume(t){if(this.map.sort(function(r,s){return r[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let o=i.pop();for(;o;){for(const r of o)t.push(r);o=i.pop()}this.map.length=0}}function Ug(e,t,n,i){let o=0;if(!(n===0&&i.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...i);return}o+=1}e.map.push([t,n,i])}}function Fg(e,t){let n=!1;const i=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const r=i.length-1;i[r]=i[r]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function Bg(){return{flow:{null:{name:"table",tokenize:Gg,resolveAll:Vg}}}}function Gg(e,t,n){const i=this;let o=0,r=0,s;return l;function l(_){let U=i.events.length-1;for(;U>-1;){const K=i.events[U][1].type;if(K==="lineEnding"||K==="linePrefix")U--;else break}const G=U>-1?i.events[U][1].type:null,$=G==="tableHead"||G==="tableRow"?I:c;return $===I&&i.parser.lazy[i.now().line]?n(_):$(_)}function c(_){return e.enter("tableHead"),e.enter("tableRow"),d(_)}function d(_){return _===124||(s=!0,r+=1),f(_)}function f(_){return _===null?n(_):W(_)?r>1?(r=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),m):n(_):oe(_)?se(e,f,"whitespace")(_):(r+=1,s&&(s=!1,o+=1),_===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),s=!0,f):(e.enter("data"),p(_)))}function p(_){return _===null||_===124||de(_)?(e.exit("data"),f(_)):(e.consume(_),_===92?h:p)}function h(_){return _===92||_===124?(e.consume(_),p):p(_)}function m(_){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(_):(e.enter("tableDelimiterRow"),s=!1,oe(_)?se(e,y,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):y(_))}function y(_){return _===45||_===58?S(_):_===124?(s=!0,e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),v):w(_)}function v(_){return oe(_)?se(e,S,"whitespace")(_):S(_)}function S(_){return _===58?(r+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),x):_===45?(r+=1,x(_)):_===null||W(_)?R(_):w(_)}function x(_){return _===45?(e.enter("tableDelimiterFiller"),A(_)):w(_)}function A(_){return _===45?(e.consume(_),A):_===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),k):(e.exit("tableDelimiterFiller"),k(_))}function k(_){return oe(_)?se(e,R,"whitespace")(_):R(_)}function R(_){return _===124?y(_):_===null||W(_)?!s||o!==r?w(_):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(_)):w(_)}function w(_){return n(_)}function I(_){return e.enter("tableRow"),D(_)}function D(_){return _===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),D):_===null||W(_)?(e.exit("tableRow"),t(_)):oe(_)?se(e,D,"whitespace")(_):(e.enter("data"),H(_))}function H(_){return _===null||_===124||de(_)?(e.exit("data"),D(_)):(e.consume(_),_===92?M:H)}function M(_){return _===92||_===124?(e.consume(_),H):H(_)}}function Vg(e,t){let n=-1,i=!0,o=0,r=[0,0,0,0],s=[0,0,0,0],l=!1,c=0,d,f,p;const h=new Lg;for(;++n<e.length;){const m=e[n],y=m[1];m[0]==="enter"?y.type==="tableHead"?(l=!1,c!==0&&(kr(h,t,c,d,f),f=void 0,c=0),d={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},h.add(n,0,[["enter",d,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(i=!0,p=void 0,r=[0,0,0,0],s=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},h.add(n,0,[["enter",f,t]])),o=y.type==="tableDelimiterRow"?2:f?3:1):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(i=!1,s[2]===0&&(r[1]!==0&&(s[0]=s[1],p=rn(h,t,r,o,void 0,p),r=[0,0,0,0]),s[2]=n)):y.type==="tableCellDivider"&&(i?i=!1:(r[1]!==0&&(s[0]=s[1],p=rn(h,t,r,o,void 0,p)),r=s,s=[r[1],n,0,0])):y.type==="tableHead"?(l=!0,c=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(c=n,r[1]!==0?(s[0]=s[1],p=rn(h,t,r,o,n,p)):s[1]!==0&&(p=rn(h,t,s,o,n,p)),o=0):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(s[3]=n)}for(c!==0&&kr(h,t,c,d,f),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=Fg(t.events,n))}return e}function rn(e,t,n,i,o,r){const s=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(r.end=Object.assign({},wt(t.events,n[0])),e.add(n[0],0,[["exit",r,t]]));const c=wt(t.events,n[1]);if(r={type:s,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",r,t]]),n[2]!==0){const d=wt(t.events,n[2]),f=wt(t.events,n[3]),p={type:l,start:Object.assign({},d),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",p,t]]),i!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;e.add(y,v,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return o!==void 0&&(r.end=Object.assign({},wt(t.events,o)),e.add(o,0,[["exit",r,t]]),r=void 0),r}function kr(e,t,n,i,o){const r=[],s=wt(t.events,n);o&&(o.end=Object.assign({},s),r.push(["exit",o,t])),i.end=Object.assign({},s),r.push(["exit",i,t]),e.add(n+1,0,r)}function wt(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const Hg={name:"tasklistCheck",tokenize:qg};function Og(){return{text:{91:Hg}}}function qg(e,t,n){const i=this;return o;function o(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),r)}function r(c){return de(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),s):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),s):n(c)}function s(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return W(c)?t(c):oe(c)?e.check({tokenize:zg},t,n)(c):n(c)}}function zg(e,t,n){return se(e,i,"whitespace");function i(o){return o===null?n(o):t(o)}}function $g(e){return Il([gg(),kg(),Dg(e),Bg(),Og()])}const Jg={};function Wg(e){const t=this,n=e||Jg,i=t.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),r=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),s=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push($g(n)),r.push(fg()),s.push(pg(n))}var Be=(e=>(e.USER="user",e.AI="ai",e.SYSTEM="system",e))(Be||{});const Ir={en:{appName:"Comfy Workflow Agent",appSubtitle:"AI Workflow Architect",welcome:"Hello! I'm your Comfy Workflow Agent. I can help you solve errors, understand complex logic, and build workflows.",inputPlaceholder:"Ex: 'Why did this fail?' or 'Explain how this workflow works'",thinking:"Thinking & Searching...",groundingSources:"Knowledge Base Sources",missingNodes:"Possible Missing Nodes",suggestedActions:"Suggested Actions",workflowUpdated:"Workflow updated automatically",managerTitle:"Workflow Manager",copyJson:"Copy JSON",exportJson:"Export JSON",copied:"Copied",tabOverview:"Overview",tabDiagnostics:"Diagnostics",tabJson:"JSON Data",statNodes:"Nodes",statLinks:"Links",statIssues:"Issues",workflowHealth:"Workflow Health",noIssues:"No active issues detected.",startDiagnosis:"Run Diagnostics",diagnoseWithAi:"Diagnose with AI",deepScanBackend:"Deep Scan (Backend)",explainWorkflow:"Explain Logic",diagnosePrompt:"Analyze this workflow for any logical errors, missing connections, or potential runtime issues.",explainPrompt:"Please explain the logic of this workflow step-by-step, detailing how data flows from input to output.",tip:"Tip",emptyWorkflow:"Workflow is empty.",emptyWorkflowSub:"Ask the AI to create one!",noInputs:"No inputs required",outputs:"OUTPUTS",values:"VALUES",danglingNode:"seems isolated.",danglingFix:"Ensure this node is part of the execution flow.",missingLink:"has unconnected input",missingLinkFix:"Connect this input or add a primitive node.",editJson:"Edit JSON",saveChanges:"Save Changes",cancelEdit:"Cancel",editWarningTitle:"Warning: Advanced Editing",editWarningText:"Directly editing the JSON can break your workflow. We will create a checkpoint before saving, but please proceed with caution.",confirmEdit:"I Understand, Edit",checkpoints:"History / Checkpoints",restore:"Restore",restoreConfirm:"Restore this version?",invalidJsonTitle:"Invalid JSON Detected",invalidJsonText:"The JSON formatting is incorrect and cannot be parsed.",askAiFix:"Ask AI to Fix",checkpointSaved:"Checkpoint saved",settingsTitle:"Model Configuration",settingsSave:"Save Configuration",settingsCancel:"Close",provider:"AI Provider",googleGemini:"Google Gemini",customLocal:"Custom / Local",apiKey:"API Key",apiKeyOptional:"API Key (Optional for some local models)",modelName:"Model Name",modelNamePlaceholder:"Enter model ID",modelHintGoogle:"Recommended: gemini-2.5-flash",modelHintCustom:"Enter the model ID available on your server.",baseUrl:"Base URL",corsWarning:"For local servers (Ollama/LM Studio), ensure you have enabled CORS.",language:"Language",setupRequired:"Setup Required",aiDisclaimer:"AI can search the web for latest nodes. Review changes carefully.",leaveEmptyToKeep:"Leave empty to keep current",usePythonBackend:"Use Python Backend Agent",pythonBackendUrl:"Backend URL",backendHint:"Enables advanced features: GitHub search, deep analysis, and undo history.",manageProviders:"Manage AI Providers",addProvider:"Add Provider",editProvider:"Edit Provider",providerName:"Config Name",providerType:"Provider Type",isDefault:"Active",setAsDefault:"Select",deleteConfig:"Delete",confirmDelete:"Delete this configuration?",yes:"Yes",no:"No",requiredField:"This field is required",update:"Update",githubIntegration:"GitHub Integration",githubToken:"GitHub Token",githubTokenPlaceholder:"ghp_...",githubStatusConfigured:"Configured",githubStatusNotConfigured:"Not Configured",saveToken:"Update Token",deleteToken:"Remove Token",configSaved:"Configuration Saved",configDeleted:"Configuration Deleted",loading:"Loading...",advancedSettings:"Advanced API Configuration",advancedHint:"Customize the API call structure. Use placeholders like $model, $messages, $prompt, $apiKey.",apiEndpoint:"API Endpoint (Relative or Full URL)",apiHeaders:"Headers (JSON)",apiBody:"Body Template (JSON)",resetDefault:"Reset to Default",defaultFix:"Check node configuration and inputs.",initActionExplain:"Explain Logic",initActionCheck:"Check for Errors",actionUndo:"Undo",actionExplainChanges:"Explain changes",editMode:"EDIT MODE",readOnly:"READ-ONLY",version:"Version",updateMessage:"(Workflow updated below...)",errorPrefix:"Error: "},zh:{appName:"Comfy ",appSubtitle:"AI ",welcome:" Comfy ",inputPlaceholder:"''  ''",thinking:"...",groundingSources:"",missingNodes:"",suggestedActions:"",workflowUpdated:"",managerTitle:"",copyJson:" JSON",exportJson:" JSON",copied:"",tabOverview:"",tabDiagnostics:"",tabJson:"JSON ",statNodes:"",statLinks:"",statIssues:"",workflowHealth:"",noIssues:"",startDiagnosis:"",diagnoseWithAi:" AI ",deepScanBackend:" ()",explainWorkflow:"",diagnosePrompt:"",explainPrompt:"",tip:"",emptyWorkflow:"",emptyWorkflowSub:" AI ",noInputs:"",outputs:"",values:"",danglingNode:"",danglingFix:"",missingLink:"",missingLinkFix:"",editJson:" JSON",saveChanges:"",cancelEdit:"",editWarningTitle:"",editWarningText:" JSON ",confirmEdit:"",checkpoints:" / ",restore:"",restoreConfirm:"",invalidJsonTitle:" JSON",invalidJsonText:"JSON ",askAiFix:" AI ",checkpointSaved:"",settingsTitle:"",settingsSave:"",settingsCancel:"",provider:"AI ",googleGemini:"Google Gemini",customLocal:" / ",apiKey:"API ",apiKeyOptional:"API  ()",modelName:"",modelNamePlaceholder:" ID",modelHintGoogle:": gemini-2.5-flash",modelHintCustom:" ID",baseUrl:" URL (Base URL)",corsWarning:" (Ollama/LM Studio) CORS",language:" (Language)",setupRequired:"",aiDisclaimer:"AI ",leaveEmptyToKeep:"",usePythonBackend:" Python ",pythonBackendUrl:"",backendHint:"GitHub ",manageProviders:" AI ",addProvider:"",editProvider:"",providerName:"",providerType:"",isDefault:"",setAsDefault:"",deleteConfig:"",confirmDelete:"",yes:"",no:"",requiredField:"",update:"",githubIntegration:"GitHub ",githubToken:"GitHub Token",githubTokenPlaceholder:"ghp_...",githubStatusConfigured:"",githubStatusNotConfigured:"",saveToken:" Token",deleteToken:" Token",configSaved:"",configDeleted:"",loading:"...",advancedSettings:" API ",advancedHint:" API  $model, $messages, $prompt, $apiKey ",apiEndpoint:"API  ( URL)",apiHeaders:"Headers (JSON)",apiBody:"Body  (JSON)",resetDefault:"",defaultFix:"",initActionExplain:"",initActionCheck:"",actionUndo:"",actionExplainChanges:"",editMode:"",readOnly:"",version:"",updateMessage:"...",errorPrefix:""},ja:{appName:"Comfy ",appSubtitle:"AI ",welcome:"Comfy ",inputPlaceholder:": ''  ''",thinking:" & ...",groundingSources:"",missingNodes:"",suggestedActions:"",workflowUpdated:"",managerTitle:"",copyJson:"JSON",exportJson:"JSON",copied:"",tabOverview:"",tabDiagnostics:"",tabJson:"JSON ",statNodes:"",statLinks:"",statIssues:"",workflowHealth:"",noIssues:"",startDiagnosis:"",diagnoseWithAi:"AI",deepScanBackend:" ()",explainWorkflow:"",diagnosePrompt:"",explainPrompt:"",tip:"",emptyWorkflow:"",emptyWorkflowSub:"AI",noInputs:"",outputs:"",values:"",danglingNode:"",danglingFix:"",missingLink:"",missingLinkFix:"",editJson:"JSON",saveChanges:"",cancelEdit:"",editWarningTitle:"",editWarningText:"JSON",confirmEdit:"",checkpoints:" / ",restore:"",restoreConfirm:"",invalidJsonTitle:"JSON",invalidJsonText:"JSON",askAiFix:"AI",checkpointSaved:"",settingsTitle:"",settingsSave:"",settingsCancel:"",provider:"AI ",googleGemini:"Google Gemini",customLocal:" / ",apiKey:"API ",apiKeyOptional:"API  ()",modelName:"",modelNamePlaceholder:"ID",modelHintGoogle:": gemini-2.5-flash",modelHintCustom:"ID",baseUrl:" URL",corsWarning:" (Ollama/LM Studio) CORS",language:" (Language)",setupRequired:"",aiDisclaimer:"AIWeb",leaveEmptyToKeep:"",usePythonBackend:"Python",pythonBackendUrl:"URL",backendHint:"GitHub",manageProviders:"AI",addProvider:"",editProvider:"",providerName:"",providerType:"",isDefault:"",setAsDefault:"",deleteConfig:"",confirmDelete:"",yes:"",no:"",requiredField:"",update:"",githubIntegration:"GitHub",githubToken:"GitHub",githubTokenPlaceholder:"ghp_...",githubStatusConfigured:"",githubStatusNotConfigured:"",saveToken:"",deleteToken:"",configSaved:"",configDeleted:"",loading:"...",advancedSettings:"API",advancedHint:"API$model, $messages, $prompt, $apiKey",apiEndpoint:"API (URL)",apiHeaders:" (JSON)",apiBody:" (JSON)",resetDefault:"",defaultFix:"",initActionExplain:"",initActionCheck:"",actionUndo:"",actionExplainChanges:"",editMode:"",readOnly:"",version:"",updateMessage:"...",errorPrefix:""},ko:{appName:"Comfy  ",appSubtitle:"AI  ",welcome:"! Comfy  .  ,   ,     .",inputPlaceholder:": '  ?'  '    '",thinking:"   ...",groundingSources:"  ",missingNodes:"  ",suggestedActions:" ",workflowUpdated:"  ",managerTitle:" ",copyJson:"JSON ",exportJson:"JSON ",copied:"",tabOverview:"",tabDiagnostics:"",tabJson:"JSON ",statNodes:"",statLinks:"",statIssues:"",workflowHealth:" ",noIssues:"   .",startDiagnosis:" ",diagnoseWithAi:"AI ",deepScanBackend:"  ()",explainWorkflow:" ",diagnosePrompt:"   ,       .",explainPrompt:"            .",tip:"",emptyWorkflow:"  .",emptyWorkflowSub:"AI  !",noInputs:"  ",outputs:"",values:"",danglingNode:"  .",danglingFix:"     .",missingLink:"   ",missingLinkFix:"     .",editJson:"JSON ",saveChanges:"  ",cancelEdit:"",editWarningTitle:":  ",editWarningText:"JSON      .      .",confirmEdit:", ",checkpoints:" / ",restore:"",restoreConfirm:"  ?",invalidJsonTitle:" JSON",invalidJsonText:"JSON      .",askAiFix:"AI  ",checkpointSaved:" ",settingsTitle:" ",settingsSave:" ",settingsCancel:"",provider:"AI ",googleGemini:"Google Gemini",customLocal:"  / ",apiKey:"API ",apiKeyOptional:"API  (     )",modelName:" ",modelNamePlaceholder:" ID ",modelHintGoogle:": gemini-2.5-flash",modelHintCustom:"    ID .",baseUrl:" URL (Base URL)",corsWarning:"  (Ollama/LM Studio)  CORS   .",language:" (Language)",setupRequired:" ",aiDisclaimer:"AI      .     .",leaveEmptyToKeep:"    ",usePythonBackend:"Python   ",pythonBackendUrl:" URL",backendHint:"  : GitHub ,      .",manageProviders:"AI  ",addProvider:" ",editProvider:" ",providerName:" ",providerType:" ",isDefault:"  ",setAsDefault:"",deleteConfig:"",confirmDelete:"  ?",yes:"",no:"",requiredField:" ",update:"",githubIntegration:"GitHub ",githubToken:"GitHub ",githubTokenPlaceholder:"ghp_...",githubStatusConfigured:"",githubStatusNotConfigured:" ",saveToken:" ",deleteToken:" ",configSaved:" ",configDeleted:" ",loading:" ...",advancedSettings:" API ",advancedHint:"API    . $model, $messages, $prompt, $apiKey    .",apiEndpoint:"API  (    URL)",apiHeaders:" (JSON)",apiBody:"  (JSON)",resetDefault:" ",defaultFix:"    .",initActionExplain:" ",initActionCheck:" ",actionUndo:" ",actionExplainChanges:"  ",editMode:" ",readOnly:" ",version:"",updateMessage:"(  ...)",errorPrefix:": "}},P=(e,t)=>{var n;return((n=Ir[e])==null?void 0:n[t])||Ir.en[t]||t},Yg=({messages:e,input:t,setInput:n,onSend:i,isProcessing:o,currentStatus:r,onActionClick:s,language:l})=>{const c=q.useRef(null);q.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[e,r]);const d=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),i())};return g.jsxs("div",{className:"flex flex-col h-full bg-slate-900 border-r border-slate-700/50 relative min-w-0",children:[g.jsx("div",{className:"p-4 border-b border-slate-700/50 bg-slate-900/50 backdrop-blur-sm flex-shrink-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg",children:g.jsx(xn,{className:"w-5 h-5 text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-semibold text-slate-100",children:P(l,"appName")}),g.jsx("p",{className:"text-xs text-slate-400",children:P(l,"appSubtitle")})]})]})}),g.jsxs("div",{ref:c,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-6 min-h-0 custom-scrollbar",children:[e.length===0&&g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-slate-500 space-y-4",children:[g.jsx(No,{className:"w-12 h-12 opacity-20"}),g.jsx("p",{className:"whitespace-pre-wrap max-w-xs",children:P(l,"welcome")})]}),e.map(f=>{var p,h,m,y,v,S;return g.jsxs("div",{className:`flex gap-3 ${f.sender===Be.USER?"flex-row-reverse":"flex-row"}`,children:[g.jsx("div",{className:`
                            w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                            ${f.sender===Be.USER?"bg-slate-700":"bg-indigo-600"}
                        `,children:f.sender===Be.USER?g.jsx(Zu,{size:16}):g.jsx(xn,{size:16})}),g.jsxs("div",{className:`flex flex-col max-w-[85%] min-w-0 ${f.sender===Be.USER?"items-end":"items-start"}`,children:[g.jsx("div",{className:`
                                p-3 rounded-2xl text-sm leading-relaxed shadow-sm whitespace-pre-wrap break-words max-w-full
                                ${f.sender===Be.USER?"bg-slate-700 text-slate-100 rounded-tr-none":"bg-slate-800 text-slate-200 rounded-tl-none border border-slate-700/50"}
                            `,children:f.sender===Be.AI&&((p=f.metadata)!=null&&p.thinking)&&!f.text?g.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[g.jsx(bo,{className:"w-4 h-4 animate-spin"}),g.jsx("span",{children:P(l,"thinking")})]}):g.jsx("div",{className:"markdown-content",children:g.jsx(Dh,{remarkPlugins:[Wg],children:f.text})})}),f.sender===Be.AI&&g.jsxs("div",{className:"mt-2 space-y-2 w-full",children:[((h=f.metadata)==null?void 0:h.groundingSources)&&f.metadata.groundingSources.length>0&&g.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-2",children:[g.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-400 uppercase tracking-wider mb-1.5 font-semibold",children:[g.jsx(Nu,{className:"w-3 h-3"}),g.jsx("span",{children:P(l,"groundingSources")})]}),g.jsx("div",{className:"flex flex-col gap-1",children:f.metadata.groundingSources.slice(0,3).map((x,A)=>g.jsxs("a",{href:x.uri,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-300 hover:text-indigo-200 hover:underline truncate block",children:[" ",x.title]},A))})]}),((m=f.metadata)==null?void 0:m.missingNodes)&&f.metadata.missingNodes.length>0&&g.jsxs("div",{className:"bg-amber-950/30 border border-amber-900/50 rounded-lg p-3 text-xs text-amber-200 flex gap-2 items-start",children:[g.jsx(yn,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsxs("p",{className:"font-semibold mb-1",children:[P(l,"missingNodes"),":"]}),g.jsx("ul",{className:"list-disc list-inside opacity-80",children:f.metadata.missingNodes.map((x,A)=>g.jsx("li",{children:x},A))})]})]}),((y=f.metadata)==null?void 0:y.suggestedActions)&&f.metadata.suggestedActions.length>0&&g.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.metadata.suggestedActions.map((x,A)=>g.jsxs("button",{onClick:()=>s(x),className:"px-3 py-1.5 bg-slate-800 hover:bg-slate-700 border border-indigo-500/30 hover:border-indigo-500 text-indigo-300 text-xs rounded-full transition-colors flex items-center gap-1.5",children:[g.jsx(No,{className:"w-3 h-3"}),x]},A))}),((v=f.metadata)==null?void 0:v.relatedQuestions)&&f.metadata.relatedQuestions.length>0&&g.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-700/50",children:[g.jsxs("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2 font-semibold flex items-center gap-1.5",children:[g.jsx(Mu,{className:"w-3 h-3"}),"Related Questions"]}),g.jsx("div",{className:"flex flex-col gap-2",children:f.metadata.relatedQuestions.map((x,A)=>g.jsx("button",{onClick:()=>s(x),className:"text-left text-xs text-indigo-300 hover:text-indigo-200 hover:bg-slate-800/50 p-2 rounded transition-colors border border-transparent hover:border-slate-700",children:x},A))})]}),((S=f.metadata)==null?void 0:S.workflowUpdate)&&g.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-emerald-400 mt-1 pl-1",children:[g.jsx(Pu,{className:"w-3 h-3"}),g.jsx("span",{children:P(l,"workflowUpdated")})]})]}),g.jsx("span",{className:"text-[10px] text-slate-500 mt-1 px-1",children:f.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},f.id)}),o&&r&&g.jsx("div",{className:"flex justify-center w-full my-4 animate-in fade-in zoom-in-95 duration-300",children:g.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-md border border-indigo-500/30 rounded-full px-5 py-2 flex items-center gap-3 shadow-lg max-w-[90%]",children:[g.jsx(bo,{className:"w-3.5 h-3.5 animate-spin text-indigo-400 flex-shrink-0"}),g.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[g.jsx("span",{className:"text-xs font-medium text-indigo-100 truncate w-full",children:r.displayText}),r.node&&g.jsx("span",{className:"text-[9px] text-indigo-300/70 uppercase tracking-widest truncate w-full",children:r.node.replace(/_/g," ")})]})]})})]}),g.jsxs("div",{className:"p-4 bg-slate-900 border-t border-slate-700/50 flex-shrink-0 z-10",children:[g.jsxs("div",{className:"relative flex items-end gap-2 bg-slate-800 p-2 rounded-xl border border-slate-700 focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500/50 transition-all",children:[g.jsx("textarea",{value:t,onChange:f=>n(f.target.value),onKeyDown:d,placeholder:P(l,"inputPlaceholder"),className:"w-full bg-transparent text-slate-200 text-sm placeholder-slate-500 resize-none focus:outline-none py-2 px-2 max-h-32 min-h-[44px] custom-scrollbar",rows:1,style:{minHeight:"2.5rem"}}),g.jsx("button",{onClick:i,disabled:!t.trim()||o,className:`
                            p-2 rounded-lg mb-0.5 transition-all flex-shrink-0
                            ${!t.trim()||o?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-900/20"}
                        `,children:g.jsx(Ju,{size:18})})]}),g.jsx("p",{className:"text-[10px] text-center text-slate-600 mt-2",children:P(l,"aiDisclaimer")})]})]})},Ct=e=>e.replace(/\/$/,""),Kg=async e=>{const t=await fetch(`${Ct(e)}/api/configs`);if(!t.ok)throw new Error("Failed to fetch configs");return(await t.json()).configs||[]},Xg=async(e,t)=>{t.provider!=="custom"&&delete t.custom_config;const n=await fetch(`${Ct(e)}/api/configs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create config");return n.json()},Qg=async(e,t,n)=>{const i=await fetch(`${Ct(e)}/api/configs/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error("Failed to update config");return i.json()},Zg=async(e,t)=>{if(!(await fetch(`${Ct(e)}/api/configs/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete config")},jg=async e=>{try{const t=await fetch(`${Ct(e)}/api/github-token`);return t.ok?t.json():{has_token:!1}}catch{return{has_token:!1}}},ey=async(e,t)=>{if(!(await fetch(`${Ct(e)}/api/github-token`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})).ok)throw new Error("Failed to update GitHub token")},ty=async e=>{if(!(await fetch(`${Ct(e)}/api/github-token`,{method:"DELETE"})).ok)throw new Error("Failed to delete GitHub token")},ht=`{
  "Content-Type": "application/json",
  "Authorization": "Bearer $apiKey"
}`,mt=`{
  "model": "$model",
  "messages": "$messages",
  "temperature": 0.5
}`,gt="/chat/completions",ny=({isOpen:e,onClose:t,currentSettings:n,onSave:i})=>{var Ie,fe,Ve,Se,Re,He;const[o,r]=q.useState(n),s=o.language,[l,c]=q.useState([]),[d,f]=q.useState({has_token:!1}),[p,h]=q.useState(!1),[m,y]=q.useState(!1),[v,S]=q.useState(null),[x,A]=q.useState(null),[k,R]=q.useState(!1),[w,I]=q.useState({name:"",provider:"google",api_key:"",model_name:"",base_url:"",custom_config:{endpoint:gt,headers:ht,body:mt}}),[D,H]=q.useState({}),[M,_]=q.useState(""),[U,G]=q.useState(!1);q.useEffect(()=>{r(n)},[n,e]),q.useEffect(()=>{e&&o.usePythonBackend&&o.pythonBackendUrl&&$()},[e,o.usePythonBackend,o.pythonBackendUrl]);const $=async()=>{if(o.pythonBackendUrl){h(!0);try{const[L,me]=await Promise.all([Kg(o.pythonBackendUrl),jg(o.pythonBackendUrl)]);if(c(L),f(me),!o.activeBackendConfigId&&L.length>0){const Oe=L.find(Pe=>Pe.is_default)||L[0];r(Pe=>({...Pe,activeBackendConfigId:Oe.id}))}}catch(L){console.error("Failed to fetch backend data",L)}finally{h(!1)}}},K=()=>{i(o),t()},Y=L=>{r(me=>({...me,activeBackendConfigId:L}))},ce=L=>{var me,Oe,Pe;I({name:L.name,provider:L.provider,api_key:"",model_name:L.model_name||"",base_url:L.base_url||"",is_default:L.is_default,custom_config:{endpoint:((me=L.custom_config)==null?void 0:me.endpoint)||gt,headers:((Oe=L.custom_config)==null?void 0:Oe.headers)||ht,body:((Pe=L.custom_config)==null?void 0:Pe.body)||mt}}),S(L.id),y(!0),R(!1),H({})},j=()=>{y(!1),S(null),I({name:"",provider:"google",api_key:"",model_name:"",base_url:"",custom_config:{endpoint:gt,headers:ht,body:mt}}),H({}),R(!1)},le=()=>{var me,Oe,Pe;const L={};return(me=w.name)!=null&&me.trim()||(L.name=!0),(Oe=w.model_name)!=null&&Oe.trim()||(L.model_name=!0),!v&&!((Pe=w.api_key)!=null&&Pe.trim())&&(L.api_key=!0),H(L),Object.keys(L).length===0},xe=async()=>{if(o.pythonBackendUrl&&le())try{if(w.provider==="custom"&&w.custom_config){try{JSON.parse(w.custom_config.headers||"{}")}catch{alert("Invalid JSON in Headers");return}try{JSON.parse(w.custom_config.body||"{}")}catch{alert("Invalid JSON in Body Template");return}}if(v){const L={...w};L.api_key||delete L.api_key,await Qg(o.pythonBackendUrl,v,L)}else await Xg(o.pythonBackendUrl,w);j(),$()}catch(L){console.error(L),alert("Failed to save config")}},C=async L=>{if(o.pythonBackendUrl)try{await Zg(o.pythonBackendUrl,L),A(null),$(),o.activeBackendConfigId===L&&r(me=>({...me,activeBackendConfigId:void 0}))}catch(me){console.error(me)}},_e=async()=>{if(o.pythonBackendUrl)try{await ey(o.pythonBackendUrl,M),_(""),$()}catch(L){console.error(L),alert("Failed to update GitHub token")}},ye=async()=>{if(!(!o.pythonBackendUrl||!window.confirm(P(s,"confirmDelete"))))try{await ty(o.pythonBackendUrl),$()}catch(L){console.error(L)}},E=()=>{r(L=>({...L,customConfig:{endpoint:gt,headers:ht,body:mt}}))},ke=()=>{I(L=>({...L,custom_config:{endpoint:gt,headers:ht,body:mt}}))};return e?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:g.jsxs("div",{className:"bg-slate-900 border border-slate-700 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[g.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-800 bg-slate-900 flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ao,{className:"text-indigo-500",size:20}),g.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:P(s,"settingsTitle")})]}),g.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:g.jsx(fl,{size:20})})]}),g.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar flex-1",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-300",children:[g.jsx(Uu,{size:14}),P(s,"language")]}),g.jsxs("select",{value:o.language,onChange:L=>r({...o,language:L.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-sm text-slate-200 focus:border-indigo-500 focus:outline-none",children:[g.jsx("option",{value:"en",children:"English"}),g.jsx("option",{value:"zh",children:" (Chinese)"}),g.jsx("option",{value:"ja",children:" (Japanese)"}),g.jsx("option",{value:"ko",children:" (Korean)"})]})]}),g.jsx("hr",{className:"border-slate-800"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2 text-slate-200 font-medium",children:[g.jsx(ju,{size:18,className:"text-emerald-500"}),g.jsx("span",{children:P(s,"usePythonBackend")})]}),g.jsx("button",{onClick:()=>r(L=>({...L,usePythonBackend:!L.usePythonBackend})),className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:o.usePythonBackend?g.jsx(Xu,{size:28,className:"text-indigo-500"}):g.jsx(Ku,{size:28,className:"text-slate-600"})})]}),o.usePythonBackend&&g.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-top-2 duration-200",children:[g.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700/50 space-y-3",children:[g.jsx("p",{className:"text-[11px] text-slate-400",children:P(s,"backendHint")}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("label",{className:"text-xs font-medium text-slate-300 block",children:P(s,"pythonBackendUrl")}),g.jsxs("button",{onClick:$,className:"text-[10px] flex items-center gap-1 text-indigo-400 hover:text-indigo-300",children:[g.jsx(cl,{size:10})," Refresh"]})]}),g.jsx("input",{type:"text",value:o.pythonBackendUrl||"http://127.0.0.1:8000",onChange:L=>r({...o,pythonBackendUrl:L.target.value}),placeholder:"http://127.0.0.1:8000",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2 text-sm text-slate-200 font-mono focus:border-indigo-500 focus:outline-none"})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:P(s,"manageProviders")}),g.jsxs("button",{onClick:()=>{j(),y(!0)},className:"px-2 py-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded text-xs flex items-center gap-1 transition-colors",children:[g.jsx(qu,{size:12})," ",P(s,"addProvider")]})]}),m&&g.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700 space-y-3 animate-in fade-in zoom-in-95 duration-100",children:[g.jsx("div",{className:"text-xs font-bold text-slate-300 uppercase mb-2",children:v?P(s,"editProvider"):P(s,"addProvider")}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("input",{placeholder:P(s,"providerName"),className:`w-full bg-slate-950 border rounded p-2 text-xs text-white ${D.name?"border-red-500":"border-slate-700"}`,value:w.name,onChange:L=>I({...w,name:L.target.value})}),D.name&&g.jsx("p",{className:"text-[9px] text-red-400",children:P(s,"requiredField")})]}),g.jsxs("select",{className:"bg-slate-950 border border-slate-700 rounded p-2 text-xs text-white",value:w.provider,onChange:L=>I({...w,provider:L.target.value}),children:[g.jsx("option",{value:"google",children:"Google Gemini"}),g.jsx("option",{value:"openai",children:"OpenAI"}),g.jsx("option",{value:"anthropic",children:"Anthropic Claude"}),g.jsx("option",{value:"custom",children:"Custom / Local"})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("input",{type:"password",placeholder:v?`${P(s,"apiKey")} (${P(s,"leaveEmptyToKeep")||"Leave empty to keep current"})`:P(s,"apiKey"),className:`w-full bg-slate-950 border rounded p-2 text-xs text-white ${D.api_key?"border-red-500":"border-slate-700"}`,value:w.api_key,onChange:L=>I({...w,api_key:L.target.value})}),D.api_key&&g.jsx("p",{className:"text-[9px] text-red-400",children:P(s,"requiredField")})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("input",{placeholder:P(s,"modelName"),className:`w-full bg-slate-950 border rounded p-2 text-xs text-white ${D.model_name?"border-red-500":"border-slate-700"}`,value:w.model_name,onChange:L=>I({...w,model_name:L.target.value})}),D.model_name&&g.jsx("p",{className:"text-[9px] text-red-400",children:P(s,"requiredField")})]}),w.provider==="custom"&&g.jsxs(g.Fragment,{children:[g.jsx("input",{placeholder:P(s,"baseUrl"),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-xs text-white",value:w.base_url,onChange:L=>I({...w,base_url:L.target.value})}),g.jsxs("div",{className:"border border-slate-700 rounded-lg bg-slate-900/50 overflow-hidden",children:[g.jsxs("button",{onClick:()=>R(!k),className:"w-full flex items-center justify-between p-2 bg-slate-800/30 hover:bg-slate-800/50 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-medium text-slate-300 uppercase tracking-wide",children:[g.jsx(Io,{size:12,className:"text-indigo-400"}),P(s,"advancedSettings")]}),k?g.jsx(_o,{size:12,className:"text-slate-500"}):g.jsx(ko,{size:12,className:"text-slate-500"})]}),k&&g.jsxs("div",{className:"p-3 space-y-3 animate-in slide-in-from-top-1",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[9px] uppercase font-bold text-slate-500",children:P(s,"apiEndpoint")}),g.jsx("input",{type:"text",value:((Ie=w.custom_config)==null?void 0:Ie.endpoint)||gt,onChange:L=>I({...w,custom_config:{...w.custom_config,endpoint:L.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded p-1.5 text-[10px] text-slate-300 font-mono",placeholder:"/chat/completions"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[9px] uppercase font-bold text-slate-500",children:P(s,"apiHeaders")}),g.jsx("textarea",{value:((fe=w.custom_config)==null?void 0:fe.headers)||ht,onChange:L=>I({...w,custom_config:{...w.custom_config,headers:L.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded p-1.5 text-[10px] text-slate-300 font-mono h-16 resize-none",spellCheck:!1})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[9px] uppercase font-bold text-slate-500",children:P(s,"apiBody")}),g.jsx("textarea",{value:((Ve=w.custom_config)==null?void 0:Ve.body)||mt,onChange:L=>I({...w,custom_config:{...w.custom_config,body:L.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded p-1.5 text-[10px] text-slate-300 font-mono h-24 resize-none",spellCheck:!1})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:ke,className:"text-[9px] text-indigo-400 hover:text-indigo-300 hover:underline",children:P(s,"resetDefault")})})]})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[g.jsx("button",{onClick:j,className:"px-3 py-1.5 text-xs text-slate-400 hover:text-white border border-transparent hover:border-slate-700 rounded",children:P(s,"settingsCancel")}),g.jsx("button",{onClick:xe,className:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded text-xs font-medium",children:v?P(s,"update"):P(s,"settingsSave")})]})]}),g.jsxs("div",{className:"space-y-2",children:[p?g.jsx("div",{className:"text-center text-xs text-slate-500 py-4",children:P(s,"loading")}):l.map(L=>{const me=L.id===o.activeBackendConfigId;return g.jsx("div",{className:`p-3 rounded-lg border flex items-center justify-between transition-colors ${me?"bg-indigo-900/10 border-indigo-500/40":"bg-slate-800/30 border-slate-700"}`,children:x===L.id?g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("span",{className:"text-xs text-red-300 font-medium",children:P(s,"confirmDelete")}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>A(null),className:"px-2 py-1 text-xs bg-slate-700 hover:bg-slate-600 rounded text-slate-200",children:P(s,"no")}),g.jsx("button",{onClick:()=>C(L.id),className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-500 rounded text-white",children:P(s,"yes")})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`font-semibold text-sm ${me?"text-white":"text-slate-200"}`,children:L.name}),me&&g.jsxs("span",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-indigo-500/20 text-indigo-300 text-[10px] rounded border border-indigo-500/30 font-medium",children:[g.jsx(To,{size:10}),P(s,"isDefault")]})]}),g.jsxs("div",{className:"text-[10px] text-slate-400 mt-0.5 flex gap-2",children:[g.jsx("span",{className:"uppercase font-medium tracking-wide",children:L.provider}),g.jsx("span",{children:""}),g.jsx("span",{className:"font-mono text-slate-500",children:L.model_name})]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[!me&&g.jsx("button",{onClick:()=>Y(L.id),className:"p-1.5 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition-colors text-[10px] uppercase font-bold tracking-wider",title:P(s,"setAsDefault"),children:P(s,"setAsDefault")}),g.jsx("button",{onClick:()=>ce(L),className:"p-1.5 text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10 rounded transition-colors",title:P(s,"editProvider"),children:g.jsx(Ou,{size:14})}),g.jsx("button",{onClick:()=>A(L.id),className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:P(s,"deleteConfig"),children:g.jsx(Qu,{size:14})})]})]})},L.id)}),l.length===0&&!p&&g.jsx("p",{className:"text-center text-xs text-slate-500 italic py-2",children:"No providers configured"})]})]}),g.jsx("hr",{className:"border-slate-800"}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:P(s,"githubIntegration")}),g.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700/50 flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-xs text-slate-400",children:"Status"}),g.jsx("div",{className:"flex items-center gap-1.5",children:d.has_token?g.jsxs(g.Fragment,{children:[g.jsx(To,{size:12,className:"text-emerald-500"}),g.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:P(s,"githubStatusConfigured")})]}):g.jsxs(g.Fragment,{children:[g.jsx(yn,{size:12,className:"text-amber-500"}),g.jsx("span",{className:"text-xs text-amber-400 font-medium",children:P(s,"githubStatusNotConfigured")})]})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"password",placeholder:P(s,"githubTokenPlaceholder"),className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg p-2 text-xs text-white",value:M,onChange:L=>_(L.target.value)}),g.jsx("button",{onClick:_e,disabled:!M,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded text-xs whitespace-nowrap",children:P(s,"saveToken")})]}),d.has_token&&g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:ye,className:"text-[10px] text-red-400 hover:text-red-300 hover:underline",children:P(s,"deleteToken")})})]})]})]})]}),!o.usePythonBackend&&g.jsxs(g.Fragment,{children:[g.jsx("hr",{className:"border-slate-800"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:P(s,"provider")}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("button",{onClick:()=>r({...o,provider:"google",baseUrl:""}),className:`p-3 rounded-xl border flex items-center justify-center gap-2 transition-all
                                        ${o.provider==="google"?"bg-indigo-600/20 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:g.jsx("span",{className:"font-medium",children:P(s,"googleGemini")})}),g.jsx("button",{onClick:()=>r({...o,provider:"custom"}),className:`p-3 rounded-xl border flex items-center justify-center gap-2 transition-all
                                        ${o.provider==="custom"?"bg-emerald-600/20 border-emerald-500 text-emerald-200":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:g.jsx("span",{className:"font-medium",children:P(s,"customLocal")})})]})]}),g.jsxs("div",{className:"space-y-4",children:[o.provider==="custom"&&g.jsxs("div",{className:"space-y-1",children:[g.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-300",children:[g.jsx(Lu,{size:14}),P(s,"apiKey")]}),g.jsx("input",{type:"password",value:o.apiKey,onChange:L=>r({...o,apiKey:L.target.value}),placeholder:"sk-...",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-sm text-slate-200 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500/50"}),g.jsx("p",{className:"text-[10px] text-slate-500",children:P(s,"apiKeyOptional")})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-300",children:[g.jsx(Ao,{size:14}),P(s,"modelName")]}),g.jsx("input",{type:"text",value:o.modelName,onChange:L=>r({...o,modelName:L.target.value}),placeholder:o.provider==="google"?"gemini-2.5-flash":"llama3:latest",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-sm text-slate-200 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500/50"}),g.jsx("p",{className:"text-[10px] text-slate-500",children:o.provider==="google"?P(s,"modelHintGoogle"):P(s,"modelHintCustom")})]}),o.provider==="custom"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"space-y-1",children:[g.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-300",children:[g.jsx(Wu,{size:14}),P(s,"baseUrl")]}),g.jsx("input",{type:"text",value:o.baseUrl,onChange:L=>r({...o,baseUrl:L.target.value}),placeholder:"http://localhost:11434/v1",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-sm text-slate-200 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500/50 font-mono"}),g.jsxs("div",{className:"bg-amber-950/30 border border-amber-900/50 rounded-lg p-3 flex gap-2 mt-2",children:[g.jsx(yn,{className:"text-amber-500 flex-shrink-0",size:14}),g.jsx("p",{className:"text-[10px] text-amber-200/80 leading-relaxed",children:P(s,"corsWarning")})]})]}),g.jsxs("div",{className:"border border-slate-800 rounded-xl bg-slate-900/50 overflow-hidden",children:[g.jsxs("button",{onClick:()=>G(!U),className:"w-full flex items-center justify-between p-3 bg-slate-800/30 hover:bg-slate-800/50 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-300",children:[g.jsx(Io,{size:14,className:"text-indigo-400"}),P(s,"advancedSettings")]}),U?g.jsx(_o,{size:14,className:"text-slate-500"}):g.jsx(ko,{size:14,className:"text-slate-500"})]}),U&&g.jsxs("div",{className:"p-4 space-y-4 animate-in slide-in-from-top-2",children:[g.jsx("p",{className:"text-[10px] text-slate-500",children:P(s,"advancedHint")}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:P(s,"apiEndpoint")}),g.jsx("input",{type:"text",value:((Se=o.customConfig)==null?void 0:Se.endpoint)||gt,onChange:L=>r({...o,customConfig:{...o.customConfig,endpoint:L.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-xs text-slate-300 font-mono",placeholder:"/chat/completions"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:P(s,"apiHeaders")}),g.jsx("textarea",{value:((Re=o.customConfig)==null?void 0:Re.headers)||ht,onChange:L=>r({...o,customConfig:{...o.customConfig,headers:L.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-xs text-slate-300 font-mono h-24 resize-none",spellCheck:!1})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:P(s,"apiBody")}),g.jsx("textarea",{value:((He=o.customConfig)==null?void 0:He.body)||mt,onChange:L=>r({...o,customConfig:{...o.customConfig,body:L.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-xs text-slate-300 font-mono h-32 resize-none",spellCheck:!1})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:E,className:"text-[10px] text-indigo-400 hover:text-indigo-300 hover:underline",children:P(s,"resetDefault")})})]})]})]})]})]})]}),g.jsxs("div",{className:"p-5 bg-slate-900 border-t border-slate-800 flex justify-end gap-3 flex-shrink-0",children:[g.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800 transition-colors",children:P(s,"settingsCancel")}),g.jsxs("button",{onClick:K,className:"px-4 py-2 rounded-lg text-sm font-medium bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-900/20 flex items-center gap-2 transition-colors",children:[g.jsx(dl,{size:16}),P(s,"settingsSave")]})]})]})}):null},iy=30,ii=20,oy=24,oi=210,ry="#1e293b",sy=({workflow:e,language:t,onOpenSettings:n,isConfigured:i,onUpdateWorkflow:o,onAskAi:r,issues:s=[],resolveWidgetNames:l,activeTab:c,onTabChange:d})=>{const[f,p]=q.useState(!1),[h,m]=q.useState({x:0,y:0,k:1}),[y,v]=q.useState(!1),[S,x]=q.useState({x:0,y:0}),A=q.useRef(null),[k,R]=q.useState(!1),[w,I]=q.useState(""),[D,H]=q.useState(!1),[M,_]=q.useState(null),[U,G]=q.useState([]),$=()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2)),p(!0),setTimeout(()=>p(!1),2e3)},K=()=>{const T=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),B=URL.createObjectURL(T),z=document.createElement("a");z.href=B,z.download=`workflow_${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(B)},Y=T=>{var Ce,ue,b;let B=oi;(Array.isArray(T.size)&&T.size.length>=1||T.size&&typeof T.size=="object"&&"0"in T.size)&&(B=Number(T.size[0])),B<oi&&(B=oi);const z=((Ce=T.inputs)==null?void 0:Ce.length)||0,X=((ue=T.outputs)==null?void 0:ue.length)||0,Q=((b=T.widgets_values)==null?void 0:b.length)||0,ee=Math.max(z,X)*ii,he=Q*(oy+4);let re=iy+ee+he+20;return(Array.isArray(T.size)&&T.size.length>=2||T.size&&typeof T.size=="object"&&"1"in T.size)&&(re=Math.max(re,Number(T.size[1]))),{w:B,h:re}},ce=()=>{if(!e||!e.nodes||e.nodes.length===0)return;const T=JSON.parse(JSON.stringify(e)),B=T.nodes;if(B.length===0)return;let z=1/0,X=-1/0,Q=1/0,ee=-1/0;B.forEach(N=>{N.pos&&(z=Math.min(z,N.pos[0]),X=Math.max(X,N.pos[0]),Q=Math.min(Q,N.pos[1]),ee=Math.max(ee,N.pos[1]))});const he=(z+X)/2,ge=(Q+ee)/2,re=1.1;B.forEach(N=>{N.pos&&(N.pos[0]=he+(N.pos[0]-he)*re,N.pos[1]=ge+(N.pos[1]-ge)*re)});const Ce=100,ue=50,b=new Map;B.forEach(N=>{b.set(N.id,Y(N))});for(let N=0;N<Ce;N++){let O=!1;for(let J=0;J<B.length;J++){const ne=B[J],Ee=b.get(ne.id),Ke=ne.pos[0]+Ee.w/2,Ue=ne.pos[1]+Ee.h/2;for(let $e=J+1;$e<B.length;$e++){const Xe=B[$e],Te=b.get(Xe.id),at=Xe.pos[0]+Te.w/2,Qe=Xe.pos[1]+Te.h/2;let jt=Ke-at,en=Ue-Qe;Math.abs(jt)<.1&&Math.abs(en)<.1&&(jt=Math.random()-.5,en=Math.random()-.5);const ho=Ee.w/2+Te.w/2+ue,mo=Ee.h/2+Te.h/2+ue,go=Math.abs(jt),yo=Math.abs(en);if(go<ho&&yo<mo){O=!0;const xo=ho-go,vo=mo-yo;if(xo<vo){const Ft=jt>0?1:-1,Bt=xo/2;ne.pos[0]+=Ft*Bt,Xe.pos[0]-=Ft*Bt}else{const Ft=en>0?1:-1,Bt=vo/2;ne.pos[1]+=Ft*Bt,Xe.pos[1]-=Ft*Bt}}}}if(!O)break}B.forEach(N=>{N.pos&&(N.pos[0]=Math.round(N.pos[0]),N.pos[1]=Math.round(N.pos[1]))}),o(T)},j=()=>{H(!0)},le=()=>{H(!1),I(JSON.stringify(e,null,2)),R(!0)},xe=()=>{try{const T=JSON.parse(w),B={id:Date.now().toString(),timestamp:Date.now(),name:`${P(t,"version")} ${U.length+1}`,data:e};G(z=>[B,...z]),o(T),R(!1),_(null)}catch(T){_(T.message)}},C=T=>{window.confirm(P(t,"restoreConfirm"))&&(o(T.data),I(JSON.stringify(T.data,null,2)))},_e=()=>{const T=`I am trying to edit the workflow JSON manually but I got this error: "${M}". 

Here is the broken JSON I wrote:
\`\`\`json
${w}
\`\`\`

Please fix it and return the valid JSON.`;r(T),_(null)},ye=q.useMemo(()=>{const T=[...s];if(!e||!Array.isArray(e.nodes))return T.push({id:"critical-structure",nodeId:null,severity:"error",message:P(t,"invalidJsonText"),fixSuggestion:P(t,"askAiFix")}),{issues:T,nodeCount:0,linkCount:0,nodeTypes:{}};const B=e.nodes.length,z=Array.isArray(e.links)?e.links.length:0,X=e.nodes.reduce((Q,ee)=>(ee&&ee.type&&(Q[ee.type]=(Q[ee.type]||0)+1),Q),{});return{issues:T,nodeCount:B,linkCount:z,nodeTypes:X}},[e,t,s]),E=T=>{if(c!=="preview")return;const z=Math.min(Math.max(.1,h.k-T.deltaY*.001),5);m(X=>({...X,k:z}))},ke=T=>{c==="preview"&&(T.button===0||T.button===1)&&(v(!0),x({x:T.clientX,y:T.clientY}))},Ie=T=>{if(!y||c!=="preview")return;const B=T.clientX-S.x,z=T.clientY-S.y;m(X=>({...X,x:X.x+B,y:X.y+z})),x({x:T.clientX,y:T.clientY})},fe=()=>{v(!1)},Ve=()=>{var N,O,J;if(!((N=e==null?void 0:e.nodes)!=null&&N.length))return;let T=1/0,B=1/0,z=-1/0,X=-1/0;if(e.nodes.forEach(ne=>{if(!ne.pos||!Array.isArray(ne.pos))return;const{w:Ee,h:Ke}=Y(ne),Ue=ne.pos[0],$e=ne.pos[1];T=Math.min(T,Ue),B=Math.min(B,$e),z=Math.max(z,Ue+Ee),X=Math.max(X,$e+Ke)}),T===1/0)return;const Q=50,ee=z-T+Q*2,he=X-B+Q*2,ge=((O=A.current)==null?void 0:O.clientWidth)||800,re=((J=A.current)==null?void 0:J.clientHeight)||600,Ce=ge/ee,ue=re/he,b=Math.min(Ce,ue,1);m({x:-T*b+(ge-ee*b)/2+Q*b,y:-B*b+(re-he*b)/2+Q*b,k:b})};q.useEffect(()=>{e&&c==="preview"&&setTimeout(Ve,100)},[e,c]);const Se=(T,B,z)=>{if(!T||!T.pos||!Array.isArray(T.pos))return{x:0,y:0};const{w:X}=Y(T),Q=z?T.pos[0]-4:T.pos[0]+X+4,ee=T.pos[1]+41+B*ii;return{x:Q,y:ee}},Re=q.useMemo(()=>{const T=new Map;return e&&Array.isArray(e.nodes)&&e.nodes.forEach(B=>T.set(Number(B.id),B)),T},[e]),He=()=>!e||!Array.isArray(e.nodes)||e.nodes.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 space-y-2",children:[g.jsx(Eo,{size:32,className:"opacity-20"}),g.jsx("p",{children:P(t,"emptyWorkflow")})]}):g.jsxs("div",{ref:A,className:"w-full h-full overflow-hidden relative bg-slate-950 cursor-grab active:cursor-grabbing select-none",onMouseDown:ke,onMouseMove:Ie,onMouseUp:fe,onMouseLeave:fe,onWheel:E,style:{backgroundImage:`radial-gradient(${ry} 1px, transparent 1px)`,backgroundSize:`${20*h.k}px ${20*h.k}px`,backgroundPosition:`${h.x}px ${h.y}px`},children:[g.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-20",children:[g.jsx("button",{onClick:ce,className:"p-2 bg-slate-800 hover:bg-slate-700 text-white rounded shadow border border-slate-700",title:"Fix Overlaps & Expand",children:g.jsx(Vu,{size:16})}),g.jsx("button",{onClick:Ve,className:"p-2 bg-slate-800 hover:bg-slate-700 text-white rounded shadow border border-slate-700",title:"Fit to Screen",children:g.jsx(Bu,{size:16})}),g.jsx("button",{onClick:()=>m(T=>({...T,k:Math.min(T.k+.1,5)})),className:"p-2 bg-slate-800 hover:bg-slate-700 text-white rounded shadow border border-slate-700",children:g.jsx(ec,{size:16})}),g.jsx("button",{onClick:()=>m(T=>({...T,k:Math.max(T.k-.1,.1)})),className:"p-2 bg-slate-800 hover:bg-slate-700 text-white rounded shadow border border-slate-700",children:g.jsx(tc,{size:16})})]}),g.jsxs("div",{className:"absolute top-0 left-0 origin-top-left",style:{transform:`translate(${h.x}px, ${h.y}px) scale(${h.k})`},children:[g.jsx("svg",{className:"overflow-visible pointer-events-none absolute top-0 left-0 z-0",style:{width:"1px",height:"1px",maxWidth:"none"},children:Array.isArray(e.links)&&e.links.map(T=>{const B=Re.get(Number(T[1])),z=Re.get(Number(T[3]));if(!B||!z)return null;const X=Se(B,T[2],!1),Q=Se(z,T[4],!0);if(isNaN(X.x)||isNaN(X.y)||isNaN(Q.x)||isNaN(Q.y))return null;const ee=Math.abs(Q.x-X.x)*.5,he=X.x+Math.max(ee,30),ge=X.y,re=Q.x-Math.max(ee,30),Ce=Q.y,ue=`M ${X.x} ${X.y} C ${he} ${ge}, ${re} ${Ce}, ${Q.x} ${Q.y}`,b=T[5],N=["#a8a29e","#f87171","#60a5fa","#4ade80","#facc15","#c084fc"];let O="#94a3b8";return typeof b=="string"&&b.length>0?O=N[b.charCodeAt(0)%N.length]:typeof b=="number"&&(O=N[b%N.length]),g.jsx("g",{children:g.jsx("path",{d:ue,stroke:O,strokeWidth:"2.5",fill:"none",className:"opacity-80"})},T[0])})}),e.nodes.map(T=>{var Ce;const B=Array.isArray(T.inputs)?T.inputs:[],z=Array.isArray(T.outputs)?T.outputs:[],X=Array.isArray(T.widgets_values)?T.widgets_values:[],Q=l?l(T):[],{w:ee,h:he}=Y(T),ge=Math.max(B.length,z.length)*ii,re=ye.issues.some(ue=>ue.nodeId===T.id&&ue.severity==="error");return!T.pos||!Array.isArray(T.pos)?null:g.jsxs("div",{className:`absolute rounded-lg shadow-lg flex flex-col overflow-visible border transition-shadow
                                    ${re?"border-red-500 shadow-red-900/20":"border-slate-600 shadow-black/40"}
                                `,style:{transform:`translate(${T.pos[0]}px, ${T.pos[1]}px)`,width:`${ee}px`,height:`${he}px`,backgroundColor:T.bgcolor||"#222",zIndex:10},children:[g.jsxs("div",{className:"h-[30px] px-3 bg-[#333] border-b border-black/50 rounded-t-lg flex items-center justify-between flex-shrink-0",children:[g.jsx("span",{className:"text-xs font-bold text-slate-200 truncate",title:T.type,children:((Ce=T.properties)==null?void 0:Ce["Node name for S&R"])||T.type}),g.jsxs("span",{className:"text-[9px] text-slate-500 font-mono opacity-70",children:["#",T.id]})]}),g.jsxs("div",{className:"flex-1 relative",children:[g.jsxs("div",{className:"relative w-full",style:{height:`${ge}px`},children:[g.jsx("div",{className:"absolute left-0 top-0 w-full flex flex-col pointer-events-none",children:B.map((ue,b)=>{const N=ue.link!==null&&ue.link!==void 0;return g.jsxs("div",{className:"h-[20px] relative flex items-center",children:[g.jsx("div",{className:`absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[10px] h-[10px] rounded-full border border-slate-900 z-20 shrink-0
                                            ${N?"bg-[#b0fb5d]":"bg-[#2a2a2a] border-[#666]"}
                                        `}),g.jsx("span",{className:"ml-3 text-[10px] text-[#aaa] truncate font-medium leading-none",children:ue.name})]},b)})}),g.jsx("div",{className:"absolute right-0 top-0 w-full flex flex-col pointer-events-none",children:z.map((ue,b)=>{const N=ue.links&&ue.links.length>0;return g.jsxs("div",{className:"h-[20px] relative flex items-center justify-end",children:[g.jsx("span",{className:"mr-3 text-[10px] text-[#aaa] truncate font-medium leading-none",children:ue.name}),g.jsx("div",{className:`absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 w-[10px] h-[10px] rounded-full border border-slate-900 z-20 shrink-0
                                            ${N?"bg-[#a95dfb]":"bg-[#2a2a2a] border-[#666]"}
                                        `})]},b)})})]}),X.length>0&&g.jsx("div",{className:"flex flex-col gap-1 mt-2 border-t border-slate-700/30 pt-2 px-2 pb-2",children:X.map((ue,b)=>{const N=typeof ue=="object"?JSON.stringify(ue):String(ue),O=Q[b];return g.jsxs("div",{className:"flex items-center justify-between w-full h-[24px] px-2 bg-[#1a1a1a] rounded border border-[#333] overflow-hidden",children:[O?g.jsx("div",{className:"flex items-center gap-1 overflow-hidden flex-1 mr-2 border-r border-slate-800/50 pr-1",children:g.jsx("span",{className:"text-[9px] text-slate-400 whitespace-nowrap shrink-0 select-none",children:O})}):null,g.jsx("div",{className:`flex items-center ${O?"justify-end max-w-[60%]":"justify-start w-full"}`,children:g.jsx("span",{className:"text-[9px] text-slate-200 font-mono truncate",title:N,children:N})})]},b)})})]})]},T.id)})]})]}),L=()=>g.jsxs("div",{className:"space-y-6 p-6 bg-slate-950 h-full overflow-y-auto custom-scrollbar",children:[g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-800 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-white",children:ye.nodeCount}),g.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:P(t,"statNodes")})]}),g.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-800 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-white",children:ye.linkCount}),g.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:P(t,"statLinks")})]}),g.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-800 text-center",children:[g.jsx("div",{className:`text-lg font-bold ${ye.issues.length>0?"text-amber-400":"text-emerald-400"}`,children:ye.issues.length}),g.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:P(t,"statIssues")})]})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("h4",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[g.jsx(Eo,{size:16,className:"text-indigo-400"}),P(t,"workflowHealth")]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>r(P(t,"explainPrompt")),className:"text-xs flex items-center gap-1.5 px-2 py-1 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded transition-colors",children:[g.jsx(_u,{size:12}),P(t,"explainWorkflow")]}),g.jsxs("button",{onClick:()=>r(P(t,"diagnosePrompt")),className:"text-xs flex items-center gap-1.5 px-2 py-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded transition-colors",children:[g.jsx(xn,{size:12}),P(t,"diagnoseWithAi")]})]})]}),ye.issues.length===0?g.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-6 text-center",children:[g.jsx(wo,{size:24,className:"text-emerald-500 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-emerald-300",children:P(t,"noIssues")})]}):g.jsx("div",{className:"space-y-2",children:ye.issues.map(T=>g.jsxs("div",{className:`p-3 rounded-lg border flex gap-3 items-start ${T.severity==="warning"?"bg-amber-950/20 border-amber-900/30":"bg-red-950/20 border-red-900/30"}`,children:[g.jsx(yn,{size:16,className:T.severity==="warning"?"text-amber-500":"text-red-500"}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm font-medium ${T.severity==="warning"?"text-amber-200":"text-red-200"}`,children:T.message}),T.fixSuggestion&&g.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[g.jsxs("span",{className:"font-semibold",children:[P(t,"tip"),":"]})," ",T.fixSuggestion]})]})]},T.id))})]})]}),me=()=>g.jsxs("div",{className:"flex flex-col h-full bg-slate-950 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-800 bg-slate-900/30",children:[g.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[g.jsx(bu,{size:14}),g.jsx("span",{className:"text-xs font-mono",children:P(t,k?"editMode":"readOnly")})]}),g.jsx("div",{className:"flex items-center gap-2",children:k?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>R(!1),className:"px-3 py-1.5 rounded-md text-slate-400 hover:text-slate-200 hover:bg-slate-800 text-xs transition-colors",children:P(t,"cancelEdit")}),g.jsxs("button",{onClick:xe,className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-emerald-600 hover:bg-emerald-500 text-white text-xs font-medium transition-colors shadow-lg shadow-emerald-900/20",children:[g.jsx(dl,{size:14}),P(t,"saveChanges")]})]}):g.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-medium transition-colors",children:[g.jsx(Hu,{size:14}),P(t,"editJson")]})})]}),g.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[g.jsx("div",{className:"flex-1 relative h-full border-r border-slate-800 min-w-0",children:k?g.jsx("textarea",{value:w,onChange:T=>I(T.target.value),className:"w-full h-full bg-slate-950 p-4 text-xs font-mono text-amber-100 resize-none focus:outline-none leading-relaxed custom-scrollbar",spellCheck:!1}):g.jsx("pre",{className:"w-full h-full text-xs font-mono text-slate-300 bg-slate-950 p-4 overflow-auto custom-scrollbar leading-relaxed",children:JSON.stringify(e,null,2)})}),g.jsxs("div",{className:"w-64 bg-slate-900/20 flex flex-col border-l border-slate-800 flex-shrink-0",children:[g.jsx("div",{className:"p-3 border-b border-slate-800 bg-slate-900/50",children:g.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-300 uppercase tracking-wider",children:[g.jsx(Du,{size:14}),P(t,"checkpoints")]})}),g.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3",children:U.map(T=>g.jsxs("div",{className:"group flex flex-col gap-2 p-3 rounded-lg border border-slate-800 bg-slate-900/50 hover:border-indigo-500/50 hover:bg-slate-800 transition-all",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-xs font-bold text-indigo-300 font-mono",children:T.name}),g.jsx("span",{className:"text-[9px] text-slate-500",children:new Date(T.timestamp).toLocaleTimeString()})]}),g.jsx("div",{className:"flex items-center gap-2 mt-1",children:g.jsxs("button",{onClick:()=>C(T),className:"flex-1 flex items-center justify-center gap-1.5 py-1.5 rounded bg-slate-950 border border-slate-800 hover:bg-indigo-600/10 hover:border-indigo-500/30 text-slate-400 hover:text-indigo-300 text-[10px] transition-all",children:[g.jsx(zu,{size:12}),P(t,"restore")]})})]},T.id))})]})]})]}),Oe=()=>D?g.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:g.jsxs("div",{className:"bg-slate-900 border border-amber-500/30 w-full max-w-sm rounded-xl p-6 shadow-2xl",children:[g.jsx("h3",{className:"text-lg font-bold text-amber-100 mb-4",children:P(t,"editWarningTitle")}),g.jsx("p",{className:"text-sm text-slate-300 mb-6",children:P(t,"editWarningText")}),g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 rounded-lg text-sm text-slate-400 hover:text-white",children:P(t,"cancelEdit")}),g.jsx("button",{onClick:le,className:"px-4 py-2 rounded-lg text-sm bg-amber-600 hover:bg-amber-500 text-white font-medium",children:P(t,"confirmEdit")})]})]})}):null,Pe=()=>M?g.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:g.jsxs("div",{className:"bg-slate-900 border border-red-500/30 w-full max-w-sm rounded-xl p-6 shadow-2xl",children:[g.jsx("h3",{className:"text-lg font-bold text-red-100 mb-4",children:P(t,"invalidJsonTitle")}),g.jsx("p",{className:"text-sm text-slate-300 mb-2",children:P(t,"invalidJsonText")}),g.jsx("div",{className:"bg-black/30 p-3 rounded text-[10px] font-mono text-red-300 mb-6 max-h-24 overflow-auto",children:M}),g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 rounded-lg text-sm text-slate-400 hover:text-white",children:P(t,"cancelEdit")}),g.jsxs("button",{onClick:_e,className:"px-4 py-2 rounded-lg text-sm bg-indigo-600 hover:bg-indigo-500 text-white font-medium flex items-center gap-2",children:[g.jsx(xn,{size:14}),P(t,"askAiFix")]})]})]})}):null;return g.jsxs("div",{className:"h-full flex flex-col bg-slate-950 overflow-hidden relative",children:[g.jsxs("div",{className:"border-b border-slate-800 bg-slate-900/50 flex flex-col z-10 shadow-sm backdrop-blur-md flex-shrink-0",children:[g.jsxs("div",{className:"h-14 flex items-center justify-between px-4 sm:px-6",children:[g.jsxs("div",{className:"flex items-center gap-2.5",children:[g.jsx("div",{className:"p-1.5 bg-indigo-500/10 rounded-md border border-indigo-500/20 flex-shrink-0",children:g.jsx(ku,{className:"text-indigo-400",size:14})}),g.jsx("h3",{className:"text-xs font-bold text-slate-100 tracking-widest uppercase font-mono truncate",children:P(t,"managerTitle")})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[!i&&g.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-2 py-1 rounded text-[10px] font-medium hover:bg-red-500/20 transition-colors",children:[g.jsx(wu,{size:12}),g.jsx("span",{className:"hidden sm:inline",children:P(t,"setupRequired")})]}),g.jsx("button",{onClick:$,className:"p-2 text-slate-400 hover:text-indigo-100 hover:bg-slate-800 rounded border border-slate-700 hover:border-indigo-500 transition-all relative group",title:P(t,"copyJson"),children:f?g.jsx(wo,{size:14,className:"text-emerald-400"}):g.jsx(Iu,{size:14})}),g.jsx("button",{onClick:K,className:"p-2 text-slate-400 hover:text-indigo-100 hover:bg-slate-800 rounded border border-slate-700 hover:border-indigo-500 transition-all",title:P(t,"exportJson"),children:g.jsx(Au,{size:14})}),g.jsx("div",{className:"w-px h-4 bg-slate-700 mx-1"}),g.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded border border-slate-700 hover:border-indigo-500 transition-all",title:P(t,"settingsTitle"),children:g.jsx(Yu,{size:14})})]})]}),g.jsxs("div",{className:"flex px-4 gap-6",children:[g.jsx("button",{onClick:()=>d("preview"),className:`pb-3 text-[10px] font-bold uppercase tracking-wider border-b-2 transition-colors ${c==="preview"?"border-indigo-500 text-indigo-400":"border-transparent text-slate-500 hover:text-slate-300"}`,children:P(t,"tabOverview")}),g.jsx("button",{onClick:()=>d("analysis"),className:`pb-3 text-[10px] font-bold uppercase tracking-wider border-b-2 transition-colors ${c==="analysis"?"border-indigo-500 text-indigo-400":"border-transparent text-slate-500 hover:text-slate-300"}`,children:P(t,"tabDiagnostics")}),g.jsx("button",{onClick:()=>d("json"),className:`pb-3 text-[10px] font-bold uppercase tracking-wider border-b-2 transition-colors ${c==="json"?"border-indigo-500 text-indigo-400":"border-transparent text-slate-500 hover:text-slate-300"}`,children:P(t,"tabJson")})]})]}),g.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[c==="preview"&&He(),c==="analysis"&&L(),c==="json"&&me()]}),g.jsx(Oe,{}),g.jsx(Pe,{})]})},ly={last_node_id:2,last_link_id:0,nodes:[{id:1,type:"LoadImage",pos:[100,100],size:{0:315,1:314},flags:{},order:0,mode:0,outputs:[{name:"IMAGE",type:"IMAGE",links:[]},{name:"MASK",type:"MASK",links:[]}],properties:{"Node name for S&R":"LoadImage"},widgets_values:["example.png","image"]}],links:[],groups:[],config:{},extra:{},version:.4};var ay={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uy,cy;function dy(){return{geminiUrl:uy,vertexUrl:cy}}function fy(e,t,n,i){var o,r;if(!(e!=null&&e.baseUrl)){const s=dy();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(r=s.geminiUrl)!==null&&r!==void 0?r:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class st{}function V(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const r=t[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(e,t,n){for(let r=0;r<t.length-1;r++){const s=t[r];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[l])){const c=e[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,t.slice(r+1),n[d])}else for(const d of c)u(d,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in e||(e[l]=[{}]);const c=e[l];u(c[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const o=t[i];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in e){const s=e[r];return Array.isArray(s)?s.map(l=>a(l,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function py(e,t){for(const[n,i]of Object.entries(t)){const o=n.split("."),r=i.split("."),s=new Set;let l=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){l=c;break}if(l!==-1&&r.length>l)for(let c=l;c<r.length;c++){const d=r[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Ti(e,o,r,0,s)}}function Ti(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;const r=t[i];if(r.endsWith("[]")){const s=r.slice(0,-2),l=e;if(s in l&&Array.isArray(l[s]))for(const c of l[s])Ti(c,t,n,i+1,o)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,l=Object.keys(s).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(const d of l)c[d]=s[d];for(const[d,f]of Object.entries(c)){const p=[];for(const h of n.slice(i))h==="*"?p.push(d):p.push(h);u(s,p,f)}for(const d of l)delete s[d]}}else{const s=e;r in s&&Ti(s[r],t,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function io(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hy(e){const t={},n=a(e,["operationName"]);n!=null&&u(t,["operationName"],n);const i=a(e,["resourceName"]);return i!=null&&u(t,["_url","resourceName"],i),t}function my(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);r!=null&&u(t,["error"],r);const s=a(e,["response","generateVideoResponse"]);return s!=null&&u(t,["response"],yy(s)),t}function gy(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);r!=null&&u(t,["error"],r);const s=a(e,["response"]);return s!=null&&u(t,["response"],xy(s)),t}function yy(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>vy(s))),u(t,["generatedVideos"],r)}const i=a(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&u(t,["raiMediaFilteredReasons"],o),t}function xy(e){const t={},n=a(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Sy(s))),u(t,["generatedVideos"],r)}const i=a(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&u(t,["raiMediaFilteredReasons"],o),t}function vy(e){const t={},n=a(e,["video"]);return n!=null&&u(t,["video"],ky(n)),t}function Sy(e){const t={},n=a(e,["_self"]);return n!=null&&u(t,["video"],Iy(n)),t}function Cy(e){const t={},n=a(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function Ey(e){const t={},n=a(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function Ty(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);r!=null&&u(t,["error"],r);const s=a(e,["response"]);return s!=null&&u(t,["response"],wy(s)),t}function wy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["parent"]);i!=null&&u(t,["parent"],i);const o=a(e,["documentName"]);return o!=null&&u(t,["documentName"],o),t}function xa(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);r!=null&&u(t,["error"],r);const s=a(e,["response"]);return s!=null&&u(t,["response"],_y(s)),t}function _y(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["parent"]);i!=null&&u(t,["parent"],i);const o=a(e,["documentName"]);return o!=null&&u(t,["documentName"],o),t}function ky(e){const t={},n=a(e,["uri"]);n!=null&&u(t,["uri"],n);const i=a(e,["encodedVideo"]);i!=null&&u(t,["videoBytes"],io(i));const o=a(e,["encoding"]);return o!=null&&u(t,["mimeType"],o),t}function Iy(e){const t={},n=a(e,["gcsUri"]);n!=null&&u(t,["uri"],n);const i=a(e,["bytesBase64Encoded"]);i!=null&&u(t,["videoBytes"],io(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ar;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ar||(Ar={}));var br;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(br||(br={}));var Nr;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Nr||(Nr={}));var ct;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(ct||(ct={}));var Rr;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Rr||(Rr={}));var Pr;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Pr||(Pr={}));var Mr;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Mr||(Mr={}));var Dr;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Dr||(Dr={}));var Lr;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Lr||(Lr={}));var Ur;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Ur||(Ur={}));var Fr;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Fr||(Fr={}));var Br;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Br||(Br={}));var Gr;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Gr||(Gr={}));var Vr;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Vr||(Vr={}));var Hr;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Hr||(Hr={}));var Or;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Or||(Or={}));var qr;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(qr||(qr={}));var zr;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zr||(zr={}));var $r;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($r||($r={}));var Jr;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Jr||(Jr={}));var Wr;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Wr||(Wr={}));var Tn;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Tn||(Tn={}));var Yr;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Yr||(Yr={}));var Kr;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Kr||(Kr={}));var Xr;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xr||(Xr={}));var wi;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wi||(wi={}));var Qr;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Qr||(Qr={}));var Zr;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Zr||(Zr={}));var _i;(function(e){e.COLLECTION="COLLECTION"})(_i||(_i={}));var jr;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(jr||(jr={}));var es;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(es||(es={}));var ts;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ts||(ts={}));var ns;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(ns||(ns={}));var is;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(is||(is={}));var os;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(os||(os={}));var rs;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(rs||(rs={}));var ss;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ss||(ss={}));var ls;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ls||(ls={}));var as;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(as||(as={}));var us;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(us||(us={}));var cs;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(cs||(cs={}));var ds;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(ds||(ds={}));var fs;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"})(fs||(fs={}));var ps;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(ps||(ps={}));var hs;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(hs||(hs={}));var ms;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(ms||(ms={}));var gs;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(gs||(gs={}));var ys;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ys||(ys={}));var xs;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(xs||(xs={}));var vs;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(vs||(vs={}));var Ss;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ss||(Ss={}));var Cs;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Cs||(Cs={}));var Es;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Es||(Es={}));var Ts;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ts||(Ts={}));var ws;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ws||(ws={}));var _s;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(_s||(_s={}));var kt;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(kt||(kt={}));class ki{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ht{get text(){var t,n,i,o,r,s,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(c=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[m,y]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var t,n,i,o,r,s,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,o,r,s,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,i,o,r,s,l,c,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,o,r,s,l,c,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class ks{}class Is{}class Ay{}class by{}class Ny{}class Ry{}class As{}class bs{}class Ns{}class Py{}class wn{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new wn;let o;const r=t;return n?o=gy(r):o=my(r),Object.assign(i,o),i}}class Rs{}class Ps{}class Ms{}class Ds{}class My{}class Dy{}class Ly{}class oo{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new oo,r=Ty(t);return Object.assign(i,r),i}}class Uy{}class Fy{}class By{}class Gy{}class Ls{}class Vy{get text(){var t,n,i;let o="",r=!1;const s=[];for(const l of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;r=!0,o+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var t,n,i;let o="";const r=[];for(const s of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&r.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Hy{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ro{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new ro,r=xa(t);return Object.assign(i,r),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ae(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function va(e,t){const n=ae(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Sa(e){return Array.isArray(e)?e.map(t=>_n(t)):[_n(e)]}function _n(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Ca(e){const t=_n(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ea(e){const t=_n(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Us(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Ta(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Us(t)):[Us(e)]}function Ii(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Fs(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Bs(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function be(e){if(e==null)throw new Error("ContentUnion is required");return Ii(e)?e:{role:"user",parts:Ta(e)}}function so(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=be(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=be(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>be(n)):[be(t)]}function We(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Fs(e)||Bs(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[be(e)]}const t=[],n=[],i=Ii(e[0]);for(const o of e){const r=Ii(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(o);else{if(Fs(o)||Bs(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:Ta(n)}),t}function Oy(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(ct).includes(n[0].toUpperCase())?n[0].toUpperCase():ct.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(ct).includes(i.toUpperCase())?i.toUpperCase():ct.TYPE_UNSPECIFIED})}}function bt(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&Oy(e.type,t);for(const[s,l]of Object.entries(e))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;t.type=Object.values(ct).includes(l.toUpperCase())?l.toUpperCase():ct.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=bt(l);else if(i.includes(s)){const c=[];for(const d of l){if(d.type=="null"){t.nullable=!0;continue}c.push(bt(d))}t[s]=c}else if(o.includes(s)){const c={};for(const[d,f]of Object.entries(l))c[d]=bt(f);t[s]=c}else{if(s==="additionalProperties")continue;t[s]=l}return t}function lo(e){return bt(e)}function ao(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function uo(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Dt(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=bt(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=bt(t.response));return e}function Lt(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function qy(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function lt(e,t){if(typeof t!="string")throw new Error("name must be a string");return qy(e,t,"cachedContents")}function wa(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ft(e){return io(e)}function zy(e){return e!=null&&typeof e=="object"&&"name"in e}function $y(e){return e!=null&&typeof e=="object"&&"video"in e}function Jy(e){return e!=null&&typeof e=="object"&&"uri"in e}function _a(e){var t;let n;if(zy(e)&&(n=e.name),!(Jy(e)&&(n=e.uri,n===void 0))&&!($y(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ka(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Ia(e){for(const t of["models","tunedModels","publisherModels"])if(Wy(e,t))return e[t];return[]}function Wy(e,t){return e!==null&&typeof e=="object"&&t in e}function Yy(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function Ky(e,t={}){const n=[],i=new Set;for(const o of e){const r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const s=Yy(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Aa(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Xy(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function ba(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let r=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ut(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Na(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qy(e){const t={},n=a(e,["responsesFile"]);n!=null&&u(t,["fileName"],n);const i=a(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>R0(s))),u(t,["inlinedResponses"],r)}const o=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["inlinedEmbedContentResponses"],r)}return t}function Zy(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&u(t,["format"],n);const i=a(e,["gcsDestination","outputUriPrefix"]);i!=null&&u(t,["gcsUri"],i);const o=a(e,["bigqueryDestination","outputUri"]);return o!=null&&u(t,["bigqueryUri"],o),t}function jy(e){const t={},n=a(e,["format"]);n!=null&&u(t,["predictionsFormat"],n);const i=a(e,["gcsUri"]);i!=null&&u(t,["gcsDestination","outputUriPrefix"],i);const o=a(e,["bigqueryUri"]);if(o!=null&&u(t,["bigqueryDestination","outputUri"],o),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function hn(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata","displayName"]);i!=null&&u(t,["displayName"],i);const o=a(e,["metadata","state"]);o!=null&&u(t,["state"],Na(o));const r=a(e,["metadata","createTime"]);r!=null&&u(t,["createTime"],r);const s=a(e,["metadata","endTime"]);s!=null&&u(t,["endTime"],s);const l=a(e,["metadata","updateTime"]);l!=null&&u(t,["updateTime"],l);const c=a(e,["metadata","model"]);c!=null&&u(t,["model"],c);const d=a(e,["metadata","output"]);return d!=null&&u(t,["dest"],Qy(ba(d))),t}function Ai(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["displayName"]);i!=null&&u(t,["displayName"],i);const o=a(e,["state"]);o!=null&&u(t,["state"],Na(o));const r=a(e,["error"]);r!=null&&u(t,["error"],r);const s=a(e,["createTime"]);s!=null&&u(t,["createTime"],s);const l=a(e,["startTime"]);l!=null&&u(t,["startTime"],l);const c=a(e,["endTime"]);c!=null&&u(t,["endTime"],c);const d=a(e,["updateTime"]);d!=null&&u(t,["updateTime"],d);const f=a(e,["model"]);f!=null&&u(t,["model"],f);const p=a(e,["inputConfig"]);p!=null&&u(t,["src"],e0(p));const h=a(e,["outputConfig"]);h!=null&&u(t,["dest"],Zy(ba(h)));const m=a(e,["completionStats"]);return m!=null&&u(t,["completionStats"],m),t}function e0(e){const t={},n=a(e,["instancesFormat"]);n!=null&&u(t,["format"],n);const i=a(e,["gcsSource","uris"]);i!=null&&u(t,["gcsUri"],i);const o=a(e,["bigquerySource","inputUri"]);return o!=null&&u(t,["bigqueryUri"],o),t}function t0(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(t,["fileName"]);i!=null&&u(n,["fileName"],i);const o=a(t,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>N0(e,s))),u(n,["requests","requests"],r)}return n}function n0(e){const t={},n=a(e,["format"]);n!=null&&u(t,["instancesFormat"],n);const i=a(e,["gcsUri"]);i!=null&&u(t,["gcsSource","uris"],i);const o=a(e,["bigqueryUri"]);if(o!=null&&u(t,["bigquerySource","inputUri"],o),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function i0(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function o0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],Ut(e,i)),n}function r0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],Ut(e,i)),n}function s0(e){const t={},n=a(e,["content"]);n!=null&&u(t,["content"],n);const i=a(e,["citationMetadata"]);i!=null&&u(t,["citationMetadata"],l0(i));const o=a(e,["tokenCount"]);o!=null&&u(t,["tokenCount"],o);const r=a(e,["finishReason"]);r!=null&&u(t,["finishReason"],r);const s=a(e,["avgLogprobs"]);s!=null&&u(t,["avgLogprobs"],s);const l=a(e,["groundingMetadata"]);l!=null&&u(t,["groundingMetadata"],l);const c=a(e,["index"]);c!=null&&u(t,["index"],c);const d=a(e,["logprobsResult"]);d!=null&&u(t,["logprobsResult"],d);const f=a(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),u(t,["safetyRatings"],h)}const p=a(e,["urlContextMetadata"]);return p!=null&&u(t,["urlContextMetadata"],p),t}function l0(e){const t={},n=a(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),u(t,["citations"],i)}return t}function Ra(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>B0(r))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function a0(e,t){const n={},i=a(e,["displayName"]);if(t!==void 0&&i!=null&&u(t,["batch","displayName"],i),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function u0(e,t){const n={},i=a(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const o=a(e,["dest"]);return t!==void 0&&o!=null&&u(t,["outputConfig"],jy(Xy(o))),n}function Gs(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],ae(e,i));const o=a(t,["src"]);o!=null&&u(n,["batch","inputConfig"],t0(e,Aa(e,o)));const r=a(t,["config"]);return r!=null&&a0(r,n),n}function c0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["model"],ae(e,i));const o=a(t,["src"]);o!=null&&u(n,["inputConfig"],n0(Aa(e,o)));const r=a(t,["config"]);return r!=null&&u0(r,n),n}function d0(e,t){const n={},i=a(e,["displayName"]);return t!==void 0&&i!=null&&u(t,["batch","displayName"],i),n}function f0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],ae(e,i));const o=a(t,["src"]);o!=null&&u(n,["batch","inputConfig"],v0(e,o));const r=a(t,["config"]);return r!=null&&d0(r,n),n}function p0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],Ut(e,i)),n}function h0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],Ut(e,i)),n}function m0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);return r!=null&&u(t,["error"],r),t}function g0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);return r!=null&&u(t,["error"],r),t}function y0(e,t){const n={},i=a(t,["contents"]);if(i!=null){let r=so(e,i);Array.isArray(r)&&(r=r.map(s=>s)),u(n,["requests[]","request","content"],r)}const o=a(t,["config"]);return o!=null&&(u(n,["_self"],x0(o,n)),py(n,{"requests[].*":"requests[].request.*"})),n}function x0(e,t){const n={},i=a(e,["taskType"]);t!==void 0&&i!=null&&u(t,["requests[]","taskType"],i);const o=a(e,["title"]);t!==void 0&&o!=null&&u(t,["requests[]","title"],o);const r=a(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&u(t,["requests[]","outputDimensionality"],r),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function v0(e,t){const n={},i=a(t,["fileName"]);i!=null&&u(n,["file_name"],i);const o=a(t,["inlinedRequests"]);return o!=null&&u(n,["requests"],y0(e,o)),n}function S0(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function C0(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const i=a(e,["args"]);i!=null&&u(t,["args"],i);const o=a(e,["name"]);if(o!=null&&u(t,["name"],o),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function E0(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&u(t,["allowedFunctionNames"],n);const i=a(e,["mode"]);if(i!=null&&u(t,["mode"],i),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function T0(e,t,n){const i={},o=a(t,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Ra(be(o)));const r=a(t,["temperature"]);r!=null&&u(i,["temperature"],r);const s=a(t,["topP"]);s!=null&&u(i,["topP"],s);const l=a(t,["topK"]);l!=null&&u(i,["topK"],l);const c=a(t,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=a(t,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const f=a(t,["stopSequences"]);f!=null&&u(i,["stopSequences"],f);const p=a(t,["responseLogprobs"]);p!=null&&u(i,["responseLogprobs"],p);const h=a(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const m=a(t,["presencePenalty"]);m!=null&&u(i,["presencePenalty"],m);const y=a(t,["frequencyPenalty"]);y!=null&&u(i,["frequencyPenalty"],y);const v=a(t,["seed"]);v!=null&&u(i,["seed"],v);const S=a(t,["responseMimeType"]);S!=null&&u(i,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&u(i,["responseSchema"],lo(x));const A=a(t,["responseJsonSchema"]);if(A!=null&&u(i,["responseJsonSchema"],A),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=a(t,["safetySettings"]);if(n!==void 0&&k!=null){let $=k;Array.isArray($)&&($=$.map(K=>G0(K))),u(n,["safetySettings"],$)}const R=a(t,["tools"]);if(n!==void 0&&R!=null){let $=Lt(R);Array.isArray($)&&($=$.map(K=>H0(Dt(K)))),u(n,["tools"],$)}const w=a(t,["toolConfig"]);if(n!==void 0&&w!=null&&u(n,["toolConfig"],V0(w)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(t,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],lt(e,I));const D=a(t,["responseModalities"]);D!=null&&u(i,["responseModalities"],D);const H=a(t,["mediaResolution"]);H!=null&&u(i,["mediaResolution"],H);const M=a(t,["speechConfig"]);if(M!=null&&u(i,["speechConfig"],ao(M)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=a(t,["thinkingConfig"]);_!=null&&u(i,["thinkingConfig"],_);const U=a(t,["imageConfig"]);U!=null&&u(i,["imageConfig"],b0(U));const G=a(t,["enableEnhancedCivicAnswers"]);if(G!=null&&u(i,["enableEnhancedCivicAnswers"],G),a(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function w0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>s0(d))),u(t,["candidates"],c)}const o=a(e,["modelVersion"]);o!=null&&u(t,["modelVersion"],o);const r=a(e,["promptFeedback"]);r!=null&&u(t,["promptFeedback"],r);const s=a(e,["responseId"]);s!=null&&u(t,["responseId"],s);const l=a(e,["usageMetadata"]);return l!=null&&u(t,["usageMetadata"],l),t}function _0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],Ut(e,i)),n}function k0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],Ut(e,i)),n}function I0(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function A0(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function b0(e){const t={},n=a(e,["aspectRatio"]);n!=null&&u(t,["aspectRatio"],n);const i=a(e,["imageSize"]);if(i!=null&&u(t,["imageSize"],i),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function N0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["request","model"],ae(e,i));const o=a(t,["contents"]);if(o!=null){let l=We(o);Array.isArray(l)&&(l=l.map(c=>Ra(c))),u(n,["request","contents"],l)}const r=a(t,["metadata"]);r!=null&&u(n,["metadata"],r);const s=a(t,["config"]);return s!=null&&u(n,["request","generationConfig"],T0(e,s,a(n,["request"],{}))),n}function R0(e){const t={},n=a(e,["response"]);n!=null&&u(t,["response"],w0(n));const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["error"]);return o!=null&&u(t,["error"],o),t}function P0(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);if(t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function M0(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);t!==void 0&&o!=null&&u(t,["_query","pageToken"],o);const r=a(e,["filter"]);return t!==void 0&&r!=null&&u(t,["_query","filter"],r),n}function D0(e){const t={},n=a(e,["config"]);return n!=null&&P0(n,t),t}function L0(e){const t={},n=a(e,["config"]);return n!=null&&M0(n,t),t}function U0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>hn(s))),u(t,["batchJobs"],r)}return t}function F0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Ai(s))),u(t,["batchJobs"],r)}return t}function B0(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const r=a(e,["fileData"]);r!=null&&u(t,["fileData"],S0(r));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],C0(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],i0(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function G0(e){const t={},n=a(e,["category"]);if(n!=null&&u(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(e,["threshold"]);return i!=null&&u(t,["threshold"],i),t}function V0(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&u(t,["retrievalConfig"],n);const i=a(e,["functionCallingConfig"]);return i!=null&&u(t,["functionCallingConfig"],E0(i)),t}function H0(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const i=a(e,["fileSearch"]);i!=null&&u(t,["fileSearch"],i);const o=a(e,["codeExecution"]);if(o!=null&&u(t,["codeExecution"],o),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=a(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],I0(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],A0(l));const c=a(e,["googleSearchRetrieval"]);c!=null&&u(t,["googleSearchRetrieval"],c);const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ot;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(ot||(ot={}));class Et{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O0 extends st{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Et(ot.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Gs(this.apiClient,t),i=n._url,o=V("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=h,p.request=m}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(s)i.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=c0(this.apiClient,t);return l=V("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ai(f))}else{const d=Gs(this.apiClient,t);return l=V("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>hn(f))}}async createEmbeddingsInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=f0(this.apiClient,t);return r=V("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>hn(c))}}async get(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=k0(this.apiClient,t);return l=V("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ai(f))}else{const d=_0(this.apiClient,t);return l=V("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>hn(f))}}async cancel(t){var n,i,o,r;let s="",l={};if(this.apiClient.isVertexAI()){const c=r0(this.apiClient,t);s=V("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=o0(this.apiClient,t);s=V("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=L0(t);return l=V("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=F0(f),h=new Ls;return Object.assign(h,p),h})}else{const d=D0(t);return l=V("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=U0(f),h=new Ls;return Object.assign(h,p),h})}}async delete(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=h0(this.apiClient,t);return l=V("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>g0(f))}else{const d=p0(this.apiClient,t);return l=V("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>m0(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q0(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Vs(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>fx(r))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function z0(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);t!==void 0&&o!=null&&u(t,["expireTime"],o);const r=a(e,["displayName"]);t!==void 0&&r!=null&&u(t,["displayName"],r);const s=a(e,["contents"]);if(t!==void 0&&s!=null){let f=We(s);Array.isArray(f)&&(f=f.map(p=>Vs(p))),u(t,["contents"],f)}const l=a(e,["systemInstruction"]);t!==void 0&&l!=null&&u(t,["systemInstruction"],Vs(be(l)));const c=a(e,["tools"]);if(t!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>hx(p))),u(t,["tools"],f)}const d=a(e,["toolConfig"]);if(t!==void 0&&d!=null&&u(t,["toolConfig"],px(d)),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function $0(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);t!==void 0&&o!=null&&u(t,["expireTime"],o);const r=a(e,["displayName"]);t!==void 0&&r!=null&&u(t,["displayName"],r);const s=a(e,["contents"]);if(t!==void 0&&s!=null){let p=We(s);Array.isArray(p)&&(p=p.map(h=>h)),u(t,["contents"],p)}const l=a(e,["systemInstruction"]);t!==void 0&&l!=null&&u(t,["systemInstruction"],be(l));const c=a(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>mx(h))),u(t,["tools"],p)}const d=a(e,["toolConfig"]);t!==void 0&&d!=null&&u(t,["toolConfig"],d);const f=a(e,["kmsKeyName"]);return t!==void 0&&f!=null&&u(t,["encryption_spec","kmsKeyName"],f),n}function J0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["model"],va(e,i));const o=a(t,["config"]);return o!=null&&z0(o,n),n}function W0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["model"],va(e,i));const o=a(t,["config"]);return o!=null&&$0(o,n),n}function Y0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],lt(e,i)),n}function K0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],lt(e,i)),n}function X0(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Q0(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Z0(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function j0(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const i=a(e,["args"]);i!=null&&u(t,["args"],i);const o=a(e,["name"]);if(o!=null&&u(t,["name"],o),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ex(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&u(t,["allowedFunctionNames"],n);const i=a(e,["mode"]);if(i!=null&&u(t,["mode"],i),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function tx(e){const t={},n=a(e,["description"]);n!=null&&u(t,["description"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["parameters"]);o!=null&&u(t,["parameters"],o);const r=a(e,["parametersJsonSchema"]);r!=null&&u(t,["parametersJsonSchema"],r);const s=a(e,["response"]);s!=null&&u(t,["response"],s);const l=a(e,["responseJsonSchema"]);if(l!=null&&u(t,["responseJsonSchema"],l),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function nx(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],lt(e,i)),n}function ix(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],lt(e,i)),n}function ox(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function rx(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function sx(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function lx(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function ax(e){const t={},n=a(e,["config"]);return n!=null&&sx(n,t),t}function ux(e){const t={},n=a(e,["config"]);return n!=null&&lx(n,t),t}function cx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["cachedContents"],r)}return t}function dx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["cachedContents"],r)}return t}function fx(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const r=a(e,["fileData"]);r!=null&&u(t,["fileData"],Z0(r));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],j0(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],q0(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function px(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&u(t,["retrievalConfig"],n);const i=a(e,["functionCallingConfig"]);return i!=null&&u(t,["functionCallingConfig"],ex(i)),t}function hx(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const i=a(e,["fileSearch"]);i!=null&&u(t,["fileSearch"],i);const o=a(e,["codeExecution"]);if(o!=null&&u(t,["codeExecution"],o),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=a(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],ox(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],rx(l));const c=a(e,["googleSearchRetrieval"]);c!=null&&u(t,["googleSearchRetrieval"],c);const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function mx(e){const t={},n=a(e,["retrieval"]);n!=null&&u(t,["retrieval"],n);const i=a(e,["computerUse"]);if(i!=null&&u(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=a(e,["codeExecution"]);o!=null&&u(t,["codeExecution"],o);const r=a(e,["enterpriseWebSearch"]);r!=null&&u(t,["enterpriseWebSearch"],r);const s=a(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>tx(h))),u(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&u(t,["googleMaps"],l);const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],c);const d=a(e,["googleSearchRetrieval"]);d!=null&&u(t,["googleSearchRetrieval"],d);const f=a(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function gx(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);return t!==void 0&&o!=null&&u(t,["expireTime"],o),n}function yx(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);return t!==void 0&&o!=null&&u(t,["expireTime"],o),n}function xx(e,t){const n={},i=a(t,["name"]);i!=null&&u(n,["_url","name"],lt(e,i));const o=a(t,["config"]);return o!=null&&gx(o,n),n}function vx(e,t){const n={},i=a(t,["name"]);i!=null&&u(n,["_url","name"],lt(e,i));const o=a(t,["config"]);return o!=null&&yx(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sx extends st{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Et(ot.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=W0(this.apiClient,t);return l=V("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=J0(this.apiClient,t);return l=V("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=ix(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=nx(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=K0(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Q0(f),h=new Ms;return Object.assign(h,p),h})}else{const d=Y0(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=X0(f),h=new Ms;return Object.assign(h,p),h})}}async update(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=vx(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=xx(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=ux(t);return l=V("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=dx(f),h=new Ds;return Object.assign(h,p),h})}else{const d=ax(t);return l=V("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=cx(f),h=new Ds;return Object.assign(h,p),h})}}}function kn(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function Hs(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(e){return this instanceof te?(this.v=e,this):new te(e)}function je(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(y){return Promise.resolve(y).then(m,p)}}function l(m,y){i[m]&&(o[m]=function(v){return new Promise(function(S,x){r.push([m,v,S,x])>1||c(m,v)})},y&&(o[m]=y(o[m])))}function c(m,y){try{d(i[m](y))}catch(v){h(r[0][3],v)}}function d(m){m.value instanceof te?Promise.resolve(m.value.v).then(f,p):h(r[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function h(m,y){m(y),r.shift(),r.length&&c(r[0][0],r[0][1])}}function et(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hs=="function"?Hs(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(s){return new Promise(function(l,c){s=e[r](s),o(l,c,s.done,s.value)})}}function o(r,s,l,c){Promise.resolve(c).then(function(d){r({value:d,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cx(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Pa(n)}function Pa(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Ex(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Os(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let r=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),r&&!Pa(e[i])&&(r=!1),i++;r?t.push(...o):t.pop()}return t}class Tx{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new wx(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class wx{constructor(t,n,i,o={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),Ex(r)}async sendMessage(t){var n;await this.sendPromise;const i=be(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,l;const c=await o,d=(s=(r=c.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);const m=d?[d]:[];this.recordHistory(i,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=be(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,i)}getHistory(t=!1){const n=t?Os(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return je(this,arguments,function*(){var o,r,s,l,c,d;const f=[];try{for(var p=!0,h=et(t),m;m=yield te(h.next()),o=m.done,!o;p=!0){l=m.value,p=!1;const y=l;if(Cx(y)){const v=(d=(c=y.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;v!==void 0&&f.push(v)}yield yield te(y)}}catch(y){r={error:y}}finally{try{!p&&!o&&(s=h.return)&&(yield te(s.call(h)))}finally{if(r)throw r.error}}this.recordHistory(n,f)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(r=>r.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Os(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kt extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Kt.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _x(e){const t={},n=a(e,["file"]);return n!=null&&u(t,["file"],n),t}function kx(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Ix(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","file"],_a(n)),t}function Ax(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function bx(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","file"],_a(n)),t}function Nx(e){const t={},n=a(e,["uris"]);return n!=null&&u(t,["uris"],n),t}function Rx(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function Px(e){const t={},n=a(e,["config"]);return n!=null&&Rx(n,t),t}function Mx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["files"],r)}return t}function Dx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),u(t,["files"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lx extends st{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Et(ot.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Px(t);return r=V("files",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Mx(c),f=new Uy;return Object.assign(f,d),f})}}async createInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_x(t);return r=V("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=kx(c),f=new Fy;return Object.assign(f,d),f})}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bx(t);return r=V("files/{file}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Ix(t);return r=V("files/{file}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Ax(c),f=new By;return Object.assign(f,d),f})}}async registerFilesInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Nx(t);return r=V("files:register",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Dx(c),f=new Gy;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mn(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Ux(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Zx(r))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function Fx(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Bx(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const i=a(e,["args"]);i!=null&&u(t,["args"],i);const o=a(e,["name"]);if(o!=null&&u(t,["name"],o),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Gx(e){const t={},n=a(e,["description"]);n!=null&&u(t,["description"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["parameters"]);o!=null&&u(t,["parameters"],o);const r=a(e,["parametersJsonSchema"]);r!=null&&u(t,["parametersJsonSchema"],r);const s=a(e,["response"]);s!=null&&u(t,["response"],s);const l=a(e,["responseJsonSchema"]);if(l!=null&&u(t,["responseJsonSchema"],l),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Vx(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&u(t,["modelConfig"],n);const i=a(e,["responseJsonSchema"]);i!=null&&u(t,["responseJsonSchema"],i);const o=a(e,["audioTimestamp"]);o!=null&&u(t,["audioTimestamp"],o);const r=a(e,["candidateCount"]);r!=null&&u(t,["candidateCount"],r);const s=a(e,["enableAffectiveDialog"]);s!=null&&u(t,["enableAffectiveDialog"],s);const l=a(e,["frequencyPenalty"]);l!=null&&u(t,["frequencyPenalty"],l);const c=a(e,["logprobs"]);c!=null&&u(t,["logprobs"],c);const d=a(e,["maxOutputTokens"]);d!=null&&u(t,["maxOutputTokens"],d);const f=a(e,["mediaResolution"]);f!=null&&u(t,["mediaResolution"],f);const p=a(e,["presencePenalty"]);p!=null&&u(t,["presencePenalty"],p);const h=a(e,["responseLogprobs"]);h!=null&&u(t,["responseLogprobs"],h);const m=a(e,["responseMimeType"]);m!=null&&u(t,["responseMimeType"],m);const y=a(e,["responseModalities"]);y!=null&&u(t,["responseModalities"],y);const v=a(e,["responseSchema"]);v!=null&&u(t,["responseSchema"],v);const S=a(e,["routingConfig"]);S!=null&&u(t,["routingConfig"],S);const x=a(e,["seed"]);x!=null&&u(t,["seed"],x);const A=a(e,["speechConfig"]);A!=null&&u(t,["speechConfig"],A);const k=a(e,["stopSequences"]);k!=null&&u(t,["stopSequences"],k);const R=a(e,["temperature"]);R!=null&&u(t,["temperature"],R);const w=a(e,["thinkingConfig"]);w!=null&&u(t,["thinkingConfig"],w);const I=a(e,["topK"]);I!=null&&u(t,["topK"],I);const D=a(e,["topP"]);if(D!=null&&u(t,["topP"],D),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Hx(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function Ox(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function qx(e,t){const n={},i=a(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],i);const o=a(e,["responseModalities"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","responseModalities"],o);const r=a(e,["temperature"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","temperature"],r);const s=a(e,["topP"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topK"],l);const c=a(e,["maxOutputTokens"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","maxOutputTokens"],c);const d=a(e,["mediaResolution"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","mediaResolution"],d);const f=a(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","speechConfig"],uo(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const m=a(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],m);const y=a(e,["systemInstruction"]);t!==void 0&&y!=null&&u(t,["setup","systemInstruction"],Ux(be(y)));const v=a(e,["tools"]);if(t!==void 0&&v!=null){let I=Lt(v);Array.isArray(I)&&(I=I.map(D=>ev(Dt(D)))),u(t,["setup","tools"],I)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&u(t,["setup","sessionResumption"],jx(S));const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","inputAudioTranscription"],x);const A=a(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&u(t,["setup","outputAudioTranscription"],A);const k=a(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&u(t,["setup","realtimeInputConfig"],k);const R=a(e,["contextWindowCompression"]);t!==void 0&&R!=null&&u(t,["setup","contextWindowCompression"],R);const w=a(e,["proactivity"]);if(t!==void 0&&w!=null&&u(t,["setup","proactivity"],w),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function zx(e,t){const n={},i=a(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],Vx(i));const o=a(e,["responseModalities"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","responseModalities"],o);const r=a(e,["temperature"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","temperature"],r);const s=a(e,["topP"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topK"],l);const c=a(e,["maxOutputTokens"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","maxOutputTokens"],c);const d=a(e,["mediaResolution"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","mediaResolution"],d);const f=a(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","speechConfig"],uo(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const m=a(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],m);const y=a(e,["systemInstruction"]);t!==void 0&&y!=null&&u(t,["setup","systemInstruction"],be(y));const v=a(e,["tools"]);if(t!==void 0&&v!=null){let D=Lt(v);Array.isArray(D)&&(D=D.map(H=>tv(Dt(H)))),u(t,["setup","tools"],D)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&u(t,["setup","sessionResumption"],S);const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","inputAudioTranscription"],x);const A=a(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&u(t,["setup","outputAudioTranscription"],A);const k=a(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&u(t,["setup","realtimeInputConfig"],k);const R=a(e,["contextWindowCompression"]);t!==void 0&&R!=null&&u(t,["setup","contextWindowCompression"],R);const w=a(e,["proactivity"]);t!==void 0&&w!=null&&u(t,["setup","proactivity"],w);const I=a(e,["explicitVadSignal"]);return t!==void 0&&I!=null&&u(t,["setup","explicitVadSignal"],I),n}function $x(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["setup","model"],ae(e,i));const o=a(t,["config"]);return o!=null&&u(n,["config"],qx(o,n)),n}function Jx(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["setup","model"],ae(e,i));const o=a(t,["config"]);return o!=null&&u(n,["config"],zx(o,n)),n}function Wx(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&u(t,["musicGenerationConfig"],n),t}function Yx(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),u(t,["weightedPrompts"],i)}return t}function Kx(e){const t={},n=a(e,["media"]);if(n!=null){let d=Sa(n);Array.isArray(d)&&(d=d.map(f=>mn(f))),u(t,["mediaChunks"],d)}const i=a(e,["audio"]);i!=null&&u(t,["audio"],mn(Ea(i)));const o=a(e,["audioStreamEnd"]);o!=null&&u(t,["audioStreamEnd"],o);const r=a(e,["video"]);r!=null&&u(t,["video"],mn(Ca(r)));const s=a(e,["text"]);s!=null&&u(t,["text"],s);const l=a(e,["activityStart"]);l!=null&&u(t,["activityStart"],l);const c=a(e,["activityEnd"]);return c!=null&&u(t,["activityEnd"],c),t}function Xx(e){const t={},n=a(e,["media"]);if(n!=null){let d=Sa(n);Array.isArray(d)&&(d=d.map(f=>f)),u(t,["mediaChunks"],d)}const i=a(e,["audio"]);i!=null&&u(t,["audio"],Ea(i));const o=a(e,["audioStreamEnd"]);o!=null&&u(t,["audioStreamEnd"],o);const r=a(e,["video"]);r!=null&&u(t,["video"],Ca(r));const s=a(e,["text"]);s!=null&&u(t,["text"],s);const l=a(e,["activityStart"]);l!=null&&u(t,["activityStart"],l);const c=a(e,["activityEnd"]);return c!=null&&u(t,["activityEnd"],c),t}function Qx(e){const t={},n=a(e,["setupComplete"]);n!=null&&u(t,["setupComplete"],n);const i=a(e,["serverContent"]);i!=null&&u(t,["serverContent"],i);const o=a(e,["toolCall"]);o!=null&&u(t,["toolCall"],o);const r=a(e,["toolCallCancellation"]);r!=null&&u(t,["toolCallCancellation"],r);const s=a(e,["usageMetadata"]);s!=null&&u(t,["usageMetadata"],nv(s));const l=a(e,["goAway"]);l!=null&&u(t,["goAway"],l);const c=a(e,["sessionResumptionUpdate"]);c!=null&&u(t,["sessionResumptionUpdate"],c);const d=a(e,["voiceActivityDetectionSignal"]);d!=null&&u(t,["voiceActivityDetectionSignal"],d);const f=a(e,["voiceActivity"]);return f!=null&&u(t,["voiceActivity"],iv(f)),t}function Zx(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const r=a(e,["fileData"]);r!=null&&u(t,["fileData"],Fx(r));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],Bx(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],mn(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function jx(e){const t={},n=a(e,["handle"]);if(n!=null&&u(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ev(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const i=a(e,["fileSearch"]);i!=null&&u(t,["fileSearch"],i);const o=a(e,["codeExecution"]);if(o!=null&&u(t,["codeExecution"],o),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=a(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],Hx(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],Ox(l));const c=a(e,["googleSearchRetrieval"]);c!=null&&u(t,["googleSearchRetrieval"],c);const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function tv(e){const t={},n=a(e,["retrieval"]);n!=null&&u(t,["retrieval"],n);const i=a(e,["computerUse"]);if(i!=null&&u(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=a(e,["codeExecution"]);o!=null&&u(t,["codeExecution"],o);const r=a(e,["enterpriseWebSearch"]);r!=null&&u(t,["enterpriseWebSearch"],r);const s=a(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>Gx(h))),u(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&u(t,["googleMaps"],l);const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],c);const d=a(e,["googleSearchRetrieval"]);d!=null&&u(t,["googleSearchRetrieval"],d);const f=a(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function nv(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&u(t,["promptTokenCount"],n);const i=a(e,["cachedContentTokenCount"]);i!=null&&u(t,["cachedContentTokenCount"],i);const o=a(e,["candidatesTokenCount"]);o!=null&&u(t,["responseTokenCount"],o);const r=a(e,["toolUsePromptTokenCount"]);r!=null&&u(t,["toolUsePromptTokenCount"],r);const s=a(e,["thoughtsTokenCount"]);s!=null&&u(t,["thoughtsTokenCount"],s);const l=a(e,["totalTokenCount"]);l!=null&&u(t,["totalTokenCount"],l);const c=a(e,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>y)),u(t,["promptTokensDetails"],m)}const d=a(e,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>y)),u(t,["cacheTokensDetails"],m)}const f=a(e,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>y)),u(t,["responseTokensDetails"],m)}const p=a(e,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),u(t,["toolUsePromptTokensDetails"],m)}const h=a(e,["trafficType"]);return h!=null&&u(t,["trafficType"],h),t}function iv(e){const t={},n=a(e,["type"]);return n!=null&&u(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ov(e,t){const n={},i=a(e,["data"]);if(i!=null&&u(n,["data"],i),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function rv(e,t){const n={},i=a(e,["content"]);i!=null&&u(n,["content"],i);const o=a(e,["citationMetadata"]);o!=null&&u(n,["citationMetadata"],sv(o));const r=a(e,["tokenCount"]);r!=null&&u(n,["tokenCount"],r);const s=a(e,["finishReason"]);s!=null&&u(n,["finishReason"],s);const l=a(e,["avgLogprobs"]);l!=null&&u(n,["avgLogprobs"],l);const c=a(e,["groundingMetadata"]);c!=null&&u(n,["groundingMetadata"],c);const d=a(e,["index"]);d!=null&&u(n,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&u(n,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),u(n,["safetyRatings"],m)}const h=a(e,["urlContextMetadata"]);return h!=null&&u(n,["urlContextMetadata"],h),n}function sv(e,t){const n={},i=a(e,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),u(n,["citations"],o)}return n}function lv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let s=We(r);Array.isArray(s)&&(s=s.map(l=>l)),u(i,["contents"],s)}return i}function av(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(n,["tokensInfo"],r)}return n}function uv(e,t){const n={},i=a(e,["values"]);i!=null&&u(n,["values"],i);const o=a(e,["statistics"]);return o!=null&&u(n,["statistics"],cv(o)),n}function cv(e,t){const n={},i=a(e,["truncated"]);i!=null&&u(n,["truncated"],i);const o=a(e,["token_count"]);return o!=null&&u(n,["tokenCount"],o),n}function Un(e,t){const n={},i=a(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>vS(s))),u(n,["parts"],r)}const o=a(e,["role"]);return o!=null&&u(n,["role"],o),n}function dv(e,t){const n={},i=a(e,["controlType"]);i!=null&&u(n,["controlType"],i);const o=a(e,["enableControlImageComputation"]);return o!=null&&u(n,["computeControl"],o),n}function fv(e,t){const n={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function pv(e,t,n){const i={},o=a(e,["systemInstruction"]);t!==void 0&&o!=null&&u(t,["systemInstruction"],be(o));const r=a(e,["tools"]);if(t!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ua(c))),u(t,["tools"],l)}const s=a(e,["generationConfig"]);return t!==void 0&&s!=null&&u(t,["generationConfig"],oS(s)),i}function hv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let l=We(r);Array.isArray(l)&&(l=l.map(c=>Un(c))),u(i,["contents"],l)}const s=a(t,["config"]);return s!=null&&fv(s),i}function mv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let l=We(r);Array.isArray(l)&&(l=l.map(c=>c)),u(i,["contents"],l)}const s=a(t,["config"]);return s!=null&&pv(s,i),i}function gv(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["totalTokens"]);o!=null&&u(n,["totalTokens"],o);const r=a(e,["cachedContentTokenCount"]);return r!=null&&u(n,["cachedContentTokenCount"],r),n}function yv(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["totalTokens"]);return o!=null&&u(n,["totalTokens"],o),n}function xv(e,t,n){const i={},o=a(t,["model"]);return o!=null&&u(i,["_url","name"],ae(e,o)),i}function vv(e,t,n){const i={},o=a(t,["model"]);return o!=null&&u(i,["_url","name"],ae(e,o)),i}function Sv(e,t){const n={},i=a(e,["sdkHttpResponse"]);return i!=null&&u(n,["sdkHttpResponse"],i),n}function Cv(e,t){const n={},i=a(e,["sdkHttpResponse"]);return i!=null&&u(n,["sdkHttpResponse"],i),n}function Ev(e,t,n){const i={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&u(t,["parameters","storageUri"],o);const r=a(e,["negativePrompt"]);t!==void 0&&r!=null&&u(t,["parameters","negativePrompt"],r);const s=a(e,["numberOfImages"]);t!==void 0&&s!=null&&u(t,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const c=a(e,["guidanceScale"]);t!==void 0&&c!=null&&u(t,["parameters","guidanceScale"],c);const d=a(e,["seed"]);t!==void 0&&d!=null&&u(t,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&u(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const h=a(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&u(t,["parameters","includeSafetyAttributes"],h);const m=a(e,["includeRaiReason"]);t!==void 0&&m!=null&&u(t,["parameters","includeRaiReason"],m);const y=a(e,["language"]);t!==void 0&&y!=null&&u(t,["parameters","language"],y);const v=a(e,["outputMimeType"]);t!==void 0&&v!=null&&u(t,["parameters","outputOptions","mimeType"],v);const S=a(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&u(t,["parameters","outputOptions","compressionQuality"],S);const x=a(e,["addWatermark"]);t!==void 0&&x!=null&&u(t,["parameters","addWatermark"],x);const A=a(e,["labels"]);t!==void 0&&A!=null&&u(t,["labels"],A);const k=a(e,["editMode"]);t!==void 0&&k!=null&&u(t,["parameters","editMode"],k);const R=a(e,["baseSteps"]);return t!==void 0&&R!=null&&u(t,["parameters","editConfig","baseSteps"],R),i}function Tv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["prompt"]);r!=null&&u(i,["instances[0]","prompt"],r);const s=a(t,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>_S(d))),u(i,["instances[0]","referenceImages"],c)}const l=a(t,["config"]);return l!=null&&Ev(l,i),i}function wv(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Fn(s))),u(n,["generatedImages"],r)}return n}function _v(e,t,n){const i={},o=a(e,["taskType"]);t!==void 0&&o!=null&&u(t,["requests[]","taskType"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&u(t,["requests[]","title"],r);const s=a(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&u(t,["requests[]","outputDimensionality"],s),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function kv(e,t,n){const i={},o=a(e,["taskType"]);t!==void 0&&o!=null&&u(t,["instances[]","task_type"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&u(t,["instances[]","title"],r);const s=a(e,["outputDimensionality"]);t!==void 0&&s!=null&&u(t,["parameters","outputDimensionality"],s);const l=a(e,["mimeType"]);t!==void 0&&l!=null&&u(t,["instances[]","mimeType"],l);const c=a(e,["autoTruncate"]);return t!==void 0&&c!=null&&u(t,["parameters","autoTruncate"],c),i}function Iv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let c=so(e,r);Array.isArray(c)&&(c=c.map(d=>d)),u(i,["requests[]","content"],c)}const s=a(t,["config"]);s!=null&&_v(s,i);const l=a(t,["model"]);return l!==void 0&&u(i,["requests[]","model"],ae(e,l)),i}function Av(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let l=so(e,r);Array.isArray(l)&&(l=l.map(c=>c)),u(i,["instances[]","content"],l)}const s=a(t,["config"]);return s!=null&&kv(s,i),i}function bv(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),u(n,["embeddings"],s)}const r=a(e,["metadata"]);return r!=null&&u(n,["metadata"],r),n}function Nv(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>uv(l))),u(n,["embeddings"],s)}const r=a(e,["metadata"]);return r!=null&&u(n,["metadata"],r),n}function Rv(e,t){const n={},i=a(e,["endpoint"]);i!=null&&u(n,["name"],i);const o=a(e,["deployedModelId"]);return o!=null&&u(n,["deployedModelId"],o),n}function Pv(e,t){const n={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["fileUri"]);i!=null&&u(n,["fileUri"],i);const o=a(e,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function Mv(e,t){const n={},i=a(e,["id"]);i!=null&&u(n,["id"],i);const o=a(e,["args"]);o!=null&&u(n,["args"],o);const r=a(e,["name"]);if(r!=null&&u(n,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function Dv(e,t){const n={},i=a(e,["allowedFunctionNames"]);i!=null&&u(n,["allowedFunctionNames"],i);const o=a(e,["mode"]);if(o!=null&&u(n,["mode"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Lv(e,t){const n={},i=a(e,["description"]);i!=null&&u(n,["description"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["parameters"]);r!=null&&u(n,["parameters"],r);const s=a(e,["parametersJsonSchema"]);s!=null&&u(n,["parametersJsonSchema"],s);const l=a(e,["response"]);l!=null&&u(n,["response"],l);const c=a(e,["responseJsonSchema"]);if(c!=null&&u(n,["responseJsonSchema"],c),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function Uv(e,t,n,i){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],Un(be(r)));const s=a(t,["temperature"]);s!=null&&u(o,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(o,["topP"],l);const c=a(t,["topK"]);c!=null&&u(o,["topK"],c);const d=a(t,["candidateCount"]);d!=null&&u(o,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&u(o,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(o,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&u(o,["responseLogprobs"],h);const m=a(t,["logprobs"]);m!=null&&u(o,["logprobs"],m);const y=a(t,["presencePenalty"]);y!=null&&u(o,["presencePenalty"],y);const v=a(t,["frequencyPenalty"]);v!=null&&u(o,["frequencyPenalty"],v);const S=a(t,["seed"]);S!=null&&u(o,["seed"],S);const x=a(t,["responseMimeType"]);x!=null&&u(o,["responseMimeType"],x);const A=a(t,["responseSchema"]);A!=null&&u(o,["responseSchema"],lo(A));const k=a(t,["responseJsonSchema"]);if(k!=null&&u(o,["responseJsonSchema"],k),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=a(t,["safetySettings"]);if(n!==void 0&&R!=null){let K=R;Array.isArray(K)&&(K=K.map(Y=>kS(Y))),u(n,["safetySettings"],K)}const w=a(t,["tools"]);if(n!==void 0&&w!=null){let K=Lt(w);Array.isArray(K)&&(K=K.map(Y=>MS(Dt(Y)))),u(n,["tools"],K)}const I=a(t,["toolConfig"]);if(n!==void 0&&I!=null&&u(n,["toolConfig"],PS(I)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=a(t,["cachedContent"]);n!==void 0&&D!=null&&u(n,["cachedContent"],lt(e,D));const H=a(t,["responseModalities"]);H!=null&&u(o,["responseModalities"],H);const M=a(t,["mediaResolution"]);M!=null&&u(o,["mediaResolution"],M);const _=a(t,["speechConfig"]);if(_!=null&&u(o,["speechConfig"],ao(_)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=a(t,["thinkingConfig"]);U!=null&&u(o,["thinkingConfig"],U);const G=a(t,["imageConfig"]);G!=null&&u(o,["imageConfig"],uS(G));const $=a(t,["enableEnhancedCivicAnswers"]);if($!=null&&u(o,["enableEnhancedCivicAnswers"],$),a(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Fv(e,t,n,i){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],be(r));const s=a(t,["temperature"]);s!=null&&u(o,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(o,["topP"],l);const c=a(t,["topK"]);c!=null&&u(o,["topK"],c);const d=a(t,["candidateCount"]);d!=null&&u(o,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&u(o,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(o,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&u(o,["responseLogprobs"],h);const m=a(t,["logprobs"]);m!=null&&u(o,["logprobs"],m);const y=a(t,["presencePenalty"]);y!=null&&u(o,["presencePenalty"],y);const v=a(t,["frequencyPenalty"]);v!=null&&u(o,["frequencyPenalty"],v);const S=a(t,["seed"]);S!=null&&u(o,["seed"],S);const x=a(t,["responseMimeType"]);x!=null&&u(o,["responseMimeType"],x);const A=a(t,["responseSchema"]);A!=null&&u(o,["responseSchema"],lo(A));const k=a(t,["responseJsonSchema"]);k!=null&&u(o,["responseJsonSchema"],k);const R=a(t,["routingConfig"]);R!=null&&u(o,["routingConfig"],R);const w=a(t,["modelSelectionConfig"]);w!=null&&u(o,["modelConfig"],w);const I=a(t,["safetySettings"]);if(n!==void 0&&I!=null){let le=I;Array.isArray(le)&&(le=le.map(xe=>xe)),u(n,["safetySettings"],le)}const D=a(t,["tools"]);if(n!==void 0&&D!=null){let le=Lt(D);Array.isArray(le)&&(le=le.map(xe=>Ua(Dt(xe)))),u(n,["tools"],le)}const H=a(t,["toolConfig"]);n!==void 0&&H!=null&&u(n,["toolConfig"],H);const M=a(t,["labels"]);n!==void 0&&M!=null&&u(n,["labels"],M);const _=a(t,["cachedContent"]);n!==void 0&&_!=null&&u(n,["cachedContent"],lt(e,_));const U=a(t,["responseModalities"]);U!=null&&u(o,["responseModalities"],U);const G=a(t,["mediaResolution"]);G!=null&&u(o,["mediaResolution"],G);const $=a(t,["speechConfig"]);$!=null&&u(o,["speechConfig"],ao($));const K=a(t,["audioTimestamp"]);K!=null&&u(o,["audioTimestamp"],K);const Y=a(t,["thinkingConfig"]);Y!=null&&u(o,["thinkingConfig"],Y);const ce=a(t,["imageConfig"]);if(ce!=null&&u(o,["imageConfig"],cS(ce)),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const j=a(t,["modelArmorConfig"]);return n!==void 0&&j!=null&&u(n,["modelArmorConfig"],j),o}function qs(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let l=We(r);Array.isArray(l)&&(l=l.map(c=>Un(c))),u(i,["contents"],l)}const s=a(t,["config"]);return s!=null&&u(i,["generationConfig"],Uv(e,s,i)),i}function zs(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["contents"]);if(r!=null){let l=We(r);Array.isArray(l)&&(l=l.map(c=>c)),u(i,["contents"],l)}const s=a(t,["config"]);return s!=null&&u(i,["generationConfig"],Fv(e,s,i)),i}function $s(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>rv(f))),u(n,["candidates"],d)}const r=a(e,["modelVersion"]);r!=null&&u(n,["modelVersion"],r);const s=a(e,["promptFeedback"]);s!=null&&u(n,["promptFeedback"],s);const l=a(e,["responseId"]);l!=null&&u(n,["responseId"],l);const c=a(e,["usageMetadata"]);return c!=null&&u(n,["usageMetadata"],c),n}function Js(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),u(n,["candidates"],f)}const r=a(e,["createTime"]);r!=null&&u(n,["createTime"],r);const s=a(e,["modelVersion"]);s!=null&&u(n,["modelVersion"],s);const l=a(e,["promptFeedback"]);l!=null&&u(n,["promptFeedback"],l);const c=a(e,["responseId"]);c!=null&&u(n,["responseId"],c);const d=a(e,["usageMetadata"]);return d!=null&&u(n,["usageMetadata"],d),n}function Bv(e,t,n){const i={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=a(e,["numberOfImages"]);t!==void 0&&o!=null&&u(t,["parameters","sampleCount"],o);const r=a(e,["aspectRatio"]);t!==void 0&&r!=null&&u(t,["parameters","aspectRatio"],r);const s=a(e,["guidanceScale"]);if(t!==void 0&&s!=null&&u(t,["parameters","guidanceScale"],s),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&u(t,["parameters","safetySetting"],l);const c=a(e,["personGeneration"]);t!==void 0&&c!=null&&u(t,["parameters","personGeneration"],c);const d=a(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&u(t,["parameters","includeSafetyAttributes"],d);const f=a(e,["includeRaiReason"]);t!==void 0&&f!=null&&u(t,["parameters","includeRaiReason"],f);const p=a(e,["language"]);t!==void 0&&p!=null&&u(t,["parameters","language"],p);const h=a(e,["outputMimeType"]);t!==void 0&&h!=null&&u(t,["parameters","outputOptions","mimeType"],h);const m=a(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&u(t,["parameters","outputOptions","compressionQuality"],m),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=a(e,["imageSize"]);if(t!==void 0&&y!=null&&u(t,["parameters","sampleImageSize"],y),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Gv(e,t,n){const i={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&u(t,["parameters","storageUri"],o);const r=a(e,["negativePrompt"]);t!==void 0&&r!=null&&u(t,["parameters","negativePrompt"],r);const s=a(e,["numberOfImages"]);t!==void 0&&s!=null&&u(t,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const c=a(e,["guidanceScale"]);t!==void 0&&c!=null&&u(t,["parameters","guidanceScale"],c);const d=a(e,["seed"]);t!==void 0&&d!=null&&u(t,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&u(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const h=a(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&u(t,["parameters","includeSafetyAttributes"],h);const m=a(e,["includeRaiReason"]);t!==void 0&&m!=null&&u(t,["parameters","includeRaiReason"],m);const y=a(e,["language"]);t!==void 0&&y!=null&&u(t,["parameters","language"],y);const v=a(e,["outputMimeType"]);t!==void 0&&v!=null&&u(t,["parameters","outputOptions","mimeType"],v);const S=a(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&u(t,["parameters","outputOptions","compressionQuality"],S);const x=a(e,["addWatermark"]);t!==void 0&&x!=null&&u(t,["parameters","addWatermark"],x);const A=a(e,["labels"]);t!==void 0&&A!=null&&u(t,["labels"],A);const k=a(e,["imageSize"]);t!==void 0&&k!=null&&u(t,["parameters","sampleImageSize"],k);const R=a(e,["enhancePrompt"]);return t!==void 0&&R!=null&&u(t,["parameters","enhancePrompt"],R),i}function Vv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["prompt"]);r!=null&&u(i,["instances[0]","prompt"],r);const s=a(t,["config"]);return s!=null&&Bv(s,i),i}function Hv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["prompt"]);r!=null&&u(i,["instances[0]","prompt"],r);const s=a(t,["config"]);return s!=null&&Gv(s,i),i}function Ov(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>eS(l))),u(n,["generatedImages"],s)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&u(n,["positivePromptSafetyAttributes"],Da(r)),n}function qv(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Fn(l))),u(n,["generatedImages"],s)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&u(n,["positivePromptSafetyAttributes"],La(r)),n}function zv(e,t,n){const i={},o=a(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&u(t,["parameters","sampleCount"],o),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=a(e,["durationSeconds"]);if(t!==void 0&&r!=null&&u(t,["parameters","durationSeconds"],r),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&u(t,["parameters","aspectRatio"],s);const l=a(e,["resolution"]);t!==void 0&&l!=null&&u(t,["parameters","resolution"],l);const c=a(e,["personGeneration"]);if(t!==void 0&&c!=null&&u(t,["parameters","personGeneration"],c),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=a(e,["negativePrompt"]);t!==void 0&&d!=null&&u(t,["parameters","negativePrompt"],d);const f=a(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&u(t,["parameters","enhancePrompt"],f),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(e,["lastFrame"]);t!==void 0&&p!=null&&u(t,["instances[0]","lastFrame"],Bn(p));const h=a(e,["referenceImages"]);if(t!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>JS(y))),u(t,["instances[0]","referenceImages"],m)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function $v(e,t,n){const i={},o=a(e,["numberOfVideos"]);t!==void 0&&o!=null&&u(t,["parameters","sampleCount"],o);const r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&u(t,["parameters","storageUri"],r);const s=a(e,["fps"]);t!==void 0&&s!=null&&u(t,["parameters","fps"],s);const l=a(e,["durationSeconds"]);t!==void 0&&l!=null&&u(t,["parameters","durationSeconds"],l);const c=a(e,["seed"]);t!==void 0&&c!=null&&u(t,["parameters","seed"],c);const d=a(e,["aspectRatio"]);t!==void 0&&d!=null&&u(t,["parameters","aspectRatio"],d);const f=a(e,["resolution"]);t!==void 0&&f!=null&&u(t,["parameters","resolution"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const h=a(e,["pubsubTopic"]);t!==void 0&&h!=null&&u(t,["parameters","pubsubTopic"],h);const m=a(e,["negativePrompt"]);t!==void 0&&m!=null&&u(t,["parameters","negativePrompt"],m);const y=a(e,["enhancePrompt"]);t!==void 0&&y!=null&&u(t,["parameters","enhancePrompt"],y);const v=a(e,["generateAudio"]);t!==void 0&&v!=null&&u(t,["parameters","generateAudio"],v);const S=a(e,["lastFrame"]);t!==void 0&&S!=null&&u(t,["instances[0]","lastFrame"],tt(S));const x=a(e,["referenceImages"]);if(t!==void 0&&x!=null){let R=x;Array.isArray(R)&&(R=R.map(w=>WS(w))),u(t,["instances[0]","referenceImages"],R)}const A=a(e,["mask"]);t!==void 0&&A!=null&&u(t,["instances[0]","mask"],$S(A));const k=a(e,["compressionQuality"]);return t!==void 0&&k!=null&&u(t,["parameters","compressionQuality"],k),i}function Jv(e,t){const n={},i=a(e,["name"]);i!=null&&u(n,["name"],i);const o=a(e,["metadata"]);o!=null&&u(n,["metadata"],o);const r=a(e,["done"]);r!=null&&u(n,["done"],r);const s=a(e,["error"]);s!=null&&u(n,["error"],s);const l=a(e,["response","generateVideoResponse"]);return l!=null&&u(n,["response"],Xv(l)),n}function Wv(e,t){const n={},i=a(e,["name"]);i!=null&&u(n,["name"],i);const o=a(e,["metadata"]);o!=null&&u(n,["metadata"],o);const r=a(e,["done"]);r!=null&&u(n,["done"],r);const s=a(e,["error"]);s!=null&&u(n,["error"],s);const l=a(e,["response"]);return l!=null&&u(n,["response"],Qv(l)),n}function Yv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["prompt"]);r!=null&&u(i,["instances[0]","prompt"],r);const s=a(t,["image"]);s!=null&&u(i,["instances[0]","image"],Bn(s));const l=a(t,["video"]);l!=null&&u(i,["instances[0]","video"],Fa(l));const c=a(t,["source"]);c!=null&&Zv(c,i);const d=a(t,["config"]);return d!=null&&zv(d,i),i}function Kv(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["prompt"]);r!=null&&u(i,["instances[0]","prompt"],r);const s=a(t,["image"]);s!=null&&u(i,["instances[0]","image"],tt(s));const l=a(t,["video"]);l!=null&&u(i,["instances[0]","video"],Ba(l));const c=a(t,["source"]);c!=null&&jv(c,i);const d=a(t,["config"]);return d!=null&&$v(d,i),i}function Xv(e,t){const n={},i=a(e,["generatedSamples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>nS(l))),u(n,["generatedVideos"],s)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&u(n,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&u(n,["raiMediaFilteredReasons"],r),n}function Qv(e,t){const n={},i=a(e,["videos"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>iS(l))),u(n,["generatedVideos"],s)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&u(n,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&u(n,["raiMediaFilteredReasons"],r),n}function Zv(e,t,n){const i={},o=a(e,["prompt"]);t!==void 0&&o!=null&&u(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&u(t,["instances[0]","image"],Bn(r));const s=a(e,["video"]);return t!==void 0&&s!=null&&u(t,["instances[0]","video"],Fa(s)),i}function jv(e,t,n){const i={},o=a(e,["prompt"]);t!==void 0&&o!=null&&u(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&u(t,["instances[0]","image"],tt(r));const s=a(e,["video"]);return t!==void 0&&s!=null&&u(t,["instances[0]","video"],Ba(s)),i}function eS(e,t){const n={},i=a(e,["_self"]);i!=null&&u(n,["image"],dS(i));const o=a(e,["raiFilteredReason"]);o!=null&&u(n,["raiFilteredReason"],o);const r=a(e,["_self"]);return r!=null&&u(n,["safetyAttributes"],Da(r)),n}function Fn(e,t){const n={},i=a(e,["_self"]);i!=null&&u(n,["image"],Ma(i));const o=a(e,["raiFilteredReason"]);o!=null&&u(n,["raiFilteredReason"],o);const r=a(e,["_self"]);r!=null&&u(n,["safetyAttributes"],La(r));const s=a(e,["prompt"]);return s!=null&&u(n,["enhancedPrompt"],s),n}function tS(e,t){const n={},i=a(e,["_self"]);i!=null&&u(n,["mask"],Ma(i));const o=a(e,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(n,["labels"],r)}return n}function nS(e,t){const n={},i=a(e,["video"]);return i!=null&&u(n,["video"],qS(i)),n}function iS(e,t){const n={},i=a(e,["_self"]);return i!=null&&u(n,["video"],zS(i)),n}function oS(e,t){const n={},i=a(e,["modelSelectionConfig"]);i!=null&&u(n,["modelConfig"],i);const o=a(e,["responseJsonSchema"]);o!=null&&u(n,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);r!=null&&u(n,["audioTimestamp"],r);const s=a(e,["candidateCount"]);s!=null&&u(n,["candidateCount"],s);const l=a(e,["enableAffectiveDialog"]);l!=null&&u(n,["enableAffectiveDialog"],l);const c=a(e,["frequencyPenalty"]);c!=null&&u(n,["frequencyPenalty"],c);const d=a(e,["logprobs"]);d!=null&&u(n,["logprobs"],d);const f=a(e,["maxOutputTokens"]);f!=null&&u(n,["maxOutputTokens"],f);const p=a(e,["mediaResolution"]);p!=null&&u(n,["mediaResolution"],p);const h=a(e,["presencePenalty"]);h!=null&&u(n,["presencePenalty"],h);const m=a(e,["responseLogprobs"]);m!=null&&u(n,["responseLogprobs"],m);const y=a(e,["responseMimeType"]);y!=null&&u(n,["responseMimeType"],y);const v=a(e,["responseModalities"]);v!=null&&u(n,["responseModalities"],v);const S=a(e,["responseSchema"]);S!=null&&u(n,["responseSchema"],S);const x=a(e,["routingConfig"]);x!=null&&u(n,["routingConfig"],x);const A=a(e,["seed"]);A!=null&&u(n,["seed"],A);const k=a(e,["speechConfig"]);k!=null&&u(n,["speechConfig"],k);const R=a(e,["stopSequences"]);R!=null&&u(n,["stopSequences"],R);const w=a(e,["temperature"]);w!=null&&u(n,["temperature"],w);const I=a(e,["thinkingConfig"]);I!=null&&u(n,["thinkingConfig"],I);const D=a(e,["topK"]);D!=null&&u(n,["topK"],D);const H=a(e,["topP"]);if(H!=null&&u(n,["topP"],H),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function rS(e,t,n){const i={},o=a(t,["model"]);return o!=null&&u(i,["_url","name"],ae(e,o)),i}function sS(e,t,n){const i={},o=a(t,["model"]);return o!=null&&u(i,["_url","name"],ae(e,o)),i}function lS(e,t){const n={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=a(e,["enableWidget"]);return i!=null&&u(n,["enableWidget"],i),n}function aS(e,t){const n={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=a(e,["timeRangeFilter"]);return i!=null&&u(n,["timeRangeFilter"],i),n}function uS(e,t){const n={},i=a(e,["aspectRatio"]);i!=null&&u(n,["aspectRatio"],i);const o=a(e,["imageSize"]);if(o!=null&&u(n,["imageSize"],o),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function cS(e,t){const n={},i=a(e,["aspectRatio"]);i!=null&&u(n,["aspectRatio"],i);const o=a(e,["imageSize"]);o!=null&&u(n,["imageSize"],o);const r=a(e,["personGeneration"]);r!=null&&u(n,["personGeneration"],r);const s=a(e,["outputMimeType"]);s!=null&&u(n,["imageOutputOptions","mimeType"],s);const l=a(e,["outputCompressionQuality"]);return l!=null&&u(n,["imageOutputOptions","compressionQuality"],l),n}function dS(e,t){const n={},i=a(e,["bytesBase64Encoded"]);i!=null&&u(n,["imageBytes"],ft(i));const o=a(e,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function Ma(e,t){const n={},i=a(e,["gcsUri"]);i!=null&&u(n,["gcsUri"],i);const o=a(e,["bytesBase64Encoded"]);o!=null&&u(n,["imageBytes"],ft(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function Bn(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(e,["imageBytes"]);i!=null&&u(n,["bytesBase64Encoded"],ft(i));const o=a(e,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function tt(e,t){const n={},i=a(e,["gcsUri"]);i!=null&&u(n,["gcsUri"],i);const o=a(e,["imageBytes"]);o!=null&&u(n,["bytesBase64Encoded"],ft(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function fS(e,t,n,i){const o={},r=a(t,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);const s=a(t,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const l=a(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const c=a(t,["queryBase"]);return n!==void 0&&c!=null&&u(n,["_url","models_url"],ka(e,c)),o}function pS(e,t,n,i){const o={},r=a(t,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);const s=a(t,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const l=a(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const c=a(t,["queryBase"]);return n!==void 0&&c!=null&&u(n,["_url","models_url"],ka(e,c)),o}function hS(e,t,n){const i={},o=a(t,["config"]);return o!=null&&fS(e,o,i),i}function mS(e,t,n){const i={},o=a(t,["config"]);return o!=null&&pS(e,o,i),i}function gS(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const r=a(e,["_self"]);if(r!=null){let s=Ia(r);Array.isArray(s)&&(s=s.map(l=>bi(l))),u(n,["models"],s)}return n}function yS(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const r=a(e,["_self"]);if(r!=null){let s=Ia(r);Array.isArray(s)&&(s=s.map(l=>Ni(l))),u(n,["models"],s)}return n}function xS(e,t){const n={},i=a(e,["maskMode"]);i!=null&&u(n,["maskMode"],i);const o=a(e,["segmentationClasses"]);o!=null&&u(n,["maskClasses"],o);const r=a(e,["maskDilation"]);return r!=null&&u(n,["dilation"],r),n}function bi(e,t){const n={},i=a(e,["name"]);i!=null&&u(n,["name"],i);const o=a(e,["displayName"]);o!=null&&u(n,["displayName"],o);const r=a(e,["description"]);r!=null&&u(n,["description"],r);const s=a(e,["version"]);s!=null&&u(n,["version"],s);const l=a(e,["_self"]);l!=null&&u(n,["tunedModelInfo"],DS(l));const c=a(e,["inputTokenLimit"]);c!=null&&u(n,["inputTokenLimit"],c);const d=a(e,["outputTokenLimit"]);d!=null&&u(n,["outputTokenLimit"],d);const f=a(e,["supportedGenerationMethods"]);f!=null&&u(n,["supportedActions"],f);const p=a(e,["temperature"]);p!=null&&u(n,["temperature"],p);const h=a(e,["maxTemperature"]);h!=null&&u(n,["maxTemperature"],h);const m=a(e,["topP"]);m!=null&&u(n,["topP"],m);const y=a(e,["topK"]);y!=null&&u(n,["topK"],y);const v=a(e,["thinking"]);return v!=null&&u(n,["thinking"],v),n}function Ni(e,t){const n={},i=a(e,["name"]);i!=null&&u(n,["name"],i);const o=a(e,["displayName"]);o!=null&&u(n,["displayName"],o);const r=a(e,["description"]);r!=null&&u(n,["description"],r);const s=a(e,["versionId"]);s!=null&&u(n,["version"],s);const l=a(e,["deployedModels"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>Rv(m))),u(n,["endpoints"],h)}const c=a(e,["labels"]);c!=null&&u(n,["labels"],c);const d=a(e,["_self"]);d!=null&&u(n,["tunedModelInfo"],LS(d));const f=a(e,["defaultCheckpointId"]);f!=null&&u(n,["defaultCheckpointId"],f);const p=a(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),u(n,["checkpoints"],h)}return n}function vS(e,t){const n={},i=a(e,["mediaResolution"]);i!=null&&u(n,["mediaResolution"],i);const o=a(e,["codeExecutionResult"]);o!=null&&u(n,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&u(n,["executableCode"],r);const s=a(e,["fileData"]);s!=null&&u(n,["fileData"],Pv(s));const l=a(e,["functionCall"]);l!=null&&u(n,["functionCall"],Mv(l));const c=a(e,["functionResponse"]);c!=null&&u(n,["functionResponse"],c);const d=a(e,["inlineData"]);d!=null&&u(n,["inlineData"],ov(d));const f=a(e,["text"]);f!=null&&u(n,["text"],f);const p=a(e,["thought"]);p!=null&&u(n,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&u(n,["thoughtSignature"],h);const m=a(e,["videoMetadata"]);return m!=null&&u(n,["videoMetadata"],m),n}function SS(e,t){const n={},i=a(e,["productImage"]);return i!=null&&u(n,["image"],tt(i)),n}function CS(e,t,n){const i={},o=a(e,["numberOfImages"]);t!==void 0&&o!=null&&u(t,["parameters","sampleCount"],o);const r=a(e,["baseSteps"]);t!==void 0&&r!=null&&u(t,["parameters","baseSteps"],r);const s=a(e,["outputGcsUri"]);t!==void 0&&s!=null&&u(t,["parameters","storageUri"],s);const l=a(e,["seed"]);t!==void 0&&l!=null&&u(t,["parameters","seed"],l);const c=a(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&u(t,["parameters","safetySetting"],c);const d=a(e,["personGeneration"]);t!==void 0&&d!=null&&u(t,["parameters","personGeneration"],d);const f=a(e,["addWatermark"]);t!==void 0&&f!=null&&u(t,["parameters","addWatermark"],f);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&u(t,["parameters","outputOptions","mimeType"],p);const h=a(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&u(t,["parameters","outputOptions","compressionQuality"],h);const m=a(e,["enhancePrompt"]);t!==void 0&&m!=null&&u(t,["parameters","enhancePrompt"],m);const y=a(e,["labels"]);return t!==void 0&&y!=null&&u(t,["labels"],y),i}function ES(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["source"]);r!=null&&wS(r,i);const s=a(t,["config"]);return s!=null&&CS(s,i),i}function TS(e,t){const n={},i=a(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Fn(r))),u(n,["generatedImages"],o)}return n}function wS(e,t,n){const i={},o=a(e,["prompt"]);t!==void 0&&o!=null&&u(t,["instances[0]","prompt"],o);const r=a(e,["personImage"]);t!==void 0&&r!=null&&u(t,["instances[0]","personImage","image"],tt(r));const s=a(e,["productImages"]);if(t!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>SS(c))),u(t,["instances[0]","productImages"],l)}return i}function _S(e,t){const n={},i=a(e,["referenceImage"]);i!=null&&u(n,["referenceImage"],tt(i));const o=a(e,["referenceId"]);o!=null&&u(n,["referenceId"],o);const r=a(e,["referenceType"]);r!=null&&u(n,["referenceType"],r);const s=a(e,["maskImageConfig"]);s!=null&&u(n,["maskImageConfig"],xS(s));const l=a(e,["controlImageConfig"]);l!=null&&u(n,["controlImageConfig"],dv(l));const c=a(e,["styleImageConfig"]);c!=null&&u(n,["styleImageConfig"],c);const d=a(e,["subjectImageConfig"]);return d!=null&&u(n,["subjectImageConfig"],d),n}function Da(e,t){const n={},i=a(e,["safetyAttributes","categories"]);i!=null&&u(n,["categories"],i);const o=a(e,["safetyAttributes","scores"]);o!=null&&u(n,["scores"],o);const r=a(e,["contentType"]);return r!=null&&u(n,["contentType"],r),n}function La(e,t){const n={},i=a(e,["safetyAttributes","categories"]);i!=null&&u(n,["categories"],i);const o=a(e,["safetyAttributes","scores"]);o!=null&&u(n,["scores"],o);const r=a(e,["contentType"]);return r!=null&&u(n,["contentType"],r),n}function kS(e,t){const n={},i=a(e,["category"]);if(i!=null&&u(n,["category"],i),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return o!=null&&u(n,["threshold"],o),n}function IS(e,t){const n={},i=a(e,["image"]);return i!=null&&u(n,["image"],tt(i)),n}function AS(e,t,n){const i={},o=a(e,["mode"]);t!==void 0&&o!=null&&u(t,["parameters","mode"],o);const r=a(e,["maxPredictions"]);t!==void 0&&r!=null&&u(t,["parameters","maxPredictions"],r);const s=a(e,["confidenceThreshold"]);t!==void 0&&s!=null&&u(t,["parameters","confidenceThreshold"],s);const l=a(e,["maskDilation"]);t!==void 0&&l!=null&&u(t,["parameters","maskDilation"],l);const c=a(e,["binaryColorThreshold"]);t!==void 0&&c!=null&&u(t,["parameters","binaryColorThreshold"],c);const d=a(e,["labels"]);return t!==void 0&&d!=null&&u(t,["labels"],d),i}function bS(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["source"]);r!=null&&RS(r,i);const s=a(t,["config"]);return s!=null&&AS(s,i),i}function NS(e,t){const n={},i=a(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>tS(r))),u(n,["generatedMasks"],o)}return n}function RS(e,t,n){const i={},o=a(e,["prompt"]);t!==void 0&&o!=null&&u(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&u(t,["instances[0]","image"],tt(r));const s=a(e,["scribbleImage"]);return t!==void 0&&s!=null&&u(t,["instances[0]","scribble"],IS(s)),i}function PS(e,t){const n={},i=a(e,["retrievalConfig"]);i!=null&&u(n,["retrievalConfig"],i);const o=a(e,["functionCallingConfig"]);return o!=null&&u(n,["functionCallingConfig"],Dv(o)),n}function MS(e,t){const n={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(e,["computerUse"]);i!=null&&u(n,["computerUse"],i);const o=a(e,["fileSearch"]);o!=null&&u(n,["fileSearch"],o);const r=a(e,["codeExecution"]);if(r!=null&&u(n,["codeExecution"],r),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=a(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>h)),u(n,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&u(n,["googleMaps"],lS(l));const c=a(e,["googleSearch"]);c!=null&&u(n,["googleSearch"],aS(c));const d=a(e,["googleSearchRetrieval"]);d!=null&&u(n,["googleSearchRetrieval"],d);const f=a(e,["urlContext"]);return f!=null&&u(n,["urlContext"],f),n}function Ua(e,t){const n={},i=a(e,["retrieval"]);i!=null&&u(n,["retrieval"],i);const o=a(e,["computerUse"]);if(o!=null&&u(n,["computerUse"],o),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(e,["codeExecution"]);r!=null&&u(n,["codeExecution"],r);const s=a(e,["enterpriseWebSearch"]);s!=null&&u(n,["enterpriseWebSearch"],s);const l=a(e,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>Lv(m))),u(n,["functionDeclarations"],h)}const c=a(e,["googleMaps"]);c!=null&&u(n,["googleMaps"],c);const d=a(e,["googleSearch"]);d!=null&&u(n,["googleSearch"],d);const f=a(e,["googleSearchRetrieval"]);f!=null&&u(n,["googleSearchRetrieval"],f);const p=a(e,["urlContext"]);return p!=null&&u(n,["urlContext"],p),n}function DS(e,t){const n={},i=a(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const o=a(e,["createTime"]);o!=null&&u(n,["createTime"],o);const r=a(e,["updateTime"]);return r!=null&&u(n,["updateTime"],r),n}function LS(e,t){const n={},i=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&u(n,["baseModel"],i);const o=a(e,["createTime"]);o!=null&&u(n,["createTime"],o);const r=a(e,["updateTime"]);return r!=null&&u(n,["updateTime"],r),n}function US(e,t,n){const i={},o=a(e,["displayName"]);t!==void 0&&o!=null&&u(t,["displayName"],o);const r=a(e,["description"]);t!==void 0&&r!=null&&u(t,["description"],r);const s=a(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&u(t,["defaultCheckpointId"],s),i}function FS(e,t,n){const i={},o=a(e,["displayName"]);t!==void 0&&o!=null&&u(t,["displayName"],o);const r=a(e,["description"]);t!==void 0&&r!=null&&u(t,["description"],r);const s=a(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&u(t,["defaultCheckpointId"],s),i}function BS(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","name"],ae(e,o));const r=a(t,["config"]);return r!=null&&US(r,i),i}function GS(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["config"]);return r!=null&&FS(r,i),i}function VS(e,t,n){const i={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&u(t,["parameters","storageUri"],o);const r=a(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&u(t,["parameters","safetySetting"],r);const s=a(e,["personGeneration"]);t!==void 0&&s!=null&&u(t,["parameters","personGeneration"],s);const l=a(e,["includeRaiReason"]);t!==void 0&&l!=null&&u(t,["parameters","includeRaiReason"],l);const c=a(e,["outputMimeType"]);t!==void 0&&c!=null&&u(t,["parameters","outputOptions","mimeType"],c);const d=a(e,["outputCompressionQuality"]);t!==void 0&&d!=null&&u(t,["parameters","outputOptions","compressionQuality"],d);const f=a(e,["enhanceInputImage"]);t!==void 0&&f!=null&&u(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=a(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&u(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=a(e,["labels"]);t!==void 0&&h!=null&&u(t,["labels"],h);const m=a(e,["numberOfImages"]);t!==void 0&&m!=null&&u(t,["parameters","sampleCount"],m);const y=a(e,["mode"]);return t!==void 0&&y!=null&&u(t,["parameters","mode"],y),i}function HS(e,t,n){const i={},o=a(t,["model"]);o!=null&&u(i,["_url","model"],ae(e,o));const r=a(t,["image"]);r!=null&&u(i,["instances[0]","image"],tt(r));const s=a(t,["upscaleFactor"]);s!=null&&u(i,["parameters","upscaleConfig","upscaleFactor"],s);const l=a(t,["config"]);return l!=null&&VS(l,i),i}function OS(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Fn(s))),u(n,["generatedImages"],r)}return n}function qS(e,t){const n={},i=a(e,["uri"]);i!=null&&u(n,["uri"],i);const o=a(e,["encodedVideo"]);o!=null&&u(n,["videoBytes"],ft(o));const r=a(e,["encoding"]);return r!=null&&u(n,["mimeType"],r),n}function zS(e,t){const n={},i=a(e,["gcsUri"]);i!=null&&u(n,["uri"],i);const o=a(e,["bytesBase64Encoded"]);o!=null&&u(n,["videoBytes"],ft(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function $S(e,t){const n={},i=a(e,["image"]);i!=null&&u(n,["_self"],tt(i));const o=a(e,["maskMode"]);return o!=null&&u(n,["maskMode"],o),n}function JS(e,t){const n={},i=a(e,["image"]);i!=null&&u(n,["image"],Bn(i));const o=a(e,["referenceType"]);return o!=null&&u(n,["referenceType"],o),n}function WS(e,t){const n={},i=a(e,["image"]);i!=null&&u(n,["image"],tt(i));const o=a(e,["referenceType"]);return o!=null&&u(n,["referenceType"],o),n}function Fa(e,t){const n={},i=a(e,["uri"]);i!=null&&u(n,["uri"],i);const o=a(e,["videoBytes"]);o!=null&&u(n,["encodedVideo"],ft(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["encoding"],r),n}function Ba(e,t){const n={},i=a(e,["uri"]);i!=null&&u(n,["gcsUri"],i);const o=a(e,["videoBytes"]);o!=null&&u(n,["bytesBase64Encoded"],ft(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YS(e,t){const n={},i=a(e,["displayName"]);return t!==void 0&&i!=null&&u(t,["displayName"],i),n}function KS(e){const t={},n=a(e,["config"]);return n!=null&&YS(n,t),t}function XS(e,t){const n={},i=a(e,["force"]);return t!==void 0&&i!=null&&u(t,["_query","force"],i),n}function QS(e){const t={},n=a(e,["name"]);n!=null&&u(t,["_url","name"],n);const i=a(e,["config"]);return i!=null&&XS(i,t),t}function ZS(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","name"],n),t}function jS(e,t){const n={},i=a(e,["customMetadata"]);if(t!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["customMetadata"],r)}const o=a(e,["chunkingConfig"]);return t!==void 0&&o!=null&&u(t,["chunkingConfig"],o),n}function eC(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const r=a(e,["error"]);r!=null&&u(t,["error"],r);const s=a(e,["response"]);return s!=null&&u(t,["response"],nC(s)),t}function tC(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&u(t,["_url","file_search_store_name"],n);const i=a(e,["fileName"]);i!=null&&u(t,["fileName"],i);const o=a(e,["config"]);return o!=null&&jS(o,t),t}function nC(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["parent"]);i!=null&&u(t,["parent"],i);const o=a(e,["documentName"]);return o!=null&&u(t,["documentName"],o),t}function iC(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function oC(e){const t={},n=a(e,["config"]);return n!=null&&iC(n,t),t}function rC(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["fileSearchStores"],r)}return t}function Ga(e,t){const n={},i=a(e,["mimeType"]);t!==void 0&&i!=null&&u(t,["mimeType"],i);const o=a(e,["displayName"]);t!==void 0&&o!=null&&u(t,["displayName"],o);const r=a(e,["customMetadata"]);if(t!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),u(t,["customMetadata"],l)}const s=a(e,["chunkingConfig"]);return t!==void 0&&s!=null&&u(t,["chunkingConfig"],s),n}function sC(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&u(t,["_url","file_search_store_name"],n);const i=a(e,["config"]);return i!=null&&Ga(i,t),t}function lC(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aC="Content-Type",uC="X-Server-Timeout",cC="User-Agent",Ri="x-goog-api-client",dC="1.39.0",fC=`google-genai-sdk/${dC}`,pC="v1beta1",hC="v1beta";class mC{constructor(t){var n,i,o;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!l?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:pC}else{if(!this.clientOptions.apiKey)throw new Kt({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:hC,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===_i.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[s,l]of Object.entries(t.queryParams))o.searchParams.append(s,String(l));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.unaryApiCall(o,r,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,r]of Object.entries(n))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.streamApiCall(o,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){const r=new AbortController,s=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>r.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&gC(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ws(o),new ki(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ws(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return je(this,arguments,function*(){var i;const o=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield te(o.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=r.decode(f,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),S=v.status,x=v.code,A=`got status: ${S}. ${JSON.stringify(y)}`;if(x>=400&&x<600)throw new Kt({message:A,status:x})}}catch(y){if(y.name==="ApiError")throw y}s+=p;let h=-1,m=0;for(;;){h=-1,m=0;for(const S of c){const x=s.indexOf(S);x!==-1&&(h===-1||x<h)&&(h=x,m=S.length)}if(h===-1)break;const y=s.substring(0,h);s=s.substring(h+m);const v=y.trim();if(v.startsWith(l)){const S=v.substring(l.length).trim();try{const x=new Response(S,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield te(new ki(x))}catch(x){throw new Error(`exception parsing stream chunk ${S}. ${x}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=fC+" "+this.clientOptions.userAgentExtra;return t[cC]=n,t[Ri]=n,t[aC]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[o,r]of Object.entries(t.headers))i.append(o,r);t.timeout&&t.timeout>0&&i.append(uC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,s=await r.stat(t);o.sizeBytes=String(s.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=l;const c={file:o},d=this.getFileName(t),f=V("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,c,n==null?void 0:n.httpOptions);return r.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,i){var o;const r=this.clientOptions.uploader,s=await r.stat(n),l=String(s.size),c=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),p={};i!=null&&Ga(i,p);const h=await this.fetchUploadUrl(d,l,c,f,p,i==null?void 0:i.httpOptions);return r.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,r,s){var l;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Ws(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Kt({message:o,status:n}):new Error(o)}}function gC(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,s){const l=Object.assign({},r);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yC="mcp_used/unknown";let xC=!1;function Va(e){for(const t of e)if(vC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return xC}function Ha(e){var t;const n=(t=e[Ri])!==null&&t!==void 0?t:"";e[Ri]=(n+` ${yC}`).trimStart()}function vC(e){return e!==null&&typeof e=="object"&&e instanceof co}function SC(e){return je(this,arguments,function*(n,i=100){let o,r=0;for(;r<i;){const s=yield te(n.listTools({cursor:o}));for(const l of s.tools)yield yield te(l),r++;if(!s.nextCursor)break;o=s.nextCursor}})}class co{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new co(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const r={},s=[];for(const f of this.mcpClients)try{for(var l=!0,c=(n=void 0,et(SC(f))),d;d=await c.next(),t=d.done,!t;l=!0){o=d.value,l=!1;const p=o;s.push(p);const h=p.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=f}}catch(p){n={error:p}}finally{try{!l&&!t&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),Ky(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const s=await o.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CC(e,t,n){const i=new Hy;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}class EC{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=_C(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(k=>{d=k}),p=t.callbacks,h=function(){d({})},m=this.apiClient,y={onopen:h,onmessage:k=>{CC(m,p.onmessage,k)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(k){}},v=this.webSocketFactory.create(c,wC(s),y);v.connect(),await f;const A={setup:{model:ae(this.apiClient,t.model)}};return v.send(JSON.stringify(A)),new TC(v,this.apiClient)}}class TC{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Yx(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=Wx(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(kt.PLAY)}pause(){this.sendPlaybackControl(kt.PAUSE)}stop(){this.sendPlaybackControl(kt.STOP)}resetContext(){this.sendPlaybackControl(kt.RESET_CONTEXT)}close(){this.conn.close()}}function wC(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function _C(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function IC(e,t,n){const i=new Vy;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const r=JSON.parse(o);if(e.isVertexAI()){const s=Qx(r);Object.assign(i,s)}else Object.assign(i,r);t(i)}class AC{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new EC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,r,s,l;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&Va(t.config.tools)&&Ha(p);const h=PC(p);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),_=this.apiClient.getLocation(),U=this.apiClient.getApiKey(),G=!!M&&!!_||!!U;this.apiClient.getCustomBaseUrl()&&!G?f=c:(f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f))}else{const M=this.apiClient.getApiKey();let _="BidiGenerateContent",U="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),_="BidiGenerateContentConstrained",U="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${_}?${U}=${M}`}let m=()=>{};const y=new Promise(M=>{m=M}),v=t.callbacks,S=function(){var M;(M=v==null?void 0:v.onopen)===null||M===void 0||M.call(v),m({})},x=this.apiClient,A={onopen:S,onmessage:M=>{IC(x,v.onmessage,M)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(M){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(M){}},k=this.webSocketFactory.create(f,RC(h),A);k.connect(),await y;let R=ae(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const M=this.apiClient.getProject(),_=this.apiClient.getLocation();M&&_&&(R=`projects/${M}/locations/${_}/`+R)}let w={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Tn.AUDIO]}:t.config.responseModalities=[Tn.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(l=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],D=[];for(const M of I)if(this.isCallableTool(M)){const _=M;D.push(await _.tool())}else D.push(M);D.length>0&&(t.config.tools=D);const H={model:R,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?w=Jx(this.apiClient,H):w=$x(this.apiClient,H),delete w.config,k.send(JSON.stringify(w)),new NC(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const bC={turnComplete:!0};class NC{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=We(n.turns),t.isVertexAI()||(i=i.map(o=>Un(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(kC)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},bC),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Xx(t)}:n={realtimeInput:Kx(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function RC(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function PC(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ys=10;function Ks(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Nt(s)){o=!0;break}if(!o)return!0;const r=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Nt(e){return"callTool"in e&&typeof e.callTool=="function"}function MC(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>Nt(o)))!==null&&i!==void 0?i:!1}function Xs(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(Nt(i))return;const r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(o)}),n}function Qs(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DC extends st{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,r,s,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!MC(n)||Ks(n.config))return await this.generateContentInternal(c);const d=Xs(n);if(d.length>0){const v=d.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let f,p;const h=We(c.contents),m=(r=(o=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Ys;let y=0;for(;y<m&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const v=f.candidates[0].content,S=[];for(const x of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Nt(x)){const k=await x.callTool(f.functionCalls);S.push(...k)}y++,p={role:"user",parts:S},c.contents=We(c.contents),c.contents.push(v),c.contents.push(p),Qs(c.config)&&(h.push(v),h.push(p))}return Qs(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var i,o,r,s,l;if(this.maybeMoveToResponseJsonSchem(n),Ks(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=Xs(n);if(c.length>0){const p=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(r=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let r;const s=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=c==null?void 0:c.safetyAttributes:s.push(c);let l;return r?l={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Et(ot.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,r,s,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0)&&s.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;const s=await Promise.all(r.map(async c=>Nt(c)?await c.tool():c)),l={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(l.config.tools=s,t.config&&t.config.tools&&Va(t.config.tools)){const c=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Ha(d),l.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(t){var n,i,o;const r=new Map;for(const s of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Nt(s)){const l=s,c=await l.tool();for(const d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,l)}}return r}async processAfcStream(t){var n,i,o;const r=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Ys;let s=!1,l=0;const c=await this.initAfcToolsMap(t);return function(d,f,p){return je(this,arguments,function*(){for(var h,m,y,v,S,x;l<r;){s&&(l++,s=!1);const w=yield te(d.processParamsMaybeAddMcpUsage(p)),I=yield te(d.generateContentStreamInternal(w)),D=[],H=[];try{for(var A=!0,k=(m=void 0,et(I)),R;R=yield te(k.next()),h=R.done,!h;A=!0){v=R.value,A=!1;const M=v;if(yield yield te(M),M.candidates&&(!((S=M.candidates[0])===null||S===void 0)&&S.content)){H.push(M.candidates[0].content);for(const _ of(x=M.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(l<r&&_.functionCall){if(!_.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(_.functionCall.name)){const U=yield te(f.get(_.functionCall.name).callTool([_.functionCall]));D.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${_.functionCall.name}`)}}}}catch(M){m={error:M}}finally{try{!A&&!h&&(y=k.return)&&(yield te(y.call(k)))}finally{if(m)throw m.error}}if(D.length>0){s=!0;const M=new Ht;M.candidates=[{content:{role:"user",parts:D}}],yield yield te(M);const _=[];_.push(...H),_.push({role:"user",parts:D});const U=We(p.contents).concat(_);p.contents=U}else break}})}(this,c,t)}async generateContentInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=zs(this.apiClient,t);return l=V("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Js(f),h=new Ht;return Object.assign(h,p),h})}else{const d=qs(this.apiClient,t);return l=V("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=$s(f),h=new Ht;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=zs(this.apiClient,t);return l=V("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return je(this,arguments,function*(){var h,m,y,v;try{for(var S=!0,x=et(p),A;A=yield te(x.next()),h=A.done,!h;S=!0){v=A.value,S=!1;const k=v,R=Js(yield te(k.json()),t);R.sdkHttpResponse={headers:k.headers};const w=new Ht;Object.assign(w,R),yield yield te(w)}}catch(k){m={error:k}}finally{try{!S&&!h&&(y=x.return)&&(yield te(y.call(x)))}finally{if(m)throw m.error}}})})}else{const d=qs(this.apiClient,t);return l=V("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return je(this,arguments,function*(){var h,m,y,v;try{for(var S=!0,x=et(p),A;A=yield te(x.next()),h=A.done,!h;S=!0){v=A.value,S=!1;const k=v,R=$s(yield te(k.json()),t);R.sdkHttpResponse={headers:k.headers};const w=new Ht;Object.assign(w,R),yield yield te(w)}}catch(k){m={error:k}}finally{try{!S&&!h&&(y=x.return)&&(yield te(y.call(x)))}finally{if(m)throw m.error}}})})}}async embedContent(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=Av(this.apiClient,t);return l=V("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Nv(f),h=new ks;return Object.assign(h,p),h})}else{const d=Iv(this.apiClient,t);return l=V("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bv(f),h=new ks;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=Hv(this.apiClient,t);return l=V("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=qv(f),h=new Is;return Object.assign(h,p),h})}else{const d=Vv(this.apiClient,t);return l=V("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ov(f),h=new Is;return Object.assign(h,p),h})}}async editImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=Tv(this.apiClient,t);return r=V("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=wv(c),f=new Ay;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=HS(this.apiClient,t);return r=V("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=OS(c),f=new by;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=ES(this.apiClient,t);return r=V("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=TS(c),f=new Ny;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=bS(this.apiClient,t);return r=V("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=NS(c),f=new Ry;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=sS(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ni(f))}else{const d=rS(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>bi(f))}}async listInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=mS(this.apiClient,t);return l=V("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=yS(f),h=new As;return Object.assign(h,p),h})}else{const d=hS(this.apiClient,t);return l=V("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gS(f),h=new As;return Object.assign(h,p),h})}}async update(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=GS(this.apiClient,t);return l=V("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ni(f))}else{const d=BS(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>bi(f))}}async delete(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=vv(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Cv(f),h=new bs;return Object.assign(h,p),h})}else{const d=xv(this.apiClient,t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Sv(f),h=new bs;return Object.assign(h,p),h})}}async countTokens(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=mv(this.apiClient,t);return l=V("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=yv(f),h=new Ns;return Object.assign(h,p),h})}else{const d=hv(this.apiClient,t);return l=V("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gv(f),h=new Ns;return Object.assign(h,p),h})}}async computeTokens(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=lv(this.apiClient,t);return r=V("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=av(c),f=new Py;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=Kv(this.apiClient,t);return l=V("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Wv(f),h=new wn;return Object.assign(h,p),h})}else{const d=Yv(this.apiClient,t);return l=V("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Jv(f),h=new wn;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LC extends st{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=Ey(t);return l=V("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else{const d=Cy(t);return l=V("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=hy(t);return r=V("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UC(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function FC(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>JC(r))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function BC(e,t,n){const i={},o=a(t,["expireTime"]);n!==void 0&&o!=null&&u(n,["expireTime"],o);const r=a(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&u(n,["newSessionExpireTime"],r);const s=a(t,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const l=a(t,["liveConnectConstraints"]);n!==void 0&&l!=null&&u(n,["bidiGenerateContentSetup"],$C(e,l));const c=a(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),i}function GC(e,t){const n={},i=a(t,["config"]);return i!=null&&u(n,["config"],BC(e,i,n)),n}function VC(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function HC(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const i=a(e,["args"]);i!=null&&u(t,["args"],i);const o=a(e,["name"]);if(o!=null&&u(t,["name"],o),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function OC(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function qC(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function zC(e,t){const n={},i=a(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],i);const o=a(e,["responseModalities"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","responseModalities"],o);const r=a(e,["temperature"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","temperature"],r);const s=a(e,["topP"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topK"],l);const c=a(e,["maxOutputTokens"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","maxOutputTokens"],c);const d=a(e,["mediaResolution"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","mediaResolution"],d);const f=a(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","speechConfig"],uo(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const m=a(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],m);const y=a(e,["systemInstruction"]);t!==void 0&&y!=null&&u(t,["setup","systemInstruction"],FC(be(y)));const v=a(e,["tools"]);if(t!==void 0&&v!=null){let I=Lt(v);Array.isArray(I)&&(I=I.map(D=>YC(Dt(D)))),u(t,["setup","tools"],I)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&u(t,["setup","sessionResumption"],WC(S));const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","inputAudioTranscription"],x);const A=a(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&u(t,["setup","outputAudioTranscription"],A);const k=a(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&u(t,["setup","realtimeInputConfig"],k);const R=a(e,["contextWindowCompression"]);t!==void 0&&R!=null&&u(t,["setup","contextWindowCompression"],R);const w=a(e,["proactivity"]);if(t!==void 0&&w!=null&&u(t,["setup","proactivity"],w),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $C(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["setup","model"],ae(e,i));const o=a(t,["config"]);return o!=null&&u(n,["config"],zC(o,n)),n}function JC(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const r=a(e,["fileData"]);r!=null&&u(t,["fileData"],VC(r));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],HC(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],UC(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function WC(e){const t={},n=a(e,["handle"]);if(n!=null&&u(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function YC(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const i=a(e,["fileSearch"]);i!=null&&u(t,["fileSearch"],i);const o=a(e,["codeExecution"]);if(o!=null&&u(t,["codeExecution"],o),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=a(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],OC(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],qC(l));const c=a(e,["googleSearchRetrieval"]);c!=null&&u(t,["googleSearchRetrieval"],c);const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KC(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(r=>`${n}.${r}`);t.push(...o)}else t.push(n)}return t.join(",")}function XC(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const r=KC(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?e.fieldMask=r:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];o.length>0&&(l=o.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];r&&c.push(r),l.length>0&&c.push(...l),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class QC extends st{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=GC(this.apiClient,t);r=V("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const c=XC(l,t.config);return o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(e,t){const n={},i=a(e,["force"]);return t!==void 0&&i!=null&&u(t,["_query","force"],i),n}function jC(e){const t={},n=a(e,["name"]);n!=null&&u(t,["_url","name"],n);const i=a(e,["config"]);return i!=null&&ZC(i,t),t}function eE(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","name"],n),t}function tE(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function nE(e){const t={},n=a(e,["parent"]);n!=null&&u(t,["_url","parent"],n);const i=a(e,["config"]);return i!=null&&tE(i,t),t}function iE(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),u(t,["documents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oE extends st{constructor(t){super(),this.apiClient=t,this.list=async n=>new Et(ot.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eE(t);return r=V("{name}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jC(t);o=V("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=nE(t);return r=V("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=iE(c),f=new My;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rE extends st{constructor(t,n=new oE(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Et(ot.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=KS(t);return r=V("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ZS(t);return r=V("{name}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=QS(t);o=V("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=oC(t);return r=V("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=rC(c),f=new Dy;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sC(t);return r=V("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=lC(c),f=new Ly;return Object.assign(f,d),f})}}async importFile(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=tC(t);return r=V("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=eC(c),f=new oo;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Oa=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Oa=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const sE=()=>Oa();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pi(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Mi=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ye extends Error{}class Le extends Ye{constructor(t,n,i,o){super(`${Le.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new Gn({message:i,cause:Mi(n)});const r=n;return t===400?new za(t,r,i,o):t===401?new $a(t,r,i,o):t===403?new Ja(t,r,i,o):t===404?new Wa(t,r,i,o):t===409?new Ya(t,r,i,o):t===422?new Ka(t,r,i,o):t===429?new Xa(t,r,i,o):t>=500?new Qa(t,r,i,o):new Le(t,r,i,o)}}class Di extends Le{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Gn extends Le{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class qa extends Gn{constructor({message:t}={}){super({message:t??"Request timed out."})}}class za extends Le{}class $a extends Le{}class Ja extends Le{}class Wa extends Le{}class Ya extends Le{}class Ka extends Le{}class Xa extends Le{}class Qa extends Le{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lE=/^[a-z][a-z0-9+.-]*:/i,aE=e=>lE.test(e);let Li=e=>(Li=Array.isArray,Li(e));const uE=Li;let cE=uE;const Zs=cE;function dE(e){if(!e)return!0;for(const t in e)return!1;return!0}function fE(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const pE=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ye(`${e} must be an integer`);if(t<0)throw new Ye(`${e} must be a positive integer`);return t},hE=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mE=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _t="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gE(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const yE=()=>{var e,t,n,i,o;const r=gE();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_t,"X-Stainless-OS":el(Deno.build.os),"X-Stainless-Arch":js(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_t,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_t,"X-Stainless-OS":el((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":js((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const s=xE();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_t,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_t,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xE(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:t,version:`${o}.${r}.${s}`}}}return null}const js=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",el=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let sn;const vE=()=>sn??(sn=yE());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SE(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Za(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function CE(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Za({start(){},async pull(n){const{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function ja(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function EE(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TE=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eu=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ri(e,t,n){return eu(),new File(e,t??"unknown_file",n)}function wE(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const _E=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tu=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",kE=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&tu(e),IE=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function AE(e,t,n){if(eu(),e=await e,kE(e))return e instanceof File?e:ri([await e.arrayBuffer()],e.name);if(IE(e)){const o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),ri(await Ui(o),t,n)}const i=await Ui(e);if(t||(t=wE(e)),!(n!=null&&n.type)){const o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return ri(i,t,n)}async function Ui(e){var t,n,i,o,r;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(tu(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(_E(e))try{for(var l=!0,c=et(e),d;d=await c.next(),t=d.done,!t;l=!0){o=d.value,l=!1;const f=o;s.push(...await Ui(f))}}catch(f){n={error:f}}finally{try{!l&&!t&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}else{const f=(r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof e}${f?`; constructor: ${f}`:""}${bE(e)}`)}return s}function bE(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nu{constructor(t){this._client=t}}nu._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iu(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const tl=Object.freeze(Object.create(null)),NE=(e=iu)=>function(n,...i){if(n.length===1)return n[0];let o=!1;const r=[],s=n.reduce((f,p,h)=>{var m,y,v;/[?#]/.test(p)&&(o=!0);const S=i[h];let x=(o?encodeURIComponent:e)(""+S);return h!==i.length&&(S==null||typeof S=="object"&&S.toString===((v=Object.getPrototypeOf((y=Object.getPrototypeOf((m=S.hasOwnProperty)!==null&&m!==void 0?m:tl))!==null&&y!==void 0?y:tl))===null||v===void 0?void 0:v.toString))&&(x=S+"",r.push({start:f.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),f+p+(h===i.length?"":x)},""),l=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)r.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(r.sort((f,p)=>f.start-p.start),r.length>0){let f=0;const p=r.reduce((h,m)=>{const y=" ".repeat(m.start-f),v="^".repeat(m.length);return f=m.start+m.length,h+y+v},"");throw new Ye(`Path parameters result in path with invalid segments:
${r.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},ln=NE(iu);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ou extends nu{create(t,n){var i;const{api_version:o=this._client.apiVersion}=t,r=kn(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new Ye("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Ye("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ln`/${o}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(ln`/${o}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(ln`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;const r=n??{},{api_version:s=this._client.apiVersion}=r,l=kn(r,["api_version"]);return this._client.get(ln`/${s}/interactions/${t}`,Object.assign(Object.assign({query:l},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}ou._key=Object.freeze(["interactions"]);class ru extends ou{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RE(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let i=0;for(const o of e)n.set(o,i),i+=o.length;return n}let an;function fo(e){let t;return(an??(t=new globalThis.TextEncoder,an=t.encode.bind(t)))(e)}let un;function nl(e){let t;return(un??(t=new globalThis.TextDecoder,un=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vn{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?fo(t):t;this.buffer=RE([this.buffer,n]);const i=[];let o;for(;(o=PE(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(nl(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=nl(this.buffer.subarray(0,r));i.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Vn.NEWLINE_CHARS=new Set([`
`,"\r"]);Vn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PE(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function ME(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const In={off:0,error:200,warn:300,info:400,debug:500},il=(e,t,n)=>{if(e){if(fE(In,e))return e;Me(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(In))}`)}};function qt(){}function cn(e,t,n){return!t||In[e]>In[n]?qt:t[e].bind(t)}const DE={error:qt,warn:qt,info:qt,debug:qt};let ol=new WeakMap;function Me(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return DE;const o=ol.get(n);if(o&&o[0]===i)return o[1];const r={error:cn("error",n,i),warn:cn("warn",n,i),info:cn("info",n,i),debug:cn("debug",n,i)};return ol.set(n,[i,r]),r}const yt=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class It{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1;const r=i?Me(i):console;function s(){return je(this,arguments,function*(){var c,d,f,p;if(o)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,y=et(LE(t,n)),v;v=yield te(y.next()),c=v.done,!c;m=!0){p=v.value,m=!1;const S=p;if(!h)if(S.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield te(JSON.parse(S.data))}catch(x){throw r.error("Could not parse message into JSON:",S.data),r.error("From chunk:",S.raw),x}}}catch(S){d={error:S}}finally{try{!m&&!c&&(f=y.return)&&(yield te(f.call(y)))}finally{if(d)throw d.error}}h=!0}catch(S){if(Pi(S))return yield te(void 0);throw S}finally{h||n.abort()}})}return new It(s,n,i)}static fromReadableStream(t,n,i){let o=!1;function r(){return je(this,arguments,function*(){var c,d,f,p;const h=new Vn,m=ja(t);try{for(var y=!0,v=et(m),S;S=yield te(v.next()),c=S.done,!c;y=!0){p=S.value,y=!1;const x=p;for(const A of h.decode(x))yield yield te(A)}}catch(x){d={error:x}}finally{try{!y&&!c&&(f=v.return)&&(yield te(f.call(v)))}finally{if(d)throw d.error}}for(const x of h.flush())yield yield te(x)})}function s(){return je(this,arguments,function*(){var c,d,f,p;if(o)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,y=et(r()),v;v=yield te(y.next()),c=v.done,!c;m=!0){p=v.value,m=!1;const S=p;h||S&&(yield yield te(JSON.parse(S)))}}catch(S){d={error:S}}finally{try{!m&&!c&&(f=y.return)&&(yield te(f.call(y)))}finally{if(d)throw d.error}}h=!0}catch(S){if(Pi(S))return yield te(void 0);throw S}finally{h||n.abort()}})}return new It(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){const s=i.next();t.push(s),n.push(s)}return r.shift()}});return[new It(()=>o(t),this.controller,this.client),new It(()=>o(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Za({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:r}=await n.next();if(r)return i.close();const s=fo(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function LE(e,t){return je(this,arguments,function*(){var i,o,r,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ye("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ye("Attempted to iterate over a response with no body");const l=new FE,c=new Vn,d=ja(e.body);try{for(var f=!0,p=et(UE(d)),h;h=yield te(p.next()),i=h.done,!i;f=!0){s=h.value,f=!1;const m=s;for(const y of c.decode(m)){const v=l.decode(y);v&&(yield yield te(v))}}}catch(m){o={error:m}}finally{try{!f&&!i&&(r=p.return)&&(yield te(r.call(p)))}finally{if(o)throw o.error}}for(const m of c.flush()){const y=l.decode(m);y&&(yield yield te(y))}})}function UE(e){return je(this,arguments,function*(){var n,i,o,r;let s=new Uint8Array;try{for(var l=!0,c=et(e),d;d=yield te(c.next()),n=d.done,!n;l=!0){r=d.value,l=!1;const f=r;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?fo(f):f;let h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let m;for(;(m=ME(s))!==-1;)yield yield te(s.slice(0,m)),s=s.slice(m)}}catch(f){i={error:f}}finally{try{!l&&!n&&(o=c.return)&&(yield te(o.call(c)))}finally{if(i)throw i.error}}s.length>0&&(yield yield te(s))})}class FE{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=BE(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function BE(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GE(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:r}=t,s=await(async()=>{var l;if(t.options.stream)return Me(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):It.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return Me(e).debug(`[${i}] response parsed`,yt({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class po extends Promise{constructor(t,n,i=GE){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new po(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const su=Symbol("brand.privateNullableHeaders");function*VE(e){if(!e)return;if(su in e){const{values:i,nulls:o}=e;yield*i.entries();for(const r of o)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Zs(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const r=Zs(i[1])?i[1]:[i[1]];let s=!1;for(const l of r)l!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,l])}}const Ot=e=>{const t=new Headers,n=new Set;for(const i of e){const o=new Set;for(const[r,s]of VE(i)){const l=r.toLowerCase();o.has(l)||(t.delete(r),o.add(l)),s===null?(t.delete(r),n.add(l)):(t.append(r,s),n.delete(l))}}return{[su]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const si=e=>{var t,n,i,o,r,s;if(typeof globalThis.process<"u")return(i=(n=(t=ay)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,e))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lu;class Hn{constructor(t){var n,i,o,r,s,l,c,{baseURL:d=si("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=si("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,h=kn(t,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:f,apiVersion:p},h),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(i=m.timeout)!==null&&i!==void 0?i:Hn.DEFAULT_TIMEOUT,this.logger=(o=m.logger)!==null&&o!==void 0?o:console;const y="warn";this.logLevel=y,this.logLevel=(s=(r=il(m.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:il(si("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:y,this.fetchOptions=m.fetchOptions,this.maxRetries=(l=m.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=m.fetch)!==null&&c!==void 0?c:SE(),this.encoder=TE,this._options=m,this.apiKey=f,this.apiVersion=p,this.clientAdapter=m.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Ot([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ot([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ot([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ye(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${_t}`}defaultIdempotencyKey(){return`stainless-node-retry-${sE()}`}makeStatusError(t,n,i,o){return Le.generate(t,n,i,o)}buildURL(t,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,r=aE(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return dE(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new po(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,r,s;const l=await t,c=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:f,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:l});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Me(this).debug(`[${h}] sending request`,yt({retryOfRequestLogID:i,method:l.method,url:f,options:l,headers:d.headers})),!((r=l.signal)===null||r===void 0)&&r.aborted)throw new Di;const v=new AbortController,S=await this.fetchWithTimeout(f,d,p,v).catch(Mi),x=Date.now();if(S instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Di;const R=Pi(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Me(this).info(`[${h}] connection ${R?"timed out":"failed"} - ${k}`),Me(this).debug(`[${h}] connection ${R?"timed out":"failed"} (${k})`,yt({retryOfRequestLogID:i,url:f,durationMs:x-y,message:S.message})),this.retryRequest(l,n,i??h);throw Me(this).info(`[${h}] connection ${R?"timed out":"failed"} - error; no more retries left`),Me(this).debug(`[${h}] connection ${R?"timed out":"failed"} (error; no more retries left)`,yt({retryOfRequestLogID:i,url:f,durationMs:x-y,message:S.message})),R?new qa:new Gn({cause:S})}const A=`[${h}${m}] ${d.method} ${f} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${x-y}ms`;if(!S.ok){const k=await this.shouldRetry(S);if(n&&k){const M=`retrying, ${n} attempts remaining`;return await EE(S.body),Me(this).info(`${A} - ${M}`),Me(this).debug(`[${h}] response error (${M})`,yt({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:x-y})),this.retryRequest(l,n,i??h,S.headers)}const R=k?"error; no more retries left":"error; not retryable";Me(this).info(`${A} - ${R}`);const w=await S.text().catch(M=>Mi(M).message),I=hE(w),D=I?void 0:w;throw Me(this).debug(`[${h}] response error (${R})`,yt({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,message:D,durationMs:Date.now()-y})),this.makeStatusError(S.status,I,D,S.headers)}return Me(this).info(A),Me(this).debug(`[${h}] response start`,yt({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:x-y})),{response:S,options:l,controller:v,requestLogID:h,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(t,n,i,o){const r=n||{},{signal:s,method:l}=r,c=kn(r,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());const d=setTimeout(()=>o.abort(),i),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var r;let s;const l=o==null?void 0:o.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(s=d)}const c=o==null?void 0:o.get("retry-after");if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await mE(s),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const r=n-t,s=Math.min(.5*Math.pow(2,r),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,r;const s=Object.assign({},t),{method:l,path:c,query:d,defaultBaseURL:f}=s,p=this.buildURL(c,d,f);"timeout"in s&&pE("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:s}),y=await this.buildHeaders({options:t,method:l,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(r=s.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const s=await this.authHeaders(t);let l=Ot([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),vE()),this._options.defaultHeaders,i,t.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=Ot([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:CE(t)}:this.encoder({body:t,headers:i})}}Hn.DEFAULT_TIMEOUT=6e4;class we extends Hn{constructor(){super(...arguments),this.interactions=new ru(this)}}lu=we;we.GeminiNextGenAPIClient=lu;we.GeminiNextGenAPIClientError=Ye;we.APIError=Le;we.APIConnectionError=Gn;we.APIConnectionTimeoutError=qa;we.APIUserAbortError=Di;we.NotFoundError=Wa;we.ConflictError=Ya;we.RateLimitError=Xa;we.BadRequestError=za;we.AuthenticationError=$a;we.InternalServerError=Qa;we.PermissionDeniedError=Ja;we.UnprocessableEntityError=Ka;we.toFile=AE;we.Interactions=ru;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HE(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function OE(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function qE(e,t){const n={},i=a(e,["sdkHttpResponse"]);return i!=null&&u(n,["sdkHttpResponse"],i),n}function zE(e,t){const n={},i=a(e,["sdkHttpResponse"]);return i!=null&&u(n,["sdkHttpResponse"],i),n}function $E(e,t,n){const i={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=a(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&u(t,["displayName"],o),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=a(e,["epochCount"]);t!==void 0&&r!=null&&u(t,["tuningTask","hyperparameters","epochCount"],r);const s=a(e,["learningRateMultiplier"]);if(s!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(a(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(a(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const l=a(e,["batchSize"]);t!==void 0&&l!=null&&u(t,["tuningTask","hyperparameters","batchSize"],l);const c=a(e,["learningRate"]);if(t!==void 0&&c!=null&&u(t,["tuningTask","hyperparameters","learningRate"],c),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(a(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(a(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(a(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(a(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function JE(e,t,n){const i={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=a(e,["validationDataset"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec"],li(w))}else if(o==="PREFERENCE_TUNING"){const w=a(e,["validationDataset"]);t!==void 0&&w!=null&&u(t,["preferenceOptimizationSpec"],li(w))}else if(o==="DISTILLATION"){const w=a(e,["validationDataset"]);t!==void 0&&w!=null&&u(t,["distillationSpec"],li(w))}const r=a(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&u(t,["tunedModelDisplayName"],r);const s=a(e,["description"]);t!==void 0&&s!=null&&u(t,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const w=a(e,["epochCount"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(l==="PREFERENCE_TUNING"){const w=a(e,["epochCount"]);t!==void 0&&w!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}else if(l==="DISTILLATION"){const w=a(e,["epochCount"]);t!==void 0&&w!=null&&u(t,["distillationSpec","hyperParameters","epochCount"],w)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=a(e,["learningRateMultiplier"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(c==="PREFERENCE_TUNING"){const w=a(e,["learningRateMultiplier"]);t!==void 0&&w!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}else if(c==="DISTILLATION"){const w=a(e,["learningRateMultiplier"]);t!==void 0&&w!=null&&u(t,["distillationSpec","hyperParameters","learningRateMultiplier"],w)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=a(e,["exportLastCheckpointOnly"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(d==="PREFERENCE_TUNING"){const w=a(e,["exportLastCheckpointOnly"]);t!==void 0&&w!=null&&u(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}else if(d==="DISTILLATION"){const w=a(e,["exportLastCheckpointOnly"]);t!==void 0&&w!=null&&u(t,["distillationSpec","exportLastCheckpointOnly"],w)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=a(e,["adapterSize"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(f==="PREFERENCE_TUNING"){const w=a(e,["adapterSize"]);t!==void 0&&w!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}else if(f==="DISTILLATION"){const w=a(e,["adapterSize"]);t!==void 0&&w!=null&&u(t,["distillationSpec","hyperParameters","adapterSize"],w)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=a(e,["tuningMode"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","tuningMode"],w)}const h=a(e,["customBaseModel"]);t!==void 0&&h!=null&&u(t,["customBaseModel"],h);let m=a(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=a(e,["batchSize"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","hyperParameters","batchSize"],w)}let y=a(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=a(e,["learningRate"]);t!==void 0&&w!=null&&u(t,["supervisedTuningSpec","hyperParameters","learningRate"],w)}const v=a(e,["labels"]);t!==void 0&&v!=null&&u(t,["labels"],v);const S=a(e,["beta"]);t!==void 0&&S!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","beta"],S);const x=a(e,["baseTeacherModel"]);t!==void 0&&x!=null&&u(t,["distillationSpec","baseTeacherModel"],x);const A=a(e,["tunedTeacherModelSource"]);t!==void 0&&A!=null&&u(t,["distillationSpec","tunedTeacherModelSource"],A);const k=a(e,["sftLossWeightMultiplier"]);t!==void 0&&k!=null&&u(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],k);const R=a(e,["outputUri"]);return t!==void 0&&R!=null&&u(t,["outputUri"],R),i}function WE(e,t){const n={},i=a(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const o=a(e,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const r=a(e,["trainingDataset"]);r!=null&&oT(r);const s=a(e,["config"]);return s!=null&&$E(s,n),n}function YE(e,t){const n={},i=a(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const o=a(e,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const r=a(e,["trainingDataset"]);r!=null&&rT(r,n,t);const s=a(e,["config"]);return s!=null&&JE(s,n,t),n}function KE(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function XE(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function QE(e,t,n){const i={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);t!==void 0&&r!=null&&u(t,["_query","pageToken"],r);const s=a(e,["filter"]);return t!==void 0&&s!=null&&u(t,["_query","filter"],s),i}function ZE(e,t,n){const i={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);t!==void 0&&r!=null&&u(t,["_query","pageToken"],r);const s=a(e,["filter"]);return t!==void 0&&s!=null&&u(t,["_query","filter"],s),i}function jE(e,t){const n={},i=a(e,["config"]);return i!=null&&QE(i,n),n}function eT(e,t){const n={},i=a(e,["config"]);return i!=null&&ZE(i,n),n}function tT(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const r=a(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>au(l))),u(n,["tuningJobs"],s)}return n}function nT(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const r=a(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>Fi(l))),u(n,["tuningJobs"],s)}return n}function iT(e,t){const n={},i=a(e,["name"]);i!=null&&u(n,["model"],i);const o=a(e,["name"]);return o!=null&&u(n,["endpoint"],o),n}function oT(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),u(n,["examples","examples"],o)}return n}function rT(e,t,n){const i={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&u(t,["distillationSpec","promptDatasetUri"],s)}let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(r==="DISTILLATION"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&u(t,["distillationSpec","promptDatasetUri"],s)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function au(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["state"]);r!=null&&u(n,["state"],wa(r));const s=a(e,["createTime"]);s!=null&&u(n,["createTime"],s);const l=a(e,["tuningTask","startTime"]);l!=null&&u(n,["startTime"],l);const c=a(e,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=a(e,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=a(e,["description"]);f!=null&&u(n,["description"],f);const p=a(e,["baseModel"]);p!=null&&u(n,["baseModel"],p);const h=a(e,["_self"]);return h!=null&&u(n,["tunedModel"],iT(h)),n}function Fi(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["state"]);r!=null&&u(n,["state"],wa(r));const s=a(e,["createTime"]);s!=null&&u(n,["createTime"],s);const l=a(e,["startTime"]);l!=null&&u(n,["startTime"],l);const c=a(e,["endTime"]);c!=null&&u(n,["endTime"],c);const d=a(e,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=a(e,["error"]);f!=null&&u(n,["error"],f);const p=a(e,["description"]);p!=null&&u(n,["description"],p);const h=a(e,["baseModel"]);h!=null&&u(n,["baseModel"],h);const m=a(e,["tunedModel"]);m!=null&&u(n,["tunedModel"],m);const y=a(e,["preTunedModel"]);y!=null&&u(n,["preTunedModel"],y);const v=a(e,["supervisedTuningSpec"]);v!=null&&u(n,["supervisedTuningSpec"],v);const S=a(e,["preferenceOptimizationSpec"]);S!=null&&u(n,["preferenceOptimizationSpec"],S);const x=a(e,["distillationSpec"]);x!=null&&u(n,["distillationSpec"],x);const A=a(e,["tuningDataStats"]);A!=null&&u(n,["tuningDataStats"],A);const k=a(e,["encryptionSpec"]);k!=null&&u(n,["encryptionSpec"],k);const R=a(e,["partnerModelTuningSpec"]);R!=null&&u(n,["partnerModelTuningSpec"],R);const w=a(e,["customBaseModel"]);w!=null&&u(n,["customBaseModel"],w);const I=a(e,["experiment"]);I!=null&&u(n,["experiment"],I);const D=a(e,["labels"]);D!=null&&u(n,["labels"],D);const H=a(e,["outputUri"]);H!=null&&u(n,["outputUri"],H);const M=a(e,["pipelineJob"]);M!=null&&u(n,["pipelineJob"],M);const _=a(e,["serviceAccount"]);_!=null&&u(n,["serviceAccount"],_);const U=a(e,["tunedModelDisplayName"]);U!=null&&u(n,["tunedModelDisplayName"],U);const G=a(e,["veoTuningSpec"]);return G!=null&&u(n,["veoTuningSpec"],G),n}function sT(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["metadata"]);r!=null&&u(n,["metadata"],r);const s=a(e,["done"]);s!=null&&u(n,["done"],s);const l=a(e,["error"]);return l!=null&&u(n,["error"],l),n}function li(e,t){const n={},i=a(e,["gcsUri"]);i!=null&&u(n,["validationDatasetUri"],i);const o=a(e,["vertexDatasetResource"]);return o!=null&&u(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lT extends st{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Et(ot.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),r=await this.tuneMldevInternal(o);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:wi.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=XE(t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Fi(f))}else{const d=KE(t);return l=V("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>au(f))}}async listInternal(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=eT(t);return l=V("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=nT(f),h=new Rs;return Object.assign(h,p),h})}else{const d=jE(t);return l=V("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tT(f),h=new Rs;return Object.assign(h,p),h})}}async cancel(t){var n,i,o,r;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=OE(t);return l=V("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=zE(f),h=new Ps;return Object.assign(h,p),h})}else{const d=HE(t);return l=V("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=qE(f),h=new Ps;return Object.assign(h,p),h})}}async tuneInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){const l=YE(t,t);return r=V("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Fi(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=WE(t);return r=V("tunedModels",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>sT(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aT{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uT=1024*1024*8,cT=3,dT=1e3,fT=2,An="x-goog-upload-status";async function pT(e,t,n){var i;const o=await uu(e,t,n),r=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[An])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function hT(e,t,n){var i;const o=await uu(e,t,n),r=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[An])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=xa(r),l=new ro;return Object.assign(l,s),l}async function uu(e,t,n){var i,o;let r=0,s=0,l=new ki(new Response),c="upload";for(r=e.size;s<r;){const d=Math.min(uT,r-s),f=e.slice(s,s+d);s+d>=r&&(c+=", finalize");let p=0,h=dT;for(;p<cT&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[An]));)p++,await gT(h),h=h*fT;if(s+=d,((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[An])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function mT(e){return{size:e.size,type:e.type}}function gT(e){return new Promise(t=>setTimeout(t,e))}class yT{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pT(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hT(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mT(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xT{create(t,n,i){return new vT(t,n,i)}}class vT{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rl="x-goog-api-key";class ST{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(rl)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(rl,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CT="gl-node/";class ET{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new we({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=fy(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new ST(this.apiKey);this.apiClient=new mC({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:CT+"web",uploader:new yT,downloader:new aT}),this.models=new DC(this.apiClient),this.live=new AC(this.apiClient,o,new xT),this.batches=new O0(this.apiClient),this.chats=new Tx(this.models,this.apiClient),this.caches=new Sx(this.apiClient),this.files=new Lx(this.apiClient),this.operations=new LC(this.apiClient),this.authTokens=new QC(this.apiClient),this.tunings=new lT(this.apiClient),this.fileSearchStores=new rE(this.apiClient)}}var TT={};const wT=`
You are "Comfy Workflow Agent", an expert AI assistant and Workflow Architect specialized in ComfyUI.

## CORE MISSION
1. **SOLVE ERRORS**: Identify, explain, and fix execution errors, missing connections, and incompatible types.
2. **EXPLAIN LOGIC**: Deconstruct complex workflows into clear, step-by-step explanations of how data flows (e.g., Load Image -> VAE Encode -> KSampler -> Decode).

## CAPABILITIES
1. **Analyze Workflows**: Understand the structure, data flow, and logic of the provided JSON.
2. **Modify Workflows**: Generate a VALID, COMPLETE JSON representation of the workflow when requested.
3. **Active Inquiry**: If a user's request is ambiguous, ASK for clarification.

## RESPONSE FORMAT
1. **For Explanations**: Use natural language with bold key terms. Break down the flow logically (e.g., "Step 1: Input", "Step 2: Processing").
2. **For Workflow Updates**:
   - Output the **FULL JSON** in a Markdown code block labeled \`json\`.
   - Example: \`\`\`json { ... } \`\`\`
   - **CRITICAL**: Ensure valid JSON. NO trailing commas. NO comments inside the JSON block.
3. **For Diagnostics / Issues**:
   - If you find specific problems, output them in a JSON array block labeled \`ISSUES_JSON\`.
   - Format: \`ISSUES_JSON: [{"nodeId": 10, "severity": "error", "message": "...", "fixSuggestion": "..."}]\`
4. **For Missing Nodes**:
   - Use a section: "SUGGESTED_ACTIONS: [Action1, Action2]".

## RULES
- **Always** validate connections.
- **Never** break JSON structure.
- When explaining, focus on **data flow** and **functionality**, not just node names.

## FINAL OUTPUT
At the end of your response, please provide 3 short "Related Questions" that user might want to ask next to help them deeper understand the workflow or resolve issues.
Format them as a JSON array labeled \`RELATED_QUESTIONS\`.
Example: \`RELATED_QUESTIONS: ["Question 1?", "Question 2?"]\`
`;function sl(e,t){let n=e;return Object.keys(t).forEach(i=>{const o=t[i],r=`$${i}`;if(typeof o=="object"){const s=JSON.stringify(o);n=n.replace(dn(`"${r}"`),s),n=n.replace(dn(`'${r}'`),s),n=n.replace(dn(r),s)}else n=n.replace(dn(r),String(o))}),n}function dn(e){return new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}async function _T(e,t,n,i){if(!e.baseUrl)throw new Error("Base URL required for custom provider");const o={endpoint:"/chat/completions",headers:JSON.stringify({"Content-Type":"application/json",Authorization:"Bearer $apiKey"}),body:JSON.stringify({model:"$model",messages:"$messages",temperature:.5,stream:!1})},r=e.customConfig||{},s=r.endpoint||o.endpoint,l=r.headers||o.headers,c=r.body||o.body;let d="";if(s.startsWith("http"))d=s;else{const S=e.baseUrl.replace(/\/$/,""),x=s.startsWith("/")?s:`/${s}`;d=`${S}${x}`}const f={model:e.modelName,apiKey:e.apiKey||"",prompt:n+`

`+t,system:n,user_prompt:t,messages:[{role:"system",content:n},{role:"user",content:t}]};let p={};try{const S=sl(l,f);p=JSON.parse(S)}catch(S){throw console.error("Failed to parse headers template",S),new Error("Invalid Headers Configuration")}let h="";try{h=sl(c,f),JSON.parse(h)}catch(S){throw console.error("Failed to parse body template",S),new Error("Invalid Body Template JSON")}const m=await fetch(d,{method:"POST",headers:p,body:h});if(!m.ok){const S=await m.text();throw new Error(`Custom API Error: ${d} returned ${m.status} - ${S}`)}const y=await m.json();let v="";return y.choices&&y.choices[0]?y.choices[0].message?v=y.choices[0].message.content:y.choices[0].text&&(v=y.choices[0].text):y.content?v=y.content:y.response&&(v=y.response),v||(v=JSON.stringify(y)),i&&i(v),v}async function kT(e,t,n,i){var f,p,h;const o=e.apiKey||TT.API_KEY;if(!o)throw new Error("API Key is missing. Please set it in settings.");const s=await new ET({apiKey:o}).models.generateContentStream({model:e.modelName||"gemini-2.5-flash",contents:t,config:{systemInstruction:n,tools:[{googleSearch:{}}],temperature:.5}});let l="";const c=[];for await(const m of s){const y=m.text;y&&(l+=y,i&&i(y));const v=(h=(p=(f=m.candidates)==null?void 0:f[0])==null?void 0:p.groundingMetadata)==null?void 0:h.groundingChunks;v&&v.forEach(S=>{var x,A;(x=S.web)!=null&&x.uri&&((A=S.web)!=null&&A.title)&&c.push({uri:S.web.uri,title:S.web.title})})}const d=Array.from(new Map(c.map(m=>[m.uri,m])).values());return{text:l,sources:d}}async function IT(e,t,n,i,o,r,s){var m,y,v,S,x;if(!e.pythonBackendUrl)throw new Error("Python Backend URL is missing.");const l={message:t,workflow:n,session_id:i,error_log:o,language:e.language,config_id:e.activeBackendConfigId||void 0},c=await fetch(`${e.pythonBackendUrl.replace(/\/$/,"")}/api/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!c.ok)throw new Error(`Backend Error: ${c.status} ${c.statusText}`);if(!c.body)throw new Error("No response body from backend");const d=c.body.getReader(),f=new TextDecoder;let p="",h="";for(;;){const{done:A,value:k}=await d.read();if(A)break;h+=f.decode(k,{stream:!0});const R=h.split(`
`);h=R.pop()||"";for(const w of R)if(w.trim().startsWith("data: ")){const I=w.replace("data: ","").trim();if(I==="[DONE]")continue;try{const D=JSON.parse(I);if(D.type==="status_update"&&s)s({node:(m=D.metadata)==null?void 0:m.node,displayText:((y=D.metadata)==null?void 0:y.display_text)||"Processing...",status:((v=D.metadata)==null?void 0:v.status)||"processing"});else if(D.type==="meta_update"&&s)s({node:(S=D.metadata)==null?void 0:S.node,displayText:"Processing found data...",status:"processing",details:(x=D.metadata)==null?void 0:x.step_data});else if(D.type==="content"||D.chunk){const H=D.chunk||"";p+=H,r&&r(H)}}catch(D){console.warn("Failed to parse backend SSE chunk",D)}}}return{text:p,sources:[]}}const AT=async(e,t)=>{if(!e.usePythonBackend||!e.pythonBackendUrl)return[];try{const n=await fetch(`${e.pythonBackendUrl.replace(/\/$/,"")}/api/chat/history/${t}`);if(!n.ok)return[];const i=await n.json();return Array.isArray(i)?i.map((o,r)=>({id:`hist-${r}-${Date.now()}`,sender:o.sender==="user"?Be.USER:Be.AI,text:o.text||"",timestamp:new Date(o.timestamp||Date.now()),metadata:o.sender==="ai"?{provider:"History"}:void 0})):[]}catch(n){return console.error("Failed to fetch chat history:",n),[]}};function ai(e){let t=e.replace(/\/\/.*$/gm,"");return t=t.replace(/\/\*[\s\S]*?\*\//g,""),t=t.replace(/,\s*}/g,"}").replace(/,\s*]/g,"]"),t}const bT=async(e,t,n,i=[],o="default",r,s,l)=>{var d,f;const c=n.language;try{const p=`
IMPORTANT: You MUST respond in the following language code: "${n.language}". Translate your advice and interface text accordingly.`,h=wT+p;let m="",y=[],v=`
            [CURRENT WORKFLOW STATE]
            Node Count: ${((d=e==null?void 0:e.nodes)==null?void 0:d.length)||0}
            Nodes Summary: ${JSON.stringify(((f=e==null?void 0:e.nodes)==null?void 0:f.map(M=>{var _;return{id:M.id,type:M.type,title:(_=M.properties)==null?void 0:_["Node name for S&R"]}}))||[])}
            
            [FULL WORKFLOW JSON]
            ${JSON.stringify(e)}
            `;if(r&&(v+=`
[RUNTIME ERRORS]
The user encountered the following errors during execution:
${r}
`),v+=`
            [USER REQUEST]
            "${t}"

            [INSTRUCTIONS]
            - If the user wants to change the workflow, output the NEW JSON in a \`\`\`json block.
            - If the user asks to DIAGNOSE, ANALYZE, or CHECK the workflow, output the issues in \`ISSUES_JSON: [...] \`.
            - If the user asks to EXPLAIN, provide a detailed summary of the logic and data flow.
            - Suggest 2-3 short follow-up actions if applicable in the format "SUGGESTED_ACTIONS: [Action 1, Action 2]".
            - Provide 3 Related Questions in the format \`RELATED_QUESTIONS: ["Q1", "Q2"]\`.
            `,n.usePythonBackend){const M=await IT(n,t,e,o,r,s,l);m=M.text,y=M.sources}else if(n.provider==="google"){const M=await kT(n,v,h,s);m=M.text,y=M.sources}else m=await _T(n,v,h,s);let S=null;const x=m.match(/```json\s*([\s\S]*?)\s*```/);if(x&&x[1])try{const M=x[1],_=ai(M);S=JSON.parse(_)}catch(M){console.error("Failed to parse generated workflow JSON:",M)}let A=[];const k=m.match(/ISSUES_JSON:\s*(?:```(?:json)?\s*)?(\[[\s\S]*?\])(?:\s*```)?/);if(k&&k[1])try{const M=k[1],_=JSON.parse(ai(M));Array.isArray(_)&&(A=_.map((U,G)=>({id:`ai-issue-${Date.now()}-${G}`,nodeId:U.nodeId||null,severity:U.severity||"warning",message:U.message||"Unknown issue",fixSuggestion:U.fixSuggestion})))}catch(M){console.error("Failed to parse issues JSON:",M)}let R=[];const w=m.match(/SUGGESTED_ACTIONS:\s*\[(.*?)\]/);w&&w[1]&&(R=w[1].split(",").map(M=>M.trim().replace(/['"]/g,"")));let I=[];const D=m.match(/RELATED_QUESTIONS:\s*(?:```(?:json)?\s*)?(\[[\s\S]*?\])(?:\s*```)?/);if(D&&D[1])try{I=JSON.parse(ai(D[1]))}catch(M){console.error("Failed to parse related questions:",M)}return{chatResponse:m.replace(/```json\s*[\s\S]*?\s*```/,P(c,"updateMessage")).replace(/ISSUES_JSON:\s*(?:```(?:json)?\s*)?\[[\s\S]*?\](?:\s*```)?/,"").replace(/SUGGESTED_ACTIONS:\s*\[.*?\]/,"").replace(/RELATED_QUESTIONS:\s*(?:```(?:json)?\s*)?\[[\s\S]*?\](?:\s*```)?/,"").trim(),updatedWorkflow:S,missingNodes:[],issues:A,suggestedActions:R.length>0?R:[P(c,"actionUndo"),P(c,"actionExplainChanges")],relatedQuestions:I,groundingSources:y}}catch(p){return console.error("AI Agent Error:",p),{chatResponse:`${P(c,"errorPrefix")} ${p.message||"Unknown error"}`,updatedWorkflow:null,suggestedActions:["Check Settings","Retry"],groundingSources:[]}}};var ui={};const NT=()=>{const[e,t]=q.useState(!1),[n,i]=q.useState(!1),[o,r]=q.useState("preview"),[s,l]=q.useState({x:100,y:50}),[c,d]=q.useState(()=>{const T=localStorage.getItem("comfy_copilot_size");if(T)try{return JSON.parse(T)}catch(B){console.error(B)}return{width:950,height:700}}),f=q.useRef(null),p=q.useRef(null),h=q.useRef(null),m=q.useRef(`session-${Date.now()}-${Math.random().toString(36).substring(2,9)}`),y=q.useRef(null),[v,S]=q.useState(null),[x,A]=q.useState(()=>{const T=localStorage.getItem("comfy_copilot_settings");if(T)try{const B=JSON.parse(T);return{...B,language:B.language||"en",usePythonBackend:B.usePythonBackend||!1,pythonBackendUrl:B.pythonBackendUrl||"http://127.0.0.1:8000"}}catch(B){console.error(B)}return{provider:"google",apiKey:typeof process<"u"&&(ui==null?void 0:ui.API_KEY)||"",modelName:"gemini-2.5-flash",baseUrl:"",language:"en",usePythonBackend:!1,pythonBackendUrl:"http://127.0.0.1:8000"}}),[k,R]=q.useState(ly),[w,I]=q.useState([]),[D,H]=q.useState([{id:"init-1",sender:Be.AI,text:P(x.language,"welcome"),timestamp:new Date,metadata:{suggestedActions:[P(x.language,"initActionExplain"),P(x.language,"initActionCheck")]}}]),[M,_]=q.useState(""),[U,G]=q.useState(!1),[$,K]=q.useState(null),[Y,ce]=q.useState(!1),j=window.app,le=q.useCallback(T=>{if(!T)return null;if(T.id)return T.id;if(T.extra){if(T.extra.workspace_info&&T.extra.workspace_info.id)return T.extra.workspace_info.id;if(T.extra.id)return T.extra.id}return null},[]),xe=q.useCallback(()=>{if(j&&j.graph){const T=j.graph.serialize();R(T);const B=le(T);B&&(m.current=B)}},[j,le]);q.useEffect(()=>{e&&xe()},[e,xe]);const C=q.useMemo(()=>le(k)||m.current,[k,le]);q.useEffect(()=>{if(x.usePythonBackend&&x.pythonBackendUrl&&e){if(C===y.current||U)return;m.current=C,(async()=>{const B=await AT(x,C);B&&B.length>0&&H(z=>{if(z.length===1&&z[0].id==="init-1")return B;const X=new Set(z.map(ee=>`${ee.sender}:${ee.text.trim()}`)),Q=B.filter(ee=>{const he=`${ee.sender}:${ee.text.trim()}`;return!X.has(he)});return Q.length===0?z:[...z,...Q].sort((ee,he)=>ee.timestamp.getTime()-he.timestamp.getTime())}),y.current=C})()}},[e,x.usePythonBackend,x.pythonBackendUrl,C,U]),q.useEffect(()=>{H(T=>T.length===1&&T[0].id==="init-1"?[{...T[0],text:P(x.language,"welcome"),metadata:{...T[0].metadata,suggestedActions:[P(x.language,"initActionExplain"),P(x.language,"initActionCheck")]}}]:T)},[x.language]);const _e=q.useCallback(T=>{if(typeof window>"u")return[];const B=window.LiteGraph;if(!B||!B.registered_node_types)return[];const z=B.registered_node_types[T.type];if(!z||!z.nodeData||!z.nodeData.input)return[];const X=z.nodeData.input,Q=X.required||{},ee=X.optional||{},he=new Set((T.inputs||[]).map(re=>re.name)),ge=[];return Object.keys(Q).forEach(re=>{he.has(re)||ge.push(re)}),Object.keys(ee).forEach(re=>{he.has(re)||ge.push(re)}),ge},[]);q.useEffect(()=>{const T=()=>t(Q=>!Q);window.addEventListener("comfy-workflow-agent-toggle",T);let B=null;const z=Q=>{if(Q.detail){const{node_id:ee,exception_message:he,exception_type:ge,traceback:re}=Q.detail,Ce=`
Error Type: ${ge}
Node ID: ${ee}
Message: ${he}
Traceback:
${re?re.join(""):"N/A"}
            `.trim();S(Ce);const ue={id:`exec-err-${Date.now()}`,nodeId:ee?parseInt(ee):null,severity:"error",message:`${ge||"Error"}: ${he}`,fixSuggestion:P(x.language,"defaultFix")};I(b=>[ue,...b]),t(!0),r("analysis")}};return(async()=>{try{B=(await Cu(()=>import("/scripts/api.js"),[])).api}catch{j&&j.api?B=j.api:window.app&&window.app.api&&(B=window.app.api)}B&&B.addEventListener("execution_error",z)})(),()=>{window.removeEventListener("comfy-workflow-agent-toggle",T),B&&B.removeEventListener("execution_error",z)}},[j,x.language]),q.useEffect(()=>{window.innerWidth>1200&&l({x:window.innerWidth-1e3,y:80})},[]);const ye=T=>{if(j&&(j.loadGraphData(T),j.canvas&&T.nodes&&T.nodes.length>0)){const B=T.nodes[0].id,z=j.graph.getNodeById?j.graph.getNodeById(Number(B)):null;z&&j.canvas.centerOnNode(z)}},E=T=>{A(T),localStorage.setItem("comfy_copilot_settings",JSON.stringify(T))},ke=T=>{R(T),ye(T)},Ie=q.useCallback(T=>{if(!p.current||!f.current)return;const B=T.clientX-p.current.startX,z=T.clientY-p.current.startY;f.current.style.left=`${p.current.startLeft+B}px`,f.current.style.top=`${p.current.startTop+z}px`},[]),fe=q.useCallback(T=>{if(p.current){const B=T.clientX-p.current.startX,z=T.clientY-p.current.startY;l({x:p.current.startLeft+B,y:p.current.startTop+z}),p.current=null}document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",fe)},[Ie]),Ve=T=>{T.button===0&&(p.current={startX:T.clientX,startY:T.clientY,startLeft:s.x,startTop:s.y},document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",fe),T.preventDefault())},Se=q.useCallback(T=>{if(!h.current||!f.current)return;const B=T.clientX-h.current.startX,z=T.clientY-h.current.startY,X=Math.max(600,h.current.startWidth+B),Q=Math.max(400,h.current.startHeight+z);f.current.style.width=`${X}px`,f.current.style.height=`${Q}px`},[]),Re=q.useCallback(T=>{if(h.current){const B=T.clientX-h.current.startX,z=T.clientY-h.current.startY,X=Math.max(600,h.current.startWidth+B),Q=Math.max(400,h.current.startHeight+z),ee={width:X,height:Q};d(ee),localStorage.setItem("comfy_copilot_size",JSON.stringify(ee))}h.current=null,document.removeEventListener("mousemove",Se),document.removeEventListener("mouseup",Re)},[Se]),He=T=>{T.stopPropagation(),T.preventDefault(),h.current={startX:T.clientX,startY:T.clientY,startWidth:c.width,startHeight:c.height},document.addEventListener("mousemove",Se),document.addEventListener("mouseup",Re)},L=q.useCallback(async(T,B)=>{const z=T||M;if(!z.trim()||U)return;if(!x.usePythonBackend&&!x.apiKey&&x.provider==="custom"){ce(!0);return}let X=k;j&&j.graph&&(X=j.graph.serialize(),R(X));const Q={id:Date.now().toString(),sender:Be.USER,text:z,timestamp:new Date};H(b=>[...b,Q]),_(""),G(!0),K(null);const ee=(Date.now()+1).toString(),he={id:ee,sender:Be.AI,text:"",timestamp:new Date,metadata:{thinking:!0}};H(b=>[...b,he]);let ge=B;if(!ge){const b=w.filter(N=>N.severity==="error").map(N=>`Node ${N.nodeId}: ${N.message}`).join(`
`);ge=b.length>0?b:""}const re=le(X);let Ce=m.current;re&&(Ce=re,m.current=re,y.current!==re&&(y.current=re));let ue="";try{const b=D.slice(-5).map(O=>`${O.sender}: ${O.text}`),N=await bT(X,z,x,b,Ce,ge,O=>{ue+=O,H(J=>J.map(ne=>ne.id===ee?{...ne,text:ue,metadata:{...ne.metadata,thinking:!1}}:ne))},O=>{K(O)});N.updatedWorkflow&&(R(N.updatedWorkflow),ye(N.updatedWorkflow)),N.issues&&N.issues.length>0&&(I(N.issues),r("analysis")),H(O=>O.map(J=>J.id===ee?{...J,text:N.chatResponse,metadata:{workflowUpdate:!!N.updatedWorkflow,missingNodes:N.missingNodes,suggestedActions:N.suggestedActions,relatedQuestions:N.relatedQuestions,groundingSources:N.groundingSources,provider:x.usePythonBackend?"Python Backend":x.provider}}:J)),B&&S(null)}catch(b){console.error(b);const N={id:(Date.now()+2).toString(),sender:Be.SYSTEM,text:"Error: "+b.message,timestamp:new Date};H(O=>[...O,N]),H(O=>O.filter(J=>J.id!==ee||J.text.length>0))}finally{G(!1),K(null)}},[M,U,D,k,x,j,w,le]),me=T=>L(T),Oe=()=>{v&&L("Fix this runtime error.",v)},Pe=x.usePythonBackend?!!x.pythonBackendUrl:x.provider==="google"||!!x.apiKey;return e?g.jsxs("div",{id:"comfy-workflow-agent-window",ref:f,className:"flex flex-col overflow-hidden bg-slate-950 border border-slate-700 shadow-2xl rounded-xl transition-opacity duration-75",style:{position:"fixed",left:s.x,top:s.y,width:n?"300px":`${c.width}px`,height:n?"auto":`${c.height}px`,zIndex:10001,pointerEvents:"auto"},children:[g.jsxs("div",{onMouseDown:Ve,className:"bg-slate-900 border-b border-slate-800 p-3 flex items-center justify-between cursor-move select-none group flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"text-slate-500 group-hover:text-slate-300 transition-colors",children:g.jsx(Ru,{size:18})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${x.usePythonBackend?"bg-emerald-500":"bg-indigo-500"}`}),g.jsx("span",{className:"font-bold text-slate-200 text-sm",children:P(x.language,"appName")})]})]}),g.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[!n&&g.jsx("button",{onClick:xe,className:"p-1 hover:text-indigo-400 transition-colors",title:"Sync from Canvas",onMouseDown:T=>T.stopPropagation(),children:g.jsx(cl,{size:14})}),g.jsx("button",{onClick:()=>i(!n),className:"p-1 hover:text-white transition-colors",onMouseDown:T=>T.stopPropagation(),children:n?g.jsx(Fu,{size:14}):g.jsx(Gu,{size:14})}),g.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:text-red-400 transition-colors",onMouseDown:T=>T.stopPropagation(),children:g.jsx(fl,{size:14})})]})]}),!n&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[g.jsx(ny,{isOpen:Y,onClose:()=>ce(!1),currentSettings:x,onSave:E}),g.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-row",children:[g.jsx("div",{className:"w-[35%] min-w-[300px] border-r border-slate-800 flex flex-col bg-slate-950",children:g.jsx(Yg,{messages:D,input:M,setInput:_,onSend:()=>L(),isProcessing:U,currentStatus:$,onActionClick:me,language:x.language})}),g.jsxs("div",{className:"flex-1 flex flex-col bg-slate-900 relative min-w-0",children:[g.jsx(sy,{workflow:k,language:x.language,onOpenSettings:()=>ce(!0),isConfigured:Pe,onUpdateWorkflow:ke,onAskAi:L,issues:w,resolveWidgetNames:_e,activeTab:o,onTabChange:r}),v&&g.jsx("div",{className:"absolute bottom-6 right-6 z-50 animate-in slide-in-from-bottom-5 fade-in duration-300",children:g.jsx("div",{className:"bg-red-950/90 border border-red-500/50 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-sm",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg",children:g.jsx(Ro,{className:"w-5 h-5 text-red-400"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"text-sm font-bold text-red-100 mb-1",children:"Runtime Error Detected"}),g.jsx("p",{className:"text-xs text-red-200/70 mb-3 line-clamp-2",children:"An error occurred during workflow execution."}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>S(null),className:"px-3 py-1.5 text-xs text-red-300 hover:text-white transition-colors",children:"Dismiss"}),g.jsxs("button",{onClick:Oe,className:"px-3 py-1.5 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded-lg shadow-lg shadow-red-900/20 transition-all flex items-center gap-2",children:[g.jsx(Ro,{size:12}),"Fix with AI"]})]})]})]})})})]})]})]}),g.jsx("div",{onMouseDown:He,className:"absolute bottom-0 right-0 w-5 h-5 cursor-se-resize z-50 flex items-center justify-center text-slate-600 hover:text-indigo-400 transition-colors",children:g.jsx($u,{size:12,className:"transform rotate-90"})})]})]}):null};function RT(){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css";const t="./style.css";e.href=new URL(t,import.meta.url).href,document.head.appendChild(e)}function PT(){if(document.getElementById("comfy-workflow-agent-button"))return;const e=document.createElement("button");e.textContent="SG WorkflowAgent",e.id="comfy-workflow-agent-button",e.style.cssText=`
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 9999;
      background: linear-gradient(90deg, #4f46e5, #7c3aed);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: transform 0.1s;
      user-select: none;
  `,document.body.appendChild(e);let t=!1,n=0,i=0,o=0,r=0,s=!1;const l=f=>{if(f.button!==0)return;t=!0,s=!1,n=f.clientX,i=f.clientY;const p=e.getBoundingClientRect();o=p.left,r=p.top,e.style.right="auto",e.style.bottom="auto",e.style.left=`${o}px`,e.style.top=`${r}px`,document.addEventListener("mousemove",c),document.addEventListener("mouseup",d),f.preventDefault()},c=f=>{if(!t)return;const p=f.clientX-n,h=f.clientY-i;(Math.abs(p)>2||Math.abs(h)>2)&&(s=!0),e.style.transform="scale(1.05)",e.style.left=`${o+p}px`,e.style.top=`${r+h}px`},d=()=>{if(t=!1,e.style.transform="scale(1)",document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),!s){const f=new CustomEvent("comfy-workflow-agent-toggle");window.dispatchEvent(f)}};e.addEventListener("mousedown",l)}const MT={name:"Comfy.WorkflowAgent",async setup(){console.log(" Comfy Workflow Agent: Setup started"),RT();const e="comfy-workflow-agent-root";let t=document.getElementById(e);t||(t=document.createElement("div"),t.id=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.zIndex="10000",t.style.pointerEvents="none",t.style.overflow="hidden",document.body.appendChild(t)),PT(),ci.createRoot(t).render(g.jsx(du.StrictMode,{children:g.jsx(q.Suspense,{fallback:null,children:g.jsx(NT,{})})}))}};fu.registerExtension(MT);
